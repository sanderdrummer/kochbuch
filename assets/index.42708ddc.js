(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Z={};function Gi(e){Z.context=e}const Ji=(e,t)=>e===t,Gn=Symbol("solid-proxy"),Zi=Symbol("solid-track"),Vt={equals:Ji};let Hr=Xr;const Se=1,Ht=2,Ur={owned:null,cleanups:null,context:null,owner:null},vn={};var L=null;let Oe=null,z=null,J=null,we=null,Jn=0;function st(e,t){const n=z,r=L,i=e.length===0,o=i?Ur:{owned:null,cleanups:null,context:null,owner:t||r},a=i?e:()=>e(()=>le(()=>nr(o)));L=o,z=null;try{return xe(a,!0)}finally{z=n,L=r}}function te(e,t){t=t?Object.assign({},Vt,t):Vt;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Qr(n,i));return[Yr.bind(n),r]}function xr(e,t,n){const r=rn(e,t,!0,Se);Ge(r)}function U(e,t,n){const r=rn(e,t,!1,Se);Ge(r)}function eo(e,t,n){Hr=so;const r=rn(e,t,!1,Se);r.user=!0,we?we.push(r):Ge(r)}function j(e,t,n){n=n?Object.assign({},Vt,n):Vt;const r=rn(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ge(r),Yr.bind(r)}function wt(e,t,n){let r,i,o;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,i=e,o=t||{}):(r=e,i=t,o=n||{});let a=null,s=vn,u=null,l=!1,c="initialValue"in o,f=typeof r=="function"&&j(r);const h=new Set,[y,d]=(o.storage||te)(o.initialValue),[p,b]=te(void 0),[x,w]=te(void 0,{equals:!1}),[g,m]=te(c?"ready":"unresolved");if(Z.context){u=`${Z.context.id}${Z.context.count++}`;let _;o.ssrLoadFrom==="initial"?s=o.initialValue:Z.load&&(_=Z.load(u))&&(s=_[0])}function v(_,A,P,D){return a===_&&(a=null,c=!0,(_===s||A===s)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(D,{value:A})),s=vn,E(A,P)),A}function E(_,A){xe(()=>{A||d(()=>_),b(A),m(A?"errored":"ready");for(const P of h.keys())P.decrement();h.clear()},!1)}function R(){const _=io,A=y(),P=p();if(P&&!a)throw P;return z&&!z.user&&_&&xr(()=>{x(),a&&(_.resolved||h.has(_)||(_.increment(),h.add(_)))}),A}function C(_=!0){if(_!==!1&&l)return;l=!1;const A=f?f():r;if(A==null||A===!1){v(a,le(y));return}const P=s!==vn?s:le(()=>i(A,{value:y(),refetching:_}));return typeof P!="object"||!(P&&"then"in P)?(v(a,P),P):(a=P,l=!0,queueMicrotask(()=>l=!1),xe(()=>{m(c?"refreshing":"pending"),w()},!1),P.then(D=>v(P,D,void 0,A),D=>v(P,void 0,Jr(D))))}return Object.defineProperties(R,{state:{get:()=>g()},error:{get:()=>p()},loading:{get(){const _=g();return _==="pending"||_==="refreshing"}},latest:{get(){if(!c)return R();const _=p();if(_&&!a)throw _;return y()}}}),f?xr(()=>C(!1)):C(!1),[R,{refetch:C,mutate:d}]}function le(e){let t,n=z;return z=null,t=e(),z=n,t}function Wr(e,t,n){const r=Array.isArray(e);let i,o=n&&n.defer;return a=>{let s;if(r){s=Array(e.length);for(let l=0;l<e.length;l++)s[l]=e[l]()}else s=e();if(o){o=!1;return}const u=le(()=>t(s,i,a));return i=s,u}}function Zn(e){return L===null||(L.cleanups===null?L.cleanups=[e]:L.cleanups.push(e)),e}function to(){return L}function no(e,t){const n=L;L=e;try{return xe(t,!0)}finally{L=n}}function ro(e){const t=z,n=L;return Promise.resolve().then(()=>{z=t,L=n;let r;return xe(e,!1),z=L=null,r?r.done:void 0})}function qr(e,t){const n=Symbol("context");return{id:n,Provider:uo(n),defaultValue:e}}function er(e){let t;return(t=ei(L,e.id))!==void 0?t:e.defaultValue}function tr(e){const t=j(e),n=j(()=>An(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let io;function Yr(){const e=Oe;if(this.sources&&(this.state||e))if(this.state===Se||e)Ge(this);else{const t=J;J=null,xe(()=>Wt(this),!1),J=t}if(z){const t=this.observers?this.observers.length:0;z.sources?(z.sources.push(this),z.sourceSlots.push(t)):(z.sources=[this],z.sourceSlots=[t]),this.observers?(this.observers.push(z),this.observerSlots.push(z.sources.length-1)):(this.observers=[z],this.observerSlots=[z.sources.length-1])}return this.value}function Qr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&xe(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],a=Oe&&Oe.running;a&&Oe.disposed.has(o),(a&&!o.tState||!a&&!o.state)&&(o.pure?J.push(o):we.push(o),o.observers&&Gr(o)),a||(o.state=Se)}if(J.length>1e6)throw J=[],new Error},!1)),t}function Ge(e){if(!e.fn)return;nr(e);const t=L,n=z,r=Jn;z=L=e,oo(e,e.value,r),z=n,L=t}function oo(e,t,n){let r;try{r=e.fn(t)}catch(i){e.pure&&(e.state=Se),Zr(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Qr(e,r):e.value=r,e.updatedAt=n)}function rn(e,t,n,r=Se,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:L,context:null,pure:n};return L===null||L!==Ur&&(L.owned?L.owned.push(o):L.owned=[o]),o}function Ut(e){const t=Oe;if(e.state===0||t)return;if(e.state===Ht||t)return Wt(e);if(e.suspense&&le(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Jn);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===Se||t)Ge(e);else if(e.state===Ht||t){const i=J;J=null,xe(()=>Wt(e,n[0]),!1),J=i}}function xe(e,t){if(J)return e();let n=!1;t||(J=[]),we?n=!0:we=[],Jn++;try{const r=e();return ao(n),r}catch(r){J||(we=null),Zr(r)}}function ao(e){if(J&&(Xr(J),J=null),e)return;const t=we;we=null,t.length&&xe(()=>Hr(t),!1)}function Xr(e){for(let t=0;t<e.length;t++)Ut(e[t])}function so(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Ut(r)}for(Z.context&&Gi(),t=0;t<n;t++)Ut(e[t])}function Wt(e,t){const n=Oe;e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];i.sources&&(i.state===Se||n?i!==t&&Ut(i):(i.state===Ht||n)&&Wt(i,t))}}function Gr(e){const t=Oe;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=Ht,r.pure?J.push(r):we.push(r),r.observers&&Gr(r))}}function nr(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),a=n.observerSlots.pop();r<i.length&&(o.sourceSlots[a]=r,i[r]=o,n.observerSlots[r]=a)}}if(e.owned){for(t=0;t<e.owned.length;t++)nr(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Jr(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Zr(e){throw e=Jr(e),e}function ei(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:ei(e.owner,t):void 0}function An(e){if(typeof e=="function"&&!e.length)return An(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=An(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function uo(e,t){return function(r){let i;return U(()=>i=le(()=>(L.context={[e]:r.value},tr(()=>r.children))),void 0),i}}const lo=Symbol("fallback");function Er(e){for(let t=0;t<e.length;t++)e[t]()}function co(e,t,n={}){let r=[],i=[],o=[],a=0,s=t.length>1?[]:null;return Zn(()=>Er(o)),()=>{let u=e()||[],l,c;return u[Zi],le(()=>{let h=u.length,y,d,p,b,x,w,g,m,v;if(h===0)a!==0&&(Er(o),o=[],r=[],i=[],a=0,s&&(s=[])),n.fallback&&(r=[lo],i[0]=st(E=>(o[0]=E,n.fallback())),a=1);else if(a===0){for(i=new Array(h),c=0;c<h;c++)r[c]=u[c],i[c]=st(f);a=h}else{for(p=new Array(h),b=new Array(h),s&&(x=new Array(h)),w=0,g=Math.min(a,h);w<g&&r[w]===u[w];w++);for(g=a-1,m=h-1;g>=w&&m>=w&&r[g]===u[m];g--,m--)p[m]=i[g],b[m]=o[g],s&&(x[m]=s[g]);for(y=new Map,d=new Array(m+1),c=m;c>=w;c--)v=u[c],l=y.get(v),d[c]=l===void 0?-1:l,y.set(v,c);for(l=w;l<=g;l++)v=r[l],c=y.get(v),c!==void 0&&c!==-1?(p[c]=i[l],b[c]=o[l],s&&(x[c]=s[l]),c=d[c],y.set(v,c)):o[l]();for(c=w;c<h;c++)c in p?(i[c]=p[c],o[c]=b[c],s&&(s[c]=x[c],s[c](c))):i[c]=st(f);i=i.slice(0,a=h),r=u.slice(0)}return i});function f(h){if(o[c]=h,s){const[y,d]=te(c);return s[c]=d,t(u[c],y)}return t(u[c])}}}function S(e,t){return le(()=>e(t||{}))}function Tt(){return!0}const ti={get(e,t,n){return t===Gn?n:e.get(t)},has(e,t){return e.has(t)},set:Tt,deleteProperty:Tt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Tt,deleteProperty:Tt}},ownKeys(e){return e.keys()}};function yn(e){return(e=typeof e=="function"?e():e)==null?{}:e}function Sn(...e){if(e.some(n=>n&&(Gn in n||typeof n=="function")))return new Proxy({get(n){for(let r=e.length-1;r>=0;r--){const i=yn(e[r])[n];if(i!==void 0)return i}},has(n){for(let r=e.length-1;r>=0;r--)if(n in yn(e[r]))return!0;return!1},keys(){const n=[];for(let r=0;r<e.length;r++)n.push(...Object.keys(yn(e[r])));return[...new Set(n)]}},ti);const t={};for(let n=0;n<e.length;n++)if(e[n]){const r=Object.getOwnPropertyDescriptors(e[n]);Object.defineProperties(t,r)}return t}function fo(e,...t){const n=new Set(t.flat()),r=Object.getOwnPropertyDescriptors(e),i=Gn in e;i||t.push(Object.keys(r).filter(a=>!n.has(a)));const o=t.map(a=>{const s={};for(let u=0;u<a.length;u++){const l=a[u];Object.defineProperty(s,l,r[l]?r[l]:{get(){return e[l]},set(){return!0}})}return s});return i&&o.push(new Proxy({get(a){return n.has(a)?void 0:e[a]},has(a){return n.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!n.has(a))}},ti)),o}function qt(e){const t="fallback"in e&&{fallback:()=>e.fallback};return j(co(()=>e.each,e.children,t||void 0))}function ni(e){let t=!1;const n=e.keyed,r=j(()=>e.when,void 0,{equals:(i,o)=>t?i===o:!i==!o});return j(()=>{const i=r();if(i){const o=e.children,a=typeof o=="function"&&o.length>0;return t=n||a,a?le(()=>o(i)):o}return e.fallback})}const ho=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],po=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...ho]),vo=new Set(["innerHTML","textContent","innerText","children"]),yo=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Ar=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),go=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),mo={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function bo(e,t,n){let r=n.length,i=t.length,o=r,a=0,s=0,u=t[i-1].nextSibling,l=null;for(;a<i||s<o;){if(t[a]===n[s]){a++,s++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===a){const c=o<r?s?n[s-1].nextSibling:n[o-s]:u;for(;s<o;)e.insertBefore(n[s++],c)}else if(o===s)for(;a<i;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[o-1]&&n[s]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[s++],t[a++].nextSibling),e.insertBefore(n[--o],c),t[i]=n[o]}else{if(!l){l=new Map;let f=s;for(;f<o;)l.set(n[f],f++)}const c=l.get(t[a]);if(c!=null)if(s<c&&c<o){let f=a,h=1,y;for(;++f<i&&f<o&&!((y=l.get(t[f]))==null||y!==c+h);)h++;if(h>c-s){const d=t[a];for(;s<c;)e.insertBefore(n[s++],d)}else e.replaceChild(n[s++],t[a++])}else a++;else t[a++].remove()}}}const Sr="_$DX_DELEGATE";function wo(e,t,n,r={}){let i;return st(o=>{i=o,t===document?e():$(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function M(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function _t(e,t=window.document){const n=t[Sr]||(t[Sr]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,Po))}}function Fe(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function _o(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function Je(e,t){t==null?e.removeAttribute("class"):e.className=t}function xo(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n)}function Eo(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,a;for(o=0,a=i.length;o<a;o++){const s=i[o];!s||s==="undefined"||t[s]||(Cr(e,s,!1),delete n[s])}for(o=0,a=r.length;o<a;o++){const s=r[o],u=!!t[s];!s||s==="undefined"||n[s]===u||!u||(Cr(e,s,!0),n[s]=u)}return n}function Ao(e,t,n){if(!t)return n?Fe(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function So(e,t={},n,r){const i={};return r||U(()=>i.children=Qe(e,t.children,i.children)),U(()=>t.ref&&t.ref(e)),U(()=>Co(e,t,n,!0,i,!0)),i}function $(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Qe(e,t,r,n);U(i=>Qe(e,t(),i,n),r)}function Co(e,t,n,r,i={},o=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=kr(e,a,null,i[a],n,o)}for(const a in t){if(a==="children"){r||Qe(e,t.children);continue}const s=t[a];i[a]=kr(e,a,s,i[a],n,o)}}function ko(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Cr(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function kr(e,t,n,r,i,o){let a,s,u;if(t==="style")return Ao(e,n,r);if(t==="classList")return Eo(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const l=t.slice(3);r&&e.removeEventListener(l,r),n&&e.addEventListener(l,n)}else if(t.slice(0,10)==="oncapture:"){const l=t.slice(10);r&&e.removeEventListener(l,r,!0),n&&e.addEventListener(l,n,!0)}else if(t.slice(0,2)==="on"){const l=t.slice(2).toLowerCase(),c=go.has(l);if(!c&&r){const f=Array.isArray(r)?r[0]:r;e.removeEventListener(l,f)}(c||n)&&(xo(e,l,n,c),c&&_t([l]))}else if((u=vo.has(t))||!i&&(Ar[t]||(s=po.has(t)))||(a=e.nodeName.includes("-")))t==="class"||t==="className"?Je(e,n):a&&!s&&!u?e[ko(t)]=n:e[Ar[t]||t]=n;else{const l=i&&t.indexOf(":")>-1&&mo[t.split(":")[0]];l?_o(e,l,t,n):Fe(e,yo[t]||t,n)}return n}function Po(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),Z.registry&&!Z.done&&(Z.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>r.remove()));n!==null;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function Qe(e,t,n,r,i){for(Z.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(Z.context)return n;if(o==="number"&&(t=t.toString()),a){let s=n[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),n=Ve(e,n,r,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(Z.context)return n;n=Ve(e,n,r)}else{if(o==="function")return U(()=>{let s=t();for(;typeof s=="function";)s=s();n=Qe(e,s,n,r)}),()=>n;if(Array.isArray(t)){const s=[],u=n&&Array.isArray(n);if(Cn(s,t,n,i))return U(()=>n=Qe(e,s,n,r,!0)),()=>n;if(Z.context){if(!s.length)return n;for(let l=0;l<s.length;l++)if(s[l].parentNode)return n=s}if(s.length===0){if(n=Ve(e,n,r),a)return n}else u?n.length===0?Pr(e,s,r):bo(e,n,s):(n&&Ve(e),Pr(e,s));n=s}else if(t instanceof Node){if(Z.context&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=Ve(e,n,r,t);Ve(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Cn(e,t,n,r){let i=!1;for(let o=0,a=t.length;o<a;o++){let s=t[o],u=n&&n[o];if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))i=Cn(e,s,u)||i;else if(typeof s=="function")if(r){for(;typeof s=="function";)s=s();i=Cn(e,Array.isArray(s)?s:[s],Array.isArray(u)?u:[u])||i}else e.push(s),i=!0;else{const l=String(s);u&&u.nodeType===3&&u.data===l?e.push(u):e.push(document.createTextNode(l))}}return i}function Pr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Ve(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const s=t[a];if(i!==s){const u=s.parentNode===e;!o&&!a?u?e.replaceChild(i,s):e.insertBefore(i,n):u&&s.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}function ri(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Ro([e,t],n,r){return[n?()=>n(e()):e,r?i=>t(r(i)):t]}function To(e){try{return document.querySelector(e)}catch{return null}}function ii(e,t){const n=To(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function oi(e,t,n,r){let i=!1;const o=s=>typeof s=="string"?{value:s}:s,a=Ro(te(o(e()),{equals:(s,u)=>s.value===u.value}),void 0,s=>(!i&&t(s),s));return n&&Zn(n((s=e())=>{i=!0,a[1](o(s)),i=!1})),{signal:a,utils:r}}function Ko(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:te({value:""})};return e}function Io(){return oi(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"",e):window.history.pushState(r,"",e),ii(window.location.hash.slice(1),n)},e=>ri(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}function Do(){return oi(()=>window.location.hash.slice(1),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"","#"+e):window.location.hash=e;const i=e.indexOf("#"),o=i>=0?e.slice(i+1):"";ii(o,n)},e=>ri(window,"hashchange",()=>e()),{go:e=>window.history.go(e),renderPath:e=>`#${e}`,parsePath:e=>{const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}})}const $o=/^(?:[a-z0-9]+:)?\/\//i,Oo=/^\/+|\/+$/g;function ut(e,t=!1){const n=e.replace(Oo,"");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Bt(e,t,n){if($o.test(t))return;const r=ut(e),i=n&&ut(n);let o="";return!i||t.startsWith("/")?o=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+i:o=i,(o||"/")+ut(t,!o)}function Bo(e,t){if(e==null)throw new Error(t);return e}function ai(e,t){return ut(e).replace(/\/*(\*.*)?$/g,"")+ut(t)}function Mo(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function qe(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function No(e,t){const[n,r]=e.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const s=a.split("/").filter(Boolean),u=s.length-o;if(u<0||u>0&&r===void 0&&!t)return null;const l={path:o?"":"/",params:{}};for(let c=0;c<o;c++){const f=i[c],h=s[c];if(f[0]===":")l.params[f.slice(1)]=h;else if(f.localeCompare(h,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${h}`}return r&&(l.params[r]=u?s.slice(-u).join("/"):""),l}}function Lo(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,o)=>i+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function si(e){const t=new Map,n=to();return new Proxy({},{get(r,i){return t.has(i)||no(n,()=>t.set(i,j(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function ui(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return ui(r).reduce((o,a)=>[...o,...i.map(s=>s+a)],[])}const Fo=100,li=qr(),on=qr(),xt=()=>Bo(er(li),"Make sure your app is wrapped in a <Router />");let ht;const an=()=>ht||er(on)||xt().base,jo=e=>{const t=an();return j(()=>t.resolvePath(e()))},zo=e=>{const t=xt();return j(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},rr=()=>xt().navigatorFactory(),ci=()=>xt().location,fi=()=>an().params;function Vo(e,t="",n){const{component:r,data:i,children:o}=e,a=!o||Array.isArray(o)&&!o.length,s={key:e,element:r?()=>S(r,{}):()=>{const{element:u}=e;return u===void 0&&n?S(n,{}):u},preload:e.component?r.preload:e.preload,data:i};return hi(e.path).reduce((u,l)=>{for(const c of ui(l)){const f=ai(t,c),h=a?f:f.split("/*",1)[0];u.push({...s,originalPath:c,pattern:h,matcher:No(h,!a)})}return u},[])}function Ho(e,t=0){return{routes:e,score:Lo(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const o=e[i],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function hi(e){return Array.isArray(e)?e:[e]}function di(e,t="",n,r=[],i=[]){const o=hi(e);for(let a=0,s=o.length;a<s;a++){const u=o[a];if(u&&typeof u=="object"&&u.hasOwnProperty("path")){const l=Vo(u,t,n);for(const c of l){if(r.push(c),u.children)di(u.children,c.pattern,n,r,i);else{const f=Ho([...r],i.length);i.push(f)}r.pop()}}}return r.length?i:i.sort((a,s)=>s.score-a.score)}function Uo(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Wo(e,t){const n=new URL("http://sar"),r=j(u=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),u}},n,{equals:(u,l)=>u.href===l.href}),i=j(()=>qe(r().pathname)),o=j(()=>qe(r().search,!0)),a=j(()=>qe(r().hash)),s=j(()=>"");return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return s()},query:si(Wr(o,()=>Mo(r())))}}function qo(e,t="",n,r){const{signal:[i,o],utils:a={}}=Ko(e),s=a.parsePath||(_=>_),u=a.renderPath||(_=>_),l=Bt("",t),c=void 0;if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!i().value&&o({value:l,replace:!0,scroll:!1});const[f,h]=te(!1),y=async _=>{h(!0);try{await ro(_)}finally{h(!1)}},[d,p]=te(i().value),[b,x]=te(i().state),w=Wo(d,b),g=[],m={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(_){return Bt(l,_)}};if(n)try{ht=m,m.data=n({data:void 0,params:{},location:w,navigate:E(m)})}finally{ht=void 0}function v(_,A,P){le(()=>{if(typeof A=="number"){A&&(a.go?a.go(A):console.warn("Router integration does not support relative routing"));return}const{replace:D,resolve:O,scroll:H,state:K}={replace:!1,resolve:!0,scroll:!0,...P},q=O?_.resolvePath(A):Bt("",A);if(q===void 0)throw new Error(`Path '${A}' is not a routable path`);if(g.length>=Fo)throw new Error("Too many redirects");const Q=d();if(q!==Q||K!==b()){const re=g.push({value:Q,replace:D,scroll:H,state:b()});y(()=>{p(q),x(K)}).then(()=>{g.length===re&&R({value:q,state:K})})}})}function E(_){return _=_||er(on)||m,(A,P)=>v(_,A,P)}function R(_){const A=g[0];A&&((_.value!==A.value||_.state!==A.state)&&o({..._,replace:A.replace,scroll:A.scroll}),g.length=0)}U(()=>{const{value:_,state:A}=i();le(()=>{_!==d()&&y(()=>{p(_),x(A)})})});{let _=function(A){if(A.defaultPrevented||A.button!==0||A.metaKey||A.altKey||A.ctrlKey||A.shiftKey)return;const P=A.composedPath().find(re=>re instanceof Node&&re.nodeName.toUpperCase()==="A");if(!P||!P.hasAttribute("link"))return;const D=P.href;if(P.target||!D&&!P.hasAttribute("state"))return;const O=(P.getAttribute("rel")||"").split(/\s+/);if(P.hasAttribute("download")||O&&O.includes("external"))return;const H=new URL(D),K=qe(H.pathname);if(H.origin!==window.location.origin||l&&K&&!K.toLowerCase().startsWith(l.toLowerCase()))return;const q=s(K+qe(H.search,!0)+qe(H.hash)),Q=P.getAttribute("state");A.preventDefault(),v(m,q,{resolve:!1,replace:P.hasAttribute("replace"),scroll:!P.hasAttribute("noscroll"),state:Q&&JSON.parse(Q)})};var C=_;_t(["click"]),document.addEventListener("click",_),Zn(()=>document.removeEventListener("click",_))}return{base:m,out:c,location:w,isRouting:f,renderPath:u,parsePath:s,navigatorFactory:E}}function Yo(e,t,n,r){const{base:i,location:o,navigatorFactory:a}=e,{pattern:s,element:u,preload:l,data:c}=r().route,f=j(()=>r().path),h=si(()=>r().params);l&&l();const y={parent:t,pattern:s,get child(){return n()},path:f,params:h,data:t.data,outlet:u,resolvePath(d){return Bt(i.path(),d,f())}};if(c)try{ht=y,y.data=c({data:t.data,params:h,location:o,navigate:a(y)})}finally{ht=void 0}return y}const Qo=M("<a link></a>"),Xo=e=>{const{source:t,url:n,base:r,data:i,out:o}=e,a=t||Io(),s=qo(a,r,i);return S(li.Provider,{value:s,get children(){return e.children}})},Go=e=>{const t=xt(),n=an(),r=tr(()=>e.children),i=j(()=>di(r(),ai(n.pattern,e.base||""),Jo)),o=j(()=>Uo(i(),t.location.pathname));t.out&&t.out.matches.push(o().map(({route:l,path:c,params:f})=>({originalPath:l.originalPath,pattern:l.pattern,path:c,params:f})));const a=[];let s;const u=j(Wr(o,(l,c,f)=>{let h=c&&l.length===c.length;const y=[];for(let d=0,p=l.length;d<p;d++){const b=c&&c[d],x=l[d];f&&b&&x.route.key===b.route.key?y[d]=f[d]:(h=!1,a[d]&&a[d](),st(w=>{a[d]=w,y[d]=Yo(t,y[d-1]||n,()=>u()[d+1],()=>o()[d])}))}return a.splice(l.length).forEach(d=>d()),f&&h?f:(s=y[0],y)}));return S(ni,{get when(){return u()&&s},children:l=>S(on.Provider,{value:l,get children(){return l.outlet()}})})},he=e=>{const t=tr(()=>e.children);return Sn(e,{get children(){return t()}})},Jo=()=>{const e=an();return S(ni,{get when(){return e.child},children:t=>S(on.Provider,{value:t,get children(){return t.outlet()}})})};function ir(e){e=Sn({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=fo(e,["href","state","activeClass","inactiveClass","end"]),n=jo(()=>e.href),r=zo(n),i=ci(),o=j(()=>{const a=n();if(a===void 0)return!1;const s=a.split(/[?#]/,1)[0].toLowerCase(),u=i.pathname.toLowerCase();return e.end?s===u:u.startsWith(s)});return(()=>{const a=Qo.cloneNode(!0);return So(a,Sn(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{[e.inactiveClass]:!o(),[e.activeClass]:o(),...t.classList}},get["aria-current"](){return o()?"page":void 0}}),!1,!1),a})()}function Zo(e){const t=rr(),n=ci(),{href:r,state:i}=e,o=typeof r=="function"?r({navigate:t,location:n}):r;return t(o,{replace:!0,state:i}),null}const ea=M("<h1></h1>"),sn=e=>(()=>{const t=ea.cloneNode(!0);return $(t,()=>e.children),U(()=>{var n;return Je(t,`${(n=e.class)!=null?n:""} font-bold text-3xl mb-10 mt-4`)}),t})(),ta=M('<nav class="w-full bg-stone-50 dark:bg-stone-700 sticky bottom-0 left-0 right-0"><div></div></nav>'),na=e=>(()=>{const t=ta.cloneNode(!0),n=t.firstChild;return $(n,()=>e.children),U(()=>{var r;return Je(n,`p-2 pb-4 grid justify-center gap-8 grid-flow-col ${(r=e.class)!=null?r:""}`)}),t})(),ra=M('<div class="w-8"></div>'),ia=M("<div></div>"),or=e=>S(ir,{class:"font-extralight grid min-w-min align-items-center justify-items-center fill-stone-500 hover:fill-stone-300 text-stone-500 hover:text-stone-300",activeClass:"text-stone-300 fill-stone-300",get href(){return e.href},get children(){return[(()=>{const t=ra.cloneNode(!0);return $(t,()=>e.icon),t})(),(()=>{const t=ia.cloneNode(!0);return $(t,()=>e.label),t})()]}}),oa=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>'),aa=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>'),sa=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg>'),ua=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>'),la=M('<svg class="animate-spin h-5 w-5 text-stone-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),ca=e=>(()=>{const t=oa.cloneNode(!0);return U(()=>Fe(t,"class",e.class)),t})(),un=e=>(()=>{const t=aa.cloneNode(!0);return U(()=>Fe(t,"class",e.class)),t})(),fa=e=>(()=>{const t=sa.cloneNode(!0);return U(()=>Fe(t,"class",e.class)),t})(),ha=e=>(()=>{const t=ua.cloneNode(!0);return U(()=>Fe(t,"class",e.class)),t})(),da=()=>la.cloneNode(!0),pa=M('<label class="w-full block relative"><span class="sr-only"></span><span class="absolute inset-y-0 left-0 flex items-center pl-2"></span><input class="font-extralight rounded block px-9 py-2 w-full placeholder-stone-500 border-stone-800 text-stone-400 bg-stone-800 shadow shadow-lg focus:outline-none focus:border-stone-400 focus:ring-stone-400 focus:ring-1" type="text"></label>'),va=M('<span class="absolute inset-y-0 right-0 flex items-center pr-2"></span>'),ya=e=>(()=>{const t=pa.cloneNode(!0),n=t.firstChild,r=n.nextSibling,i=r.nextSibling;return $(n,()=>{var o;return(o=e.placeholder)!=null?o:"Suche"}),$(r,S(ca,{class:"h-5 w-5 fill-stone-300"})),i.$$input=o=>e.setQuery(o.currentTarget.value),$(t,(()=>{const o=j(()=>e.query.length>0);return()=>o()&&(()=>{const a=va.cloneNode(!0);return a.$$click=()=>e.setQuery(""),$(a,S(ha,{class:"h-5 w-5 fill-stone-300"})),a})()})(),null),U(()=>Fe(i,"placeholder",e.placeholder)),U(()=>i.value=e.query),t})();_t(["input","click"]);const pi=M("<div></div>"),ln=e=>(()=>{const t=pi.cloneNode(!0);return $(t,()=>e.children),U(()=>{var n;return Je(t,`min-h-screen ${(n=e==null?void 0:e.class)!=null?n:""}`)}),t})(),ga=e=>(()=>{const t=pi.cloneNode(!0);return $(t,()=>e.children),U(n=>{var o;const r=e.open?"block":"none",i=`${(o=e.class)!=null?o:""} transition transition-opacity ${e.open?"opacity-100":"opacity-0"} shadow bg-stone-700 text-stone-400 font-normal fixed top-5 right-5 p-5 rounded`;return r!==n._v$&&t.style.setProperty("display",n._v$=r),i!==n._v$2&&Je(t,n._v$2=i),n},{_v$:void 0,_v$2:void 0}),t})(),ma=M('<button type="button"><span class="fill-stone-400 h-5 w-5"></span></button>'),Ze=e=>{const[t,n]=te(!1),[r,i]=te(!1);return[j((()=>{const o=j(()=>!!e.message);return()=>o()&&S(ga,{get open(){return r()},get children(){return e.message}})})()),(()=>{const o=ma.cloneNode(!0),a=o.firstChild;return o.$$click=()=>{i(!1),n(!0),e.onClick().then(()=>{i(!0)}).finally(()=>{n(!1),setTimeout(()=>{i(!1)},2500)})},$(a,(()=>{const s=j(()=>!!t());return()=>s()?S(da,{}):e.icon})()),$(o,()=>e.label,null),U(s=>{var c;const u=`p-3 pl-0 grid font-normal text-stone-400 gap-2 grid-flow-col content-center items-center ${(c=e.class)!=null?c:""}`,l=e.disabled||t();return u!==s._v$&&Je(o,s._v$=u),l!==s._v$2&&(o.disabled=s._v$2=l),s},{_v$:void 0,_v$2:void 0}),o})()]};_t(["click"]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B=function(){return B=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},B.apply(this,arguments)};function kn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var F=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,W=Object.keys,G=Array.isArray;typeof Promise<"u"&&!F.Promise&&(F.Promise=Promise);function ne(e,t){return typeof t!="object"||W(t).forEach(function(n){e[n]=t[n]}),e}var dt=Object.getPrototypeOf,ba={}.hasOwnProperty;function oe(e,t){return ba.call(e,t)}function Xe(e,t){typeof t=="function"&&(t=t(dt(e))),(typeof Reflect>"u"?W:Reflect.ownKeys)(t).forEach(function(n){Ee(e,n,t[n])})}var vi=Object.defineProperty;function Ee(e,t,n,r){vi(e,t,ne(n&&oe(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function et(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Ee(e.prototype,"constructor",e),{extend:Xe.bind(null,e.prototype)}}}}var wa=Object.getOwnPropertyDescriptor;function ar(e,t){var n=wa(e,t),r;return n||(r=dt(e))&&ar(r,t)}var _a=[].slice;function cn(e,t,n){return _a.call(e,t,n)}function yi(e,t){return t(e)}function ot(e){if(!e)throw new Error("Assertion Failed")}function gi(e){F.setImmediate?setImmediate(e):setTimeout(e,0)}function mi(e,t){return e.reduce(function(n,r,i){var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function xa(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function _e(e,t){if(oe(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=_e(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(a!==-1){var s=e[t.substr(0,a)];return s===void 0?void 0:_e(s,t.substr(a+1))}}function ue(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ot(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)ue(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),s=t.substr(o+1);if(s==="")n===void 0?G(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];(!u||!oe(e,a))&&(u=e[a]={}),ue(u,s,n)}}else n===void 0?G(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Ea(e,t){typeof t=="string"?ue(e,t,void 0):"length"in t&&[].map.call(t,function(n){ue(e,n,void 0)})}function bi(e){var t={};for(var n in e)oe(e,n)&&(t[n]=e[n]);return t}var Aa=[].concat;function wi(e){return Aa.apply([],e)}var _i="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(wi([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return F[e]}),Sa=_i.map(function(e){return F[e]});mi(_i,function(e){return[e,!0]});var Pe=null;function Et(e){Pe=typeof WeakMap<"u"&&new WeakMap;var t=Pn(e);return Pe=null,t}function Pn(e){if(!e||typeof e!="object")return e;var t=Pe&&Pe.get(e);if(t)return t;if(G(e)){t=[],Pe&&Pe.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Pn(e[n]))}else if(Sa.indexOf(e.constructor)>=0)t=e;else{var i=dt(e);t=i===Object.prototype?{}:Object.create(i),Pe&&Pe.set(e,t);for(var o in e)oe(e,o)&&(t[o]=Pn(e[o]))}return t}var Ca={}.toString;function Rn(e){return Ca.call(e).slice(8,-1)}var Tn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ka=typeof Tn=="symbol"?function(e){var t;return e!=null&&(t=e[Tn])&&t.apply(e)}:function(){return null},We={};function me(e){var t,n,r,i;if(arguments.length===1){if(G(e))return e.slice();if(this===We&&typeof e=="string")return[e];if(i=ka(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var sr=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ve=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xi(e,t){ve=e,Ei=t}var Ei=function(){return!0},Pa=!new Error("").stack;function je(){if(Pa)try{throw je.arguments,new Error}catch(e){return e}return new Error}function Kn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Ei).map(function(r){return`
`+r}).join("")):""}var Ra=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ai=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ur=Ra.concat(Ai),Ta={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function tt(e,t){this._e=je(),this.name=e,this.message=t}et(tt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Kn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Si(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Yt(e,t,n,r){this._e=je(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Si(e,t)}et(Yt).from(tt);function lt(e,t){this._e=je(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Si(e,t)}et(lt).from(tt);var lr=ur.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ka=tt,I=ur.reduce(function(e,t){var n=t+"Error";function r(i,o){this._e=je(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Ta[t]||n,this.inner=null)}return et(r).from(Ka),e[t]=r,e},{});I.Syntax=SyntaxError;I.Type=TypeError;I.Range=RangeError;var Rr=Ai.reduce(function(e,t){return e[t+"Error"]=I[t],e},{});function Ia(e,t){if(!e||e instanceof tt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Rr[e.name])return e;var n=new Rr[e.name](t||e.message,e);return"stack"in e&&Ee(n,"stack",{get:function(){return this.inner.stack}}),n}var fn=ur.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=I[t]),e},{});fn.ModifyError=Yt;fn.DexieError=tt;fn.BulkError=lt;function N(){}function At(e){return e}function Da(e,t){return e==null||e===At?t:function(n){return t(e(n))}}function Ne(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function $a(e,t){return e===N?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ne(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ne(i,this.onerror):i),o!==void 0?o:n}}function Oa(e,t){return e===N?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ne(r,this.onerror):r)}}function Ba(e,t){return e===N?t:function(n){var r=e.apply(this,arguments);ne(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ne(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Ne(o,this.onerror):o),r===void 0?a===void 0?void 0:a:ne(r,a)}}function Ma(e,t){return e===N?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function cr(e,t){return e===N?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var pt={},Na=100,La=20,Ci=100,fr=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,dt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,dt(t),e]}(),In=fr[0],Qt=fr[1],Dn=fr[2],ki=Qt&&Qt.then,Mt=In&&In.constructor,hr=!!Dn,$n=!1,Fa=Dn?function(){Dn.then(Kt)}:F.setImmediate?setImmediate.bind(null,Kt):F.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Kt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Kt,0)},vt=function(e,t){at.push([e,t]),Xt&&(Fa(),Xt=!1)},On=!0,Xt=!0,Be=[],Nt=[],Bn=null,Mn=At,Ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ir,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Ir(e[0],e[1])}catch{}})}},T=Ye,at=[],Me=0,Lt=[];function k(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=N,this._lib=!1;var t=this._PSD=T;if(ve&&(this._stackHolder=je(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==pt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ln(this,this._value);return}this._state=null,this._value=null,++t.ref,Ri(this,e)}var Nn={get:function(){var e=T,t=Gt;function n(r,i){var o=this,a=!e.global&&(e!==T||t!==Gt),s=a&&!Ae(),u=new k(function(l,c){dr(o,new Pi(Zt(r,e,a,s),Zt(i,e,a,s),l,c,e))});return ve&&Ii(u,this),u}return n.prototype=pt,n},set:function(e){Ee(this,"then",e&&e.prototype===pt?Nn:{get:function(){return e},set:Nn.set})}};Xe(k.prototype,{then:Nn,_then:function(e,t){dr(this,new Pi(null,null,e,t,T))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Ft(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Ft(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Ft(t)})},stack:{get:function(){if(this._stack)return this._stack;try{$n=!0;var e=Ki(this,[],La),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{$n=!1}}},timeout:function(e,t){var n=this;return e<1/0?new k(function(r,i){var o=setTimeout(function(){return i(new I.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&Ee(k.prototype,Symbol.toStringTag,"Dexie.Promise");Ye.env=Di();function Pi(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Xe(k,{all:function(){var e=me.apply(null,arguments).map(Jt);return new k(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,o){return k.resolve(i).then(function(a){e[o]=a,--r||t(e)},n)})})},resolve:function(e){if(e instanceof k)return e;if(e&&typeof e.then=="function")return new k(function(n,r){e.then(n,r)});var t=new k(pt,!0,e);return Ii(t,Bn),t},reject:Ft,race:function(){var e=me.apply(null,arguments).map(Jt);return new k(function(t,n){e.map(function(r){return k.resolve(r).then(t,n)})})},PSD:{get:function(){return T},set:function(e){return T=e}},totalEchoes:{get:function(){return Gt}},newPSD:Te,usePSD:rt,scheduler:{get:function(){return vt},set:function(e){vt=e}},rejectionMapper:{get:function(){return Mn},set:function(e){Mn=e}},follow:function(e,t){return new k(function(n,r){return Te(function(i,o){var a=T;a.unhandleds=[],a.onunhandled=o,a.finalize=Ne(function(){var s=this;za(function(){s.unhandleds.length===0?i():o(s.unhandleds[0])})},a.finalize),e()},t,n,r)})}});Mt&&(Mt.allSettled&&Ee(k,"allSettled",function(){var e=me.apply(null,arguments).map(Jt);return new k(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,o){return k.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||t(r)})})})}),Mt.any&&typeof AggregateError<"u"&&Ee(k,"any",function(){var e=me.apply(null,arguments).map(Jt);return new k(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(o,a){return k.resolve(o).then(function(s){return t(s)},function(s){i[a]=s,--r||n(new AggregateError(i))})})})}));function Ri(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&St();n&&typeof n.then=="function"?Ri(e,function(i,o){n instanceof k?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,Ti(e)),r&&Ct()}},Ln.bind(null,e))}catch(n){Ln(e,n)}}function Ln(e,t){if(Nt.push(t),e._state===null){var n=e._lib&&St();t=Mn(t),e._state=!1,e._value=t,ve&&t!==null&&typeof t=="object"&&!t._promise&&xa(function(){var r=ar(t,"stack");t._promise=e,Ee(t,"stack",{get:function(){return $n?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),Va(e),Ti(e),n&&Ct()}}function Ti(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)dr(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Me===0&&(++Me,vt(function(){--Me===0&&pr()},[]))}function dr(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Me,vt(ja,[n,e,t])}function ja(e,t,n){try{Bn=t;var r,i=t._value;t._state?r=e(i):(Nt.length&&(Nt=[]),r=e(i),Nt.indexOf(i)===-1&&Ha(t)),n.resolve(r)}catch(o){n.reject(o)}finally{Bn=null,--Me===0&&pr(),--n.psd.ref||n.psd.finalize()}}function Ki(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=Kn(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return ve&&(r=Kn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Ki(e._prev,t,n)),t}function Ii(e,t){var n=t?t._numPrev+1:0;n<Na&&(e._prev=t,e._numPrev=n)}function Kt(){St()&&Ct()}function St(){var e=On;return On=!1,Xt=!1,e}function Ct(){var e,t,n;do for(;at.length>0;)for(e=at,at=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(at.length>0);On=!0,Xt=!0}function pr(){var e=Be;Be=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Lt.slice(0),n=t.length;n;)t[--n]()}function za(e){function t(){e(),Lt.splice(Lt.indexOf(t),1)}Lt.push(t),++Me,vt(function(){--Me===0&&pr()},[])}function Va(e){Be.some(function(t){return t._value===e._value})||Be.push(e)}function Ha(e){for(var t=Be.length;t;)if(Be[--t]._value===e._value){Be.splice(t,1);return}}function Ft(e){return new k(pt,!1,e)}function V(e,t){var n=T;return function(){var r=St(),i=T;try{return Ke(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Ke(i,!1),r&&Ct()}}}var X={awaits:0,echoes:0,id:0},Ua=0,jt=[],gn=0,Gt=0,Wa=0;function Te(e,t,n,r){var i=T,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Wa;var a=Ye.env;o.env=hr?{Promise:k,PromiseProp:{value:k,configurable:!0,writable:!0},all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject,nthen:Tr(a.nthen,o),gthen:Tr(a.gthen,o)}:{},t&&ne(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=rt(o,e,n,r);return o.ref===0&&o.finalize(),s}function nt(){return X.id||(X.id=++Ua),++X.awaits,X.echoes+=Ci,X.id}function Ae(){return X.awaits?(--X.awaits===0&&(X.id=0),X.echoes=X.awaits*Ci,!0):!1}(""+ki).indexOf("[native code]")===-1&&(nt=Ae=N);function Jt(e){return X.echoes&&e&&e.constructor===Mt?(nt(),e.then(function(t){return Ae(),t},function(t){return Ae(),Y(t)})):e}function qa(e){++Gt,(!X.echoes||--X.echoes===0)&&(X.echoes=X.id=0),jt.push(T),Ke(e,!0)}function Ya(){var e=jt[jt.length-1];jt.pop(),Ke(e,!1)}function Ke(e,t){var n=T;if((t?X.echoes&&(!gn++||e!==T):gn&&(!--gn||e!==T))&&$i(t?qa.bind(null,e):Ya),e!==T&&(T=e,n===Ye&&(Ye.env=Di()),hr)){var r=Ye.env.Promise,i=e.env;Qt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(F,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Di(){var e=F.Promise;return hr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(F,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Qt.then,gthen:e.prototype.then}:{}}function rt(e,t,n,r,i){var o=T;try{return Ke(e,!0),t(n,r,i)}finally{Ke(o,!1)}}function $i(e){ki.call(In,e)}function Zt(e,t,n,r){return typeof e!="function"?e:function(){var i=T;n&&nt(),Ke(t,!0);try{return e.apply(this,arguments)}finally{Ke(i,!1),r&&$i(Ae)}}}function Tr(e,t){return function(n,r){return e.call(this,Zt(n,t),Zt(r,t))}}var Kr="unhandledrejection";function Ir(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(F.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Kr,!0,!0),ne(r,i)):F.CustomEvent&&(r=new CustomEvent(Kr,{detail:i}),ne(r,i)),r&&F.dispatchEvent&&(dispatchEvent(r),!F.PromiseRejectionEvent&&F.onunhandledrejection))try{F.onunhandledrejection(r)}catch{}ve&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var Y=k.reject;function Fn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!T.letThrough&&!e._vip){if(e._state.openComplete)return Y(new I.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Y(new I.DatabaseClosed);e.open().catch(N)}return e._state.dbReadyPromise.then(function(){return Fn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===lr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Fn(e,t,n,r)})):Y(o)}return i._promise(t,function(o,a){return Te(function(){return T.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var Dr="3.2.2",$e=String.fromCharCode(65535),jn=-1/0,ye="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Oi="String expected.",ct=[],hn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Qa=hn,Xa=hn,Bi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},dn="__dbnames",mn="readonly",bn="readwrite";function Le(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Mi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function It(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=Et(t),delete t[e]),t}:function(t){return t}}var Ga=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||T.trans,o=this.name;function a(u,l,c){if(!c.schema[o])throw new I.NotFound("Table "+o+" not part of transaction");return n(c.idbtrans,c)}var s=St();try{return i&&i.db===this.db?i===T.trans?i._promise(t,a,r):Te(function(){return i._promise(t,a,r)},{trans:i,transless:T.transless||T}):Fn(this.db,t,[this.name],a)}finally{s&&Ct()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(G(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=W(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(f){return c.keyPath.indexOf(f)>=0})&&c.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==$e)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&ve&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(c,f){try{return o.cmp(c,f)===0}catch{return!1}}var s=n.reduce(function(c,f){var h=c[0],y=c[1],d=i[f],p=t[f];return[h||d,h||!d?Le(y,d&&d.multi?function(b){var x=_e(b,f);return G(x)&&x.some(function(w){return a(p,w)})}:function(b){return a(p,_e(b,f))}):y]},[null,null]),u=s[0],l=s[1];return u?this.where(u.name).equals(t[u.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,G(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var o in r)if(oe(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){ne(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=It(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(u){return u.numFailures?k.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{ue(t,a,u)}catch{}return u})},e.prototype.update=function(t,n){if(typeof t=="object"&&!G(t)){var r=_e(t,this.schema.primKey.keyPath);if(r===void 0)return Y(new I.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?W(n).forEach(function(i){ue(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=It(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?k.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{ue(t,a,u)}catch{}return u})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?k.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Mi})}).then(function(n){return n.numFailures?k.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new I.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new I.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(It(c)):t;return i.core.mutate({trans:s,type:"add",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,b=y.lastResult,x=y.failures,w=a?p:b;if(d===0)return w;throw new lt(i.name+".bulkAdd(): "+d+" of "+f+" operations failed",x)})})},e.prototype.bulkPut=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new I.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new I.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(It(c)):t;return i.core.mutate({trans:s,type:"put",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,b=y.lastResult,x=y.failures,w=a?p:b;if(d===0)return w;throw new lt(i.name+".bulkPut(): "+d+" of "+f+" operations failed",x)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var o=i.numFailures,a=i.lastResult,s=i.failures;if(o===0)return a;throw new lt(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",s)})},e}();function kt(e){var t={},n=function(s,u){if(u){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[s].subscribe.apply(null,c),e}else if(typeof s=="string")return t[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,u,l){if(typeof s=="object")return a(s);u||(u=Ma),l||(l=N);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=u(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(h){return h!==f}),c.fire=c.subscribers.reduce(u,l)}};return t[s]=n[s]=c,c}function a(s){W(s).forEach(function(u){var l=s[u];if(G(l))o(u,s[u][0],s[u][1]);else if(l==="asap")var c=o(u,At,function(){for(var h=arguments.length,y=new Array(h);h--;)y[h]=arguments[h];c.subscribers.forEach(function(d){gi(function(){d.apply(null,y)})})});else throw new I.InvalidArgument("Invalid event config")})}}function Pt(e,t){return et(t).from({prototype:e}),t}function Ja(e){return Pt(Ga.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:kt(null,{creating:[$a,N],reading:[Da,At],updating:[Ba,N],deleting:[Oa,N]})})}function He(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function wn(e,t){e.filter=Le(e.filter,t)}function _n(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Le(r(),t())}:t,e.justLimit=n&&!r}function Za(e,t){e.isMatch=Le(e.isMatch,t)}function zt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new I.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function $r(e,t,n){var r=zt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Dt(e,t,n,r){var i=e.replayFilter?Le(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(s,u,l){if(!i||i(u,l,function(h){return u.stop(h)},function(h){return u.fail(h)})){var c=u.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),oe(o,f)||(o[f]=!0,t(s,u,l))}};return Promise.all([e.or._iterate(a,n),Or($r(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return Or($r(e,r,n),Le(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Or(e,t,n,r){var i=r?function(a,s,u){return n(r(a),s,u)}:n,o=V(i);return e.then(function(a){if(a)return a.start(function(){var s=function(){return a.continue()};(!t||t(a,function(u){return s=u},function(u){a.stop(u),s=N},function(u){a.fail(u),s=N}))&&o(a.value,a,function(u){return s=u}),s()})})}function ee(e,t){try{var n=Br(e),r=Br(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return ts(Mr(e),Mr(t));case"Array":return es(e,t)}}catch{}return NaN}function es(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=ee(e[o],t[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function ts(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function Br(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Rn(e);return n==="ArrayBuffer"?"binary":n}function Mr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ns=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,Y.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,Y.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Le(n.algorithm,t)},e.prototype._iterate=function(t,n){return Dt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&ne(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Dt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(He(i,!0))return o.count({trans:r,query:{index:zt(i,o.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var a=0;return Dt(i,function(){return++a,!1},r,o).then(function(){return a})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],o=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var s=this._ctx.dir==="next"?1:-1;function u(l,c){var f=a(l,o),h=a(c,o);return f<h?-s:f>h?s:0}return this.toArray(function(l){return l.sort(u)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&He(i,!0)&&i.limit>0){var o=i.valueMapper,a=zt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(u){var l=u.result;return o?l.map(o):l})}else{var s=[];return Dt(i,function(u){return s.push(u)},r,i.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,He(n)?_n(n,function(){var r=t;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):_n(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),_n(this._ctx,function(){var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},e.prototype.until=function(t,n){return wn(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return wn(this._ctx,function(n){return t(n.value)}),Za(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&He(n,!0)&&n.limit>0)return this._read(function(i){var o=zt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return wn(this._ctx,function(i){var o=i.primaryKey.toString(),a=oe(r,o);return r[o]=!0,!a}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof t=="function")o=t;else{var a=W(t),s=a.length;o=function(x){for(var w=!1,g=0;g<s;++g){var m=a[g],v=t[m];_e(x,m)!==v&&(ue(x,m,v),w=!0)}return w}}var u=r.table.core,l=u.schema.primaryKey,c=l.outbound,f=l.extractKey,h=n.db._options.modifyChunkSize||200,y=[],d=0,p=[],b=function(x,w){var g=w.failures,m=w.numFailures;d+=x-m;for(var v=0,E=W(g);v<E.length;v++){var R=E[v];y.push(g[R])}};return n.clone().primaryKeys().then(function(x){var w=function(g){var m=Math.min(h,x.length-g);return u.getMany({trans:i,keys:x.slice(g,g+m),cache:"immutable"}).then(function(v){for(var E=[],R=[],C=c?[]:null,_=[],A=0;A<m;++A){var P=v[A],D={value:Et(P),primKey:x[g+A]};o.call(D,D.value,D)!==!1&&(D.value==null?_.push(x[g+A]):!c&&ee(f(P),f(D.value))!==0?(_.push(x[g+A]),E.push(D.value)):(R.push(D.value),c&&C.push(x[g+A])))}var O=He(r)&&r.limit===1/0&&(typeof t!="function"||t===xn)&&{index:r.index,range:r.range};return Promise.resolve(E.length>0&&u.mutate({trans:i,type:"add",values:E}).then(function(H){for(var K in H.failures)_.splice(parseInt(K),1);b(E.length,H)})).then(function(){return(R.length>0||O&&typeof t=="object")&&u.mutate({trans:i,type:"put",keys:C,values:R,criteria:O,changeSpec:typeof t!="function"&&t}).then(function(H){return b(R.length,H)})}).then(function(){return(_.length>0||O&&t===xn)&&u.mutate({trans:i,type:"delete",keys:_,criteria:O}).then(function(H){return b(_.length,H)})}).then(function(){return x.length>g+m&&w(g+h)})})};return w(0).then(function(){if(y.length>0)throw new Yt("Error modifying one or more objects",y,d,p);return x.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return He(t)&&(t.isPrimKey&&!Xa||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(s){var u=s.failures;s.lastResult,s.results;var l=s.numFailures;if(l)throw new Yt("Could not delete some values",Object.keys(u).map(function(c){return u[c]}),a-l);return a-l})})}):this.modify(xn)},e}(),xn=function(e,t){return t.value=null};function rs(e){return Pt(ns.prototype,function(n,r){this.db=e;var i=Mi,o=null;if(r)try{i=r()}catch(l){o=l}var a=n._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:u!==At?u:null}})}function is(e,t){return e<t?-1:e===t?0:1}function os(e,t){return e>t?-1:e===t?0:1}function ie(e,t,n){var r=e instanceof Li?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Ue(e){return new e.Collection(e,function(){return Ni("")}).limit(0)}function as(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function ss(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function us(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var l=t[u];if(l!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],l)<0&&(s=u)}return a<r.length&&o==="next"?e+n.substr(e.length):a<e.length&&o==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function $t(e,t,n,r){var i,o,a,s,u,l,c,f=n.length;if(!n.every(function(p){return typeof p=="string"}))return ie(e,Oi);function h(p){i=as(p),o=ss(p),a=p==="next"?is:os;var b=n.map(function(x){return{lower:o(x),upper:i(x)}}).sort(function(x,w){return a(x.lower,w.lower)});s=b.map(function(x){return x.upper}),u=b.map(function(x){return x.lower}),l=p,c=p==="next"?"":r}h("next");var y=new e.Collection(e,function(){return ke(s[0],u[f-1]+r)});y._ondirectionchange=function(p){h(p)};var d=0;return y._addAlgorithm(function(p,b,x){var w=p.key;if(typeof w!="string")return!1;var g=o(w);if(t(g,u,d))return!0;for(var m=null,v=d;v<f;++v){var E=us(w,g,s[v],u[v],a,l);E===null&&m===null?d=v+1:(m===null||a(m,E)>0)&&(m=E)}return b(m!==null?function(){p.continue(m+c)}:x),!1}),y}function ke(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ni(e){return{type:1,lower:e,upper:e}}var Li=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Ue(this):new this.Collection(this,function(){return ke(t,n,!r,!i)})}catch{return ie(this,ye)}},e.prototype.equals=function(t){return t==null?ie(this,ye):new this.Collection(this,function(){return Ni(t)})},e.prototype.above=function(t){return t==null?ie(this,ye):new this.Collection(this,function(){return ke(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?ie(this,ye):new this.Collection(this,function(){return ke(t,void 0,!1)})},e.prototype.below=function(t){return t==null?ie(this,ye):new this.Collection(this,function(){return ke(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?ie(this,ye):new this.Collection(this,function(){return ke(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?ie(this,Oi):this.between(t,t+$e,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):$t(this,function(n,r){return n.indexOf(r[0])===0},[t],$e)},e.prototype.equalsIgnoreCase=function(t){return $t(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=me.apply(We,arguments);return t.length===0?Ue(this):$t(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=me.apply(We,arguments);return t.length===0?Ue(this):$t(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,$e)},e.prototype.anyOf=function(){var t=this,n=me.apply(We,arguments),r=this._cmp;try{n.sort(r)}catch{return ie(this,ye)}if(n.length===0)return Ue(this);var i=new this.Collection(this,function(){return ke(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?t._ascending:t._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,s,u){for(var l=a.key;r(l,n[o])>0;)if(++o,o===n.length)return s(u),!1;return r(l,n[o])===0?!0:(s(function(){a.continue(n[o])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[jn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=me.apply(We,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return ie(this,ye)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[jn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,s=this._min,u=this._max;if(t.length===0)return Ue(this);if(!t.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&o(v[0],v[1])<=0}))return ie(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",I.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(v,E){for(var R=0,C=v.length;R<C;++R){var _=v[R];if(i(E[0],_[1])<0&&i(E[1],_[0])>0){_[0]=s(_[0],E[0]),_[1]=u(_[1],E[1]);break}}return R===C&&v.push(E),v}var h=o;function y(v,E){return h(v[0],E[0])}var d;try{d=t.reduce(f,[]),d.sort(y)}catch{return ie(this,ye)}var p=0,b=c?function(v){return o(v,d[p][1])>0}:function(v){return o(v,d[p][1])>=0},x=l?function(v){return a(v,d[p][0])>0}:function(v){return a(v,d[p][0])>=0};function w(v){return!b(v)&&!x(v)}var g=b,m=new this.Collection(this,function(){return ke(d[0][0],d[d.length-1][1],!l,!c)});return m._ondirectionchange=function(v){v==="next"?(g=b,h=o):(g=x,h=a),d.sort(y)},m._addAlgorithm(function(v,E,R){for(var C=v.key;g(C);)if(++p,p===d.length)return E(R),!1;return w(C)?!0:(r._cmp(C,d[p][1])===0||r._cmp(C,d[p][0])===0||E(function(){h===o?v.continue(d[p][0]):v.continue(d[p][1])}),!1)}),m},e.prototype.startsWithAnyOf=function(){var t=me.apply(We,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Ue(this):this.inAnyRange(t.map(function(n){return[n,n+$e]})):ie(this,"startsWithAnyOf() only works with strings")},e}();function ls(e){return Pt(Li.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=e._deps.indexedDB;if(!o)throw new I.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,s){return o.cmp(s,a)},this._max=function(a,s){return o.cmp(a,s)>0?a:s},this._min=function(a,s){return o.cmp(a,s)<0?a:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function de(e){return V(function(t){return yt(t),e(t.target.error),!1})}function yt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var gt="storagemutated",Re="x-storagemutated-1",Ie=kt(null,gt),cs=function(){function e(){}return e.prototype._lock=function(){return ot(!T.global),++this._reculock,this._reculock===1&&!T.global&&(T.lockOwnerFor=this),this},e.prototype._unlock=function(){if(ot(!T.global),--this._reculock===0)for(T.global||(T.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{rt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&T.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(ot(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new I.DatabaseClosed(i);case"MissingAPIError":throw new I.MissingAPI(i.message,i);default:throw new I.OpenFailed(i)}if(!this.active)throw new I.TransactionInactive;return ot(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=V(function(o){yt(o),n._reject(t.error)}),t.onabort=V(function(o){yt(o),n.active&&n._reject(new I.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=V(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Ie.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return Y(new I.ReadOnly("Transaction is readonly"));if(!this.active)return Y(new I.TransactionInactive);if(this._locked())return new k(function(a,s){i._blockedFuncs.push([function(){i._promise(t,n,r).then(a,s)},T])});if(r)return Te(function(){var a=new k(function(s,u){i._lock();var l=n(s,u,i);l&&l.then&&l.then(s,u)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new k(function(a,s){var u=n(a,s,i);u&&u.then&&u.then(a,s)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=k.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new k(function(a,s){r.then(function(u){return n._waitingQueue.push(V(a.bind(null,u)))},function(u){return n._waitingQueue.push(V(s.bind(null,u)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new I.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(oe(n,t))return n[t];var r=this.schema[t];if(!r)throw new I.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function fs(e){return Pt(cs.prototype,function(n,r,i,o,a){var s=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=kt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new k(function(u,l){s._resolve=u,s._reject=l}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var l=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):l&&s.idbtrans&&s.idbtrans.abort(),Y(u)})})}function zn(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Fi(t)}}function Fi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function ji(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:mi(n,function(r){return[r.name,r]})}}function hs(e){return e.length===1?e[0]:e}var mt=function(e){try{return e.only([[]]),mt=function(){return[[]]},[[]]}catch{return mt=function(){return $e},$e}};function Vn(e){return e==null?function(){}:typeof e=="string"?ds(e):function(t){return _e(t,e)}}function ds(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return _e(n,e)}}function Nr(e){return[].slice.call(e)}var ps=0;function ft(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function vs(e,t,n){function r(f,h){var y=Nr(f.objectStoreNames);return{schema:{name:f.name,tables:y.map(function(d){return h.objectStore(d)}).map(function(d){var p=d.keyPath,b=d.autoIncrement,x=G(p),w=p==null,g={},m={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:x,keyPath:p,autoIncrement:b,unique:!0,extractKey:Vn(p)},indexes:Nr(d.indexNames).map(function(v){return d.index(v)}).map(function(v){var E=v.name,R=v.unique,C=v.multiEntry,_=v.keyPath,A=G(_),P={name:E,compound:A,keyPath:_,unique:R,multiEntry:C,extractKey:Vn(_)};return g[ft(_)]=P,P}),getIndexByKeyPath:function(v){return g[ft(v)]}};return g[":id"]=m.primaryKey,p!=null&&(g[ft(p)]=m.primaryKey),m})},hasGetAll:y.length>0&&"getAll"in h.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=f.lower,y=f.upper,d=f.lowerOpen,p=f.upperOpen,b=h===void 0?y===void 0?null:t.upperBound(y,!!p):y===void 0?t.lowerBound(h,!!d):t.bound(h,y,!!d,!!p);return b}function o(f){var h=f.name;function y(b){var x=b.trans,w=b.type,g=b.keys,m=b.values,v=b.range;return new Promise(function(E,R){E=V(E);var C=x.objectStore(h),_=C.keyPath==null,A=w==="put"||w==="add";if(!A&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var P=(g||m||{length:1}).length;if(g&&m&&g.length!==m.length)throw new Error("Given keys array must have same length as given values array.");if(P===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});var D,O=[],H=[],K=0,q=function(fe){++K,yt(fe)};if(w==="deleteRange"){if(v.type===4)return E({numFailures:K,failures:H,results:[],lastResult:void 0});v.type===3?O.push(D=C.clear()):O.push(D=C.delete(i(v)))}else{var Q=A?_?[m,g]:[m,null]:[g,null],re=Q[0],ce=Q[1];if(A)for(var ae=0;ae<P;++ae)O.push(D=ce&&ce[ae]!==void 0?C[w](re[ae],ce[ae]):C[w](re[ae])),D.onerror=q;else for(var ae=0;ae<P;++ae)O.push(D=C[w](re[ae])),D.onerror=q}var Ce=function(fe){var it=fe.target.result;O.forEach(function(se,Rt){return se.error!=null&&(H[Rt]=se.error)}),E({numFailures:K,failures:H,results:w==="delete"?g:O.map(function(se){return se.result}),lastResult:it})};D.onerror=function(fe){q(fe),Ce(fe)},D.onsuccess=Ce})}function d(b){var x=b.trans,w=b.values,g=b.query,m=b.reverse,v=b.unique;return new Promise(function(E,R){E=V(E);var C=g.index,_=g.range,A=x.objectStore(h),P=C.isPrimaryKey?A:A.index(C.name),D=m?v?"prevunique":"prev":v?"nextunique":"next",O=w||!("openKeyCursor"in P)?P.openCursor(i(_),D):P.openKeyCursor(i(_),D);O.onerror=de(R),O.onsuccess=V(function(H){var K=O.result;if(!K){E(null);return}K.___id=++ps,K.done=!1;var q=K.continue.bind(K),Q=K.continuePrimaryKey;Q&&(Q=Q.bind(K));var re=K.advance.bind(K),ce=function(){throw new Error("Cursor not started")},ae=function(){throw new Error("Cursor not stopped")};K.trans=x,K.stop=K.continue=K.continuePrimaryKey=K.advance=ce,K.fail=V(R),K.next=function(){var Ce=this,fe=1;return this.start(function(){return fe--?Ce.continue():Ce.stop()}).then(function(){return Ce})},K.start=function(Ce){var fe=new Promise(function(se,Rt){se=V(se),O.onerror=de(Rt),K.fail=Rt,K.stop=function(Xi){K.stop=K.continue=K.continuePrimaryKey=K.advance=ae,se(Xi)}}),it=function(){if(O.result)try{Ce()}catch(se){K.fail(se)}else K.done=!0,K.start=function(){throw new Error("Cursor behind last entry")},K.stop()};return O.onsuccess=V(function(se){O.onsuccess=it,it()}),K.continue=q,K.continuePrimaryKey=Q,K.advance=re,it(),fe},E(K)},R)})}function p(b){return function(x){return new Promise(function(w,g){w=V(w);var m=x.trans,v=x.values,E=x.limit,R=x.query,C=E===1/0?void 0:E,_=R.index,A=R.range,P=m.objectStore(h),D=_.isPrimaryKey?P:P.index(_.name),O=i(A);if(E===0)return w({result:[]});if(b){var H=v?D.getAll(O,C):D.getAllKeys(O,C);H.onsuccess=function(re){return w({result:re.target.result})},H.onerror=de(g)}else{var K=0,q=v||!("openKeyCursor"in D)?D.openCursor(O):D.openKeyCursor(O),Q=[];q.onsuccess=function(re){var ce=q.result;if(!ce)return w({result:Q});if(Q.push(v?ce.value:ce.primaryKey),++K===E)return w({result:Q});ce.continue()},q.onerror=de(g)}})}}return{name:h,schema:f,mutate:y,getMany:function(b){var x=b.trans,w=b.keys;return new Promise(function(g,m){g=V(g);for(var v=x.objectStore(h),E=w.length,R=new Array(E),C=0,_=0,A,P=function(K){var q=K.target;(R[q._pos]=q.result)!=null,++_===C&&g(R)},D=de(m),O=0;O<E;++O){var H=w[O];H!=null&&(A=v.get(w[O]),A._pos=O,A.onsuccess=P,A.onerror=D,++C)}C===0&&g(R)})},get:function(b){var x=b.trans,w=b.key;return new Promise(function(g,m){g=V(g);var v=x.objectStore(h),E=v.get(w);E.onsuccess=function(R){return g(R.target.result)},E.onerror=de(m)})},query:p(u),openCursor:d,count:function(b){var x=b.query,w=b.trans,g=x.index,m=x.range;return new Promise(function(v,E){var R=w.objectStore(h),C=g.isPrimaryKey?R:R.index(g.name),_=i(m),A=_?C.count(_):C.count();A.onsuccess=V(function(P){return v(P.target.result)}),A.onerror=de(E)})}}}var a=r(e,n),s=a.schema,u=a.hasGetAll,l=s.tables.map(function(f){return o(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var h=c[f];if(!h)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:mt(t),schema:s}}function ys(e,t){return t.reduce(function(n,r){var i=r.create;return B(B({},n),i(n))},e)}function gs(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=ys(vs(t,i,r),e.dbcore);return{dbcore:o}}function vr(e,t){var n=e._novip,r=t.db,i=gs(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(s){return s.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function en(e,t,n,r){var i=e._novip;n.forEach(function(o){var a=r[o];t.forEach(function(s){var u=ar(s,o);(!u||"value"in u&&u.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?Ee(s,o,{get:function(){return this.table(o)},set:function(l){vi(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new i.Table(o,a))})})}function Hn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function ms(e,t){return e._cfg.version-t._cfg.version}function bs(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=T.transless||T;Te(function(){T.trans=o,T.transless=s,t===0?(W(i).forEach(function(u){yr(n,u,i[u].primKey,i[u].indexes)}),vr(e,n),k.follow(function(){return e.on.populate.fire(o)}).catch(a)):ws(e,t,o,n).catch(a)})}function ws(e,t,n,r){var i=e._novip,o=[],a=i._versions,s=i._dbSchema=gr(i,i.idbdb,r),u=!1,l=a.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){o.push(function(){var h=s,y=f._cfg.dbschema;Wn(i,h,r),Wn(i,y,r),s=i._dbSchema=y;var d=zi(h,y);d.add.forEach(function(m){yr(r,m[0],m[1].primKey,m[1].indexes)}),d.change.forEach(function(m){if(m.recreate)throw new I.Upgrade("Not yet support for changing primary key");var v=r.objectStore(m.name);m.add.forEach(function(E){return Un(v,E)}),m.change.forEach(function(E){v.deleteIndex(E.name),Un(v,E)}),m.del.forEach(function(E){return v.deleteIndex(E)})});var p=f._cfg.contentUpgrade;if(p&&f._cfg.version>t){vr(i,r),n._memoizedTables={},u=!0;var b=bi(y);d.del.forEach(function(m){b[m]=h[m]}),Hn(i,[i.Transaction.prototype]),en(i,[i.Transaction.prototype],W(b),b),n.schema=b;var x=sr(p);x&&nt();var w,g=k.follow(function(){if(w=p(n),w&&x){var m=Ae.bind(null,null);w.then(m,m)}});return w&&typeof w.then=="function"?k.resolve(w):g.then(function(){return w})}}),o.push(function(h){if(!u||!Qa){var y=f._cfg.dbschema;xs(y,h)}Hn(i,[i.Transaction.prototype]),en(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return o.length?k.resolve(o.shift()(n.idbtrans)).then(c):k.resolve()}return c().then(function(){_s(s,r)})}function zi(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!hn)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName,l=void 0;for(l in s)u[l]||a.del.push(l);for(l in u){var c=s[l],f=u[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function yr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return Un(i,o)}),i}function _s(e,t){W(e).forEach(function(n){t.db.objectStoreNames.contains(n)||yr(t,n,e[n].primKey,e[n].indexes)})}function xs(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Un(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function gr(e,t,n){var r={},i=cn(t.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),s=a.keyPath,u=zn(Fi(s),s||"",!1,!1,!!a.autoIncrement,s&&typeof s!="string",!0),l=[],c=0;c<a.indexNames.length;++c){var f=a.index(a.indexNames[c]);s=f.keyPath;var h=zn(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);l.push(h)}r[o]=ji(o,u,l)}),r}function Es(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=gr(r,t,n);r._storeNames=cn(t.objectStoreNames,0),en(r,[r._allTables],W(i),i)}function As(e,t){var n=gr(e,e.idbdb,t),r=zi(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Wn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var l=s.indexNames[u],c=s.index(l).keyPath,f=typeof c=="string"?c:"["+cn(c).join("+")+"]";if(t[a]){var h=t[a].idxByName[f];h&&(h.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&F.WorkerGlobalScope&&F instanceof F.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Ss(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return zn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),G(i),n===0)})}var Cs=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){W(t).forEach(function(r){if(t[r]!==null){var i=Ss(t[r]),o=i.shift();if(o.multi)throw new I.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new I.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new I.Schema("Index must have a name and cannot be an empty string")}),n[r]=ji(r,o,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?ne(this._cfg.storesSource,t):t;var r=n._versions,i={},o={};return r.forEach(function(a){ne(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,Hn(n,[n._allTables,n,n.Transaction.prototype]),en(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],W(o),o),n._storeNames=W(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=cr(this._cfg.contentUpgrade||N,t),this},e}();function ks(e){return Pt(Cs.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function mr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new pn(dn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function br(e){return e&&typeof e.databases=="function"}function Ps(e){var t=e.indexedDB,n=e.IDBKeyRange;return br(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==dn})}):mr(t,n).toCollection().primaryKeys()}function Rs(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!br(n)&&t!==dn&&mr(n,r).put({name:t}).catch(N)}function Ts(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!br(n)&&t!==dn&&mr(n,r).delete(t).catch(N)}function qn(e){return Te(function(){return T.letThrough=!0,e()})}function Ks(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Is(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Y(t.dbOpenError):e});ve&&(t.openCanceller._stackHolder=je()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new I.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,s=!1;return k.race([r,(typeof navigator>"u"?k.resolve():Ks()).then(function(){return new k(function(u,l){if(i(),!n)throw new I.MissingAPI;var c=e.name,f=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!f)throw new I.MissingAPI;f.onerror=de(l),f.onblocked=V(e._fireOnBlocked),f.onupgradeneeded=V(function(h){if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=yt,a.abort(),f.result.close();var y=n.deleteDatabase(c);y.onsuccess=y.onerror=V(function(){l(new I.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{a.onerror=de(l);var d=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;s=d<1,e._novip.idbdb=f.result,bs(e,d/10,a,l)}},l),f.onsuccess=V(function(){a=null;var h=e._novip.idbdb=f.result,y=cn(h.objectStoreNames);if(y.length>0)try{var d=h.transaction(hs(y),"readonly");t.autoSchema?Es(e,h,d):(Wn(e,e._dbSchema,d),As(e,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),vr(e,d)}catch{}ct.push(e),h.onversionchange=V(function(p){t.vcFired=!0,e.on("versionchange").fire(p)}),h.onclose=V(function(p){e.on("close").fire(p)}),s&&Rs(e._deps,c),u()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],k.resolve(qn(function(){return e.on.ready.fire(e.vip)})).then(function u(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(cr,N);return t.onReadyBeingFired=[],k.resolve(qn(function(){return l(e.vip)})).then(u)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(u){t.dbOpenError=u;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),Y(u)}).finally(function(){t.openComplete=!0,o()})}function Yn(e){var t=function(a){return e.next(a)},n=function(a){return e.throw(a)},r=o(t),i=o(n);function o(a){return function(s){var u=a(s),l=u.value;return u.done?l:!l||typeof l.then!="function"?G(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function Ds(e,t,n){var r=arguments.length;if(r<2)throw new I.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=wi(i);return[e,o,n]}function Vi(e,t,n,r,i){return k.resolve().then(function(){var o=T.transless||T,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===lr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Vi(e,t,n,null,i)})):Y(f)}var u=sr(i);u&&nt();var l,c=k.follow(function(){if(l=i.call(a,a),l)if(u){var f=Ae.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Yn(l))},s);return(l&&typeof l.then=="function"?k.resolve(l).then(function(f){return a.active?f:Y(new I.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),Y(f)})})}function Ot(e,t,n){for(var r=G(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function $s(e){return B(B({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(p,b,x){var w=ft(p),g=i[w]=i[w]||[],m=p==null?0:typeof p=="string"?1:p.length,v=b>0,E=B(B({},x),{isVirtual:v,keyTail:b,keyLength:m,extractKey:Vn(p),unique:!v&&x.unique});if(g.push(E),E.isPrimaryKey||o.push(E),m>1){var R=m===2?p[0]:p.slice(0,m-1);a(R,b+1,x)}return g.sort(function(C,_){return C.keyTail-_.keyTail}),E}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var u=0,l=r.indexes;u<l.length;u++){var c=l[u];a(c.keyPath,0,c)}function f(p){var b=i[ft(p)];return b&&b[0]}function h(p,b){return{type:p.type===1?2:p.type,lower:Ot(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:Ot(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0}}function y(p){var b=p.query.index;return b.isVirtual?B(B({},p),{query:{index:b,range:h(p.query.range,b.keyTail)}}):p}var d=B(B({},n),{schema:B(B({},r),{primaryKey:s,indexes:o,getIndexByKeyPath:f}),count:function(p){return n.count(y(p))},query:function(p){return n.query(y(p))},openCursor:function(p){var b=p.query.index,x=b.keyTail,w=b.isVirtual,g=b.keyLength;if(!w)return n.openCursor(p);function m(v){function E(C){C!=null?v.continue(Ot(C,p.reverse?e.MAX_KEY:e.MIN_KEY,x)):p.unique?v.continue(v.key.slice(0,g).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,x)):v.continue()}var R=Object.create(v,{continue:{value:E},continuePrimaryKey:{value:function(C,_){v.continuePrimaryKey(Ot(C,e.MAX_KEY,x),_)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var C=v.key;return g===1?C[0]:C.slice(0,g)}},value:{get:function(){return v.value}}});return R}return n.openCursor(y(p)).then(function(v){return v&&m(v)})}});return d}})}var Os={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:$s};function wr(e,t,n,r){return n=n||{},r=r||"",W(e).forEach(function(i){if(!oe(t,i))n[r+i]=void 0;else{var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var s=Rn(o),u=Rn(a);s!==u?n[r+i]=t[i]:s==="Object"?wr(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}}),W(t).forEach(function(i){oe(e,i)||(n[r+i]=t[i])}),n}function Bs(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ms={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return B(B({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=B(B({},n),{mutate:function(o){var a=T.trans,s=a.table(t).hook,u=s.deleting,l=s.creating,c=s.updating;switch(o.type){case"add":if(l.fire===N)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(l.fire===N&&c.fire===N)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(u.fire===N)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(u.fire===N)break;return a._promise("readwrite",function(){return h(o)},!0)}return n.mutate(o);function f(d){var p=T.trans,b=d.keys||Bs(r,d);if(!b)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?B(B({},d),{keys:b}):B({},d),d.type!=="delete"&&(d.values=kn([],d.values,!0)),d.keys&&(d.keys=kn([],d.keys,!0)),Ns(n,d,b).then(function(x){var w=b.map(function(g,m){var v=x[m],E={onerror:null,onsuccess:null};if(d.type==="delete")u.fire.call(E,g,v,p);else if(d.type==="add"||v===void 0){var R=l.fire.call(E,g,d.values[m],p);g==null&&R!=null&&(g=R,d.keys[m]=g,r.outbound||ue(d.values[m],r.keyPath,g))}else{var C=wr(v,d.values[m]),_=c.fire.call(E,C,g,v,p);if(_){var A=d.values[m];Object.keys(_).forEach(function(P){oe(A,P)?A[P]=_[P]:ue(A,P,_[P])})}}return E});return n.mutate(d).then(function(g){for(var m=g.failures,v=g.results,E=g.numFailures,R=g.lastResult,C=0;C<b.length;++C){var _=v?v[C]:b[C],A=w[C];_==null?A.onerror&&A.onerror(m[C]):A.onsuccess&&A.onsuccess(d.type==="put"&&x[C]?d.values[C]:_)}return{failures:m,results:v,numFailures:E,lastResult:R}}).catch(function(g){return w.forEach(function(m){return m.onerror&&m.onerror(g)}),Promise.reject(g)})})}function h(d){return y(d.trans,d.range,1e4)}function y(d,p,b){return n.query({trans:d,values:!1,query:{index:r,range:p},limit:b}).then(function(x){var w=x.result;return f({type:"delete",keys:w,trans:d}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):w.length<b?{failures:[],numFailures:0,lastResult:void 0}:y(d,B(B({},p),{lower:w[w.length-1],lowerOpen:!0}),b)})})}}});return i}})}};function Ns(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Hi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)ee(t.keys[i],e[o])===0&&(r.push(n?Et(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var Ls={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return B(B({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Hi(r.keys,r.trans._cache,r.cache==="clone");return i?k.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Et(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},En;function _r(e){return!("from"in e)}var ge=function(e,t){if(this)ne(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ge;return e&&"d"in e&&ne(n,e),n}};Xe(ge.prototype,(En={add:function(e){return tn(this,e),this},addKey:function(e){return bt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return bt(t,n,n)}),this}},En[Tn]=function(){return Qn(this)},En));function bt(e,t,n){var r=ee(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(_r(e))return ne(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(ee(n,e.from)<0)return i?bt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Lr(e);if(ee(t,e.to)>0)return o?bt(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Lr(e);ee(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),ee(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&tn(e,i),o&&a&&tn(e,o)}}function tn(e,t){function n(r,i){var o=i.from,a=i.to,s=i.l,u=i.r;bt(r,o,a),s&&n(r,s),u&&n(r,u)}_r(t)||n(e,t)}function Fs(e,t){var n=Qn(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=Qn(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(ee(s.from,i.to)<=0&&ee(s.to,i.from)>=0)return!0;ee(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function Qn(e){var t=_r(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&ee(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||ee(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Lr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=B({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],a[i]=s[o],e[o]=a,a.d=Fr(a)}e.d=Fr(e)}function Fr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var js={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ge(e.MIN_KEY,e.MAX_KEY);return B(B({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,s=a.extractKey,u=a.outbound,l=B(B({},i),{mutate:function(h){var y=h.trans,d=y.mutatedParts||(y.mutatedParts={}),p=function(R){var C="idb://"+t+"/"+r+"/"+R;return d[C]||(d[C]=new ge)},b=p(""),x=p(":dels"),w=h.type,g=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],m=g[0],v=g[1],E=h.trans._cache;return i.mutate(h).then(function(R){if(G(m)){w!=="delete"&&(m=R.results),b.addKeys(m);var C=Hi(m,E);!C&&w!=="add"&&x.addKeys(m),(C||v)&&zs(p,o,C,v)}else if(m){var _={from:m.lower,to:m.upper};x.add(_),b.add(_)}else b.add(n),x.add(n),o.indexes.forEach(function(A){return p(A.name).add(n)});return R})}}),c=function(h){var y,d,p=h.query,b=p.index,x=p.range;return[b,new ge((y=x.lower)!==null&&y!==void 0?y:e.MIN_KEY,(d=x.upper)!==null&&d!==void 0?d:e.MAX_KEY)]},f={get:function(h){return[a,new ge(h.key)]},getMany:function(h){return[a,new ge().addKeys(h.keys)]},count:c,query:c,openCursor:c};return W(f).forEach(function(h){l[h]=function(y){var d=T.subscr;if(d){var p=function(E){var R="idb://"+t+"/"+r+"/"+E;return d[R]||(d[R]=new ge)},b=p(""),x=p(":dels"),w=f[h](y),g=w[0],m=w[1];if(p(g.name||"").add(m),!g.isPrimaryKey)if(h==="count")x.add(n);else{var v=h==="query"&&u&&y.values&&i.query(B(B({},y),{values:!1}));return i[h].apply(this,arguments).then(function(E){if(h==="query"){if(u&&y.values)return v.then(function(A){var P=A.result;return b.addKeys(P),E});var R=y.values?E.result.map(s):E.result;y.values?b.addKeys(R):x.addKeys(R)}else if(h==="openCursor"){var C=E,_=y.values;return C&&Object.create(C,{key:{get:function(){return x.addKey(C.primaryKey),C.key}},primaryKey:{get:function(){var A=C.primaryKey;return x.addKey(A),A}},value:{get:function(){return _&&b.addKey(C.primaryKey),C.value}}})}return E})}}return i[h].apply(this,arguments)}}),l}})}};function zs(e,t,n,r){function i(o){var a=e(o.name||"");function s(l){return l!=null?o.extractKey(l):null}var u=function(l){return o.multiEntry&&G(l)?l.forEach(function(c){return a.addKey(c)}):a.addKey(l)};(n||r).forEach(function(l,c){var f=n&&s(n[c]),h=r&&s(r[c]);ee(f,h)!==0&&(f!=null&&u(f),h!=null&&u(h))})}t.indexes.forEach(i)}var pn=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=B({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:N,dbReadyPromise:null,cancelOpen:N,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new k(function(s){a.dbReadyResolve=s}),a.openCanceller=new k(function(s,u){a.cancelOpen=u}),this._state=a,this.name=t,this.on=kt(this,"populate","blocked","versionchange","close",{ready:[cr,N]}),this.on.ready.subscribe=yi(this.on.ready.subscribe,function(s){return function(u,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||k.resolve().then(u),l&&s(u);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(u),l&&s(u);else{s(u);var f=r;l||s(function h(){f.on.ready.unsubscribe(u),f.on.ready.unsubscribe(h)})}})}}),this.Collection=rs(this),this.Table=Ja(this),this.Transaction=fs(this),this.Version=ks(this),this.WhereClause=ls(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=mt(n.IDBKeyRange),this._createTransaction=function(s,u,l,c){return new r.Transaction(s,u,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),ct.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(s)})},this.use(Os),this.use(Ms),this.use(js),this.use(Ls),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new I.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new I.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(ms),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||T.letThrough||this._vip)?t():new k(function(r,i){if(n._state.openComplete)return i(new I.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new I.DatabaseClosed);return}n.open().catch(N)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i==null?10:i,name:o}),a.sort(function(s,u){return s.level-u.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},e.prototype.open=function(){return Is(this)},e.prototype._close=function(){var t=this._state,n=ct.indexOf(this);if(n>=0&&ct.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new k(function(r){t.dbReadyResolve=r}),t.openCanceller=new k(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new I.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new k(function(i,o){var a=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=V(function(){Ts(t._deps,t.name),i()}),s.onerror=de(o),s.onblocked=t._fireOnBlocked};if(n)throw new I.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return W(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Ds.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,o=T.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,u;try{if(u=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===mn)s=mn;else if(t=="rw"||t==bn)s=bn;else throw new I.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===mn&&s===bn)if(a)o=null;else throw new I.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&u.forEach(function(c){if(o&&o.storeNames.indexOf(c)===-1)if(a)o=null;else throw new I.SubTransaction("Table "+c+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,function(f,h){h(c)}):Y(c)}var l=Vi.bind(null,this,s,u,o,r);return o?o._promise(s,l,"lock"):T.trans?rt(T.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!oe(this._allTables,t))throw new I.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),Vs=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Hs=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[Vs]=function(){return this},e}();function Ui(e,t){return W(t).forEach(function(n){var r=e[n]||(e[n]=new ge);tn(r,t[n])}),e}function Us(e){return new Hs(function(t){var n=sr(e);function r(y){n&&nt();var d=function(){return Te(e,{subscr:y,trans:null})},p=T.trans?rt(T.transless,d):d();return n&&p.then(Ae,Ae),p}var i=!1,o={},a={},s={get closed(){return i},unsubscribe:function(){i=!0,Ie.storagemutated.unsubscribe(f)}};t.start&&t.start(s);var u=!1,l=!1;function c(){return W(a).some(function(y){return o[y]&&Fs(o[y],a[y])})}var f=function(y){Ui(o,y),c()&&h()},h=function(){if(!(u||i)){o={};var y={},d=r(y);l||(Ie(gt,f),l=!0),u=!0,Promise.resolve(d).then(function(p){u=!1,!i&&(c()?h():(o={},a=y,t.next&&t.next(p)))},function(p){u=!1,t.error&&t.error(p),s.unsubscribe()})}};return h(),s})}var Xn;try{Xn={indexedDB:F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,IDBKeyRange:F.IDBKeyRange||F.webkitIDBKeyRange}}catch{Xn={indexedDB:null,IDBKeyRange:null}}var De=pn;Xe(De,B(B({},fn),{delete:function(e){var t=new De(e,{addons:[]});return t.delete()},exists:function(e){return new De(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Ps(De.dependencies).then(e)}catch{return Y(new I.MissingAPI)}},defineClass:function(){function e(t){ne(this,t)}return e},ignoreTransaction:function(e){return T.trans?rt(T.transless,e):e()},vip:qn,async:function(e){return function(){try{var t=Yn(e.apply(this,arguments));return!t||typeof t.then!="function"?k.resolve(t):t}catch(n){return Y(n)}}},spawn:function(e,t,n){try{var r=Yn(e.apply(n,t||[]));return!r||typeof r.then!="function"?k.resolve(r):r}catch(i){return Y(i)}},currentTransaction:{get:function(){return T.trans||null}},waitFor:function(e,t){var n=k.resolve(typeof e=="function"?De.ignoreTransaction(e):e).timeout(t||6e4);return T.trans?T.trans.waitFor(n):n},Promise:k,debug:{get:function(){return ve},set:function(e){xi(e,e==="dexie"?function(){return!0}:Bi)}},derive:et,extend:ne,props:Xe,override:yi,Events:kt,on:Ie,liveQuery:Us,extendObservabilitySet:Ui,getByKeyPath:_e,setByKeyPath:ue,delByKeyPath:Ea,shallowClone:bi,deepClone:Et,getObjectDiff:wr,cmp:ee,asap:gi,minKey:jn,addons:[],connections:ct,errnames:lr,dependencies:Xn,semVer:Dr,version:Dr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));De.maxKey=mt(De.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ie(gt,function(e){if(!be){var t;hn?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Re,!0,!0,e)):t=new CustomEvent(Re,{detail:e}),be=!0,dispatchEvent(t),be=!1}}),addEventListener(Re,function(e){var t=e.detail;be||nn(t)}));function nn(e){var t=be;try{be=!0,Ie.storagemutated.fire(e)}finally{be=t}}var be=!1;if(typeof BroadcastChannel<"u"){var jr=new BroadcastChannel(Re);Ie(gt,function(e){be||jr.postMessage(e)}),jr.onmessage=function(e){e.data&&nn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ie(gt,function(e){try{be||(typeof localStorage<"u"&&localStorage.setItem(Re,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&kn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Re,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===Re){var t=JSON.parse(e.newValue);t&&nn(t.changedParts)}});var zr=self.document&&navigator.serviceWorker;zr&&zr.addEventListener("message",Ws)}function Ws(e){var t=e.data;t&&t.type===Re&&nn(t.changedParts)}k.rejectionMapper=Ia;xi(ve,Bi);const qs=async()=>await(await fetch("https://raw.githubusercontent.com/sanderdrummer/recipes-md/master/parsed-recipes.json")).json();class Ys extends pn{constructor(){super("RecipeDatabase"),this.version(4).stores({recipes:"&title",plans:"++id"})}}const ze=new Ys,Qs=async()=>{const e=await qs();await ze.recipes.bulkPut(e)},Xs=async()=>await ze.recipes.toArray(),Gs=async e=>await ze.recipes.get(e),Js=e=>wt(e,Gs),Zs=()=>wt(Xs),eu=async()=>await ze.plans.toCollection().sortBy("status"),tu=e=>ze.plans.add(e),nu=e=>ze.plans.delete(e.id),ru=()=>wt(eu),iu=async e=>await ze.plans.get(e),ou=e=>wt(e,iu);class au extends pn{constructor(){super("ListDatabase"),this.version(2).stores({todo:"&title",done:"&title"})}}const pe=new au,su=async()=>{const e=await pe.todo.toArray(),t=await pe.done.toArray();return{todo:e,done:t}},uu=()=>wt(su),lu=e=>{var t;if(e.match(/^\d+/)){const n=/^(([0-9]*[.])?[0-9]+)/,[r=""]=(t=e.match(n))!=null?t:[],i=e.replace(r,""),[o="",a=""]=i.split(" ");return{amount:r,scale:o,title:a}}else if(e.trim().length>0)return{amount:"",scale:"",title:e};return null},cu=e=>e.split(`
`).reduce((t,n)=>{const r=lu(n);return r&&t.push(r),t},[]),Wi=async e=>{const t=e.map(async n=>{const r=await pe.todo.get(n.title);r?pe.todo.update(n.title,{amount:Number(r.amount)+Number(n.amount)}):pe.todo.put(n)});await Promise.all(t)},fu=async e=>{await pe.todo.delete(e.title),await pe.done.add(e)},hu=async e=>{await pe.done.delete(e.title),await pe.todo.add(e)},du=async()=>{await pe.done.clear()},pu=M('<textarea class="mb-10 font-extralight w-full min-h-300 rounded block, p-4 placeholder-stone-500 border-stone-800 text-stone-400 bg-stone-800 focus:outline-none focus:border-stone-400 focus:ring-stone-400 focus:ring-1" placeholder="Menge Artikel"></textarea>'),vu=()=>{const[e,t]=te(""),n=rr();return S(ln,{class:"mx-auto container",get children(){return[S(sn,{class:"ml-2",children:"Auf die Einkaufsliste:"}),(()=>{const r=pu.cloneNode(!0);return r.$$input=i=>t(i.currentTarget.value),r.style.setProperty("resize","none"),r.style.setProperty("height","50vh"),U(()=>r.value=e()),r})(),S(Ze,{class:"ml-2",get icon(){return S(un,{})},message:"Zur Einkaufsliste hinzugef\xFCgt",label:"auf die Liste!",onClick:async()=>{const r=cu(e());await Wi(r),n("/list")}})]}})};_t(["input"]);const yu=M('<div class="grid grid-flow-col items-start mx-2"></div>'),gu=M('<div class="mt-5 p-3"><h2 class="text-2xl font-normal"></h2><ul role="list" class="divide-y list-none divide-stone-800"></ul></div>'),mu=M('<div class="p-3 font-extralight text-lg"></div>'),bu=M('<li class="font-extralight text-lg grid grid-flow-col justify-between"></li>'),wu=M("<span> </span>"),_u=()=>{const[e,{refetch:t}]=uu();return S(ln,{class:"mx-auto container",get children(){return[(()=>{const n=yu.cloneNode(!0);return $(n,S(sn,{children:"Einkaufsliste"}),null),$(n,S(ir,{class:"p-4 pt-4 text-lg grid grid-flow-col gap-2 text-stone-300 justify-end items-center",href:"add",get children(){return[S(un,{class:"fill-stone-300 h-7 w-7"}),"Mehr einkaufen"]}}),null),n})(),S(Vr,{heading:"Noch in den Korb",action:n=>{fu(n).then(t)},emptyState:"Nichts mehr einzukaufen!",get items(){var n,r;return(r=(n=e())==null?void 0:n.todo)!=null?r:[]}}),S(Vr,{heading:"Schon dabei",action:n=>{hu(n).then(t)},emptyState:"Noch nichts eingekauft!",get items(){var n,r;return(r=(n=e())==null?void 0:n.done)!=null?r:[]}}),j(()=>j(()=>{var n,r,i;return((i=(r=(n=e())==null?void 0:n.done)==null?void 0:r.length)!=null?i:0)>0})()&&S(Ze,{class:"text-red-400 mt-10 mb-8",label:"Neue Liste",onClick:async()=>{await du(),t()}}))]}})},Vr=e=>(()=>{const t=gu.cloneNode(!0),n=t.firstChild,r=n.nextSibling;return $(n,()=>e.heading),$(r,S(qt,{get each(){return e.items},get fallback(){return(()=>{const i=mu.cloneNode(!0);return $(i,()=>e.emptyState),i})()},children:i=>(()=>{const o=bu.cloneNode(!0);return $(o,S(Ze,{get label(){return(()=>{const a=wu.cloneNode(!0),s=a.firstChild;return $(a,()=>i.amount,s),$(a,()=>i.scale,s),$(a,()=>i.title,null),a})()},onClick:async()=>e.action(i)})),o})()})),t})(),xu=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"></path></svg>'),Eu=()=>S(or,{href:"/list",label:"Einkaufsliste",get icon(){return xu.cloneNode(!0)}}),Au=()=>S(he,{path:"/list",get children(){return[S(he,{path:"/",component:_u}),S(he,{path:"/add",component:vu})]}}),Su=e=>S(Ze,{get message(){var t;return`${(t=e.plan)==null?void 0:t.title} zur Einkaufsliste hinzugef\xFCgt`},get disabled(){return e.plan===void 0},get icon(){return S(un,{})},label:"Rezept einkaufen",onClick:async()=>{e.plan&&await Wi(e.plan.ingredients.map(t=>({amount:t.amount,scale:t.scale,title:t.name})))}}),qi=e=>S(Ze,{get class(){return e.compact?"pl-3":""},get message(){var t;return`${(t=e.recipe)==null?void 0:t.title} zum Kochplan hinzugef\xFCgt`},get disabled(){return e.recipe===void 0},get icon(){return S(un,{})},get label(){return e.compact?"":"Rezept kochen"},onClick:async()=>{e.recipe&&await tu(e.recipe)}}),Cu=e=>S(Ze,{get disabled(){return e.plan===void 0},get icon(){return S(fa,{})},label:"Fertig",onClick:async()=>{var t;e.plan&&(await nu(e.plan),await((t=e.onClick)==null?void 0:t.call(e)))}}),ku=M('<div class="mb-8 sm:grid-flow-col grid justify-between"><label class="mb-8 sm:mtb0 sm:order-2"><span class="mr-4 text-stone-400 font-normal">Menge:</span><select class="rounded bg-stone-800 text-stone-400 border-stone-800 focus:outline-none focus:border-stone-400 focus:ring-stone-400 focus:ring-1"></select></label><ul class="sm:order-1"></ul></div>'),Pu=M("<p></p>"),Ru=M('<div class="mt-12 mb-8"></div>'),Tu=M("<option></option>"),Ku=M('<li><span class="text-stone-400"></span><span class="font-normal"> <!> </span></li>'),Iu=(e,t=1)=>Number(e)===0?"":t===1?e:`${Number(e)*t}`,Yi=e=>{const[t,n]=te(1),r=[.25,.5,.75,1,1.25,1.5,1.75,2];return S(ln,{class:"mx-auto container whitespace-pre-wrap px-5",get children(){return[S(sn,{get children(){var i;return(i=e.recipe)==null?void 0:i.title}}),(()=>{const i=ku.cloneNode(!0),o=i.firstChild,a=o.firstChild,s=a.nextSibling,u=o.nextSibling;return s.addEventListener("change",l=>n(Number(l.currentTarget.value))),$(s,S(qt,{each:r,children:l=>(()=>{const c=Tu.cloneNode(!0);return c.value=l,$(c,l),c})()})),$(u,S(qt,{get each(){var l;return(l=e.recipe)==null?void 0:l.ingredients},children:l=>(()=>{const c=Ku.cloneNode(!0),f=c.firstChild,h=f.nextSibling,y=h.firstChild,d=y.nextSibling;return d.nextSibling,$(f,()=>Iu(l.amount,t()),null),$(f,()=>l.scale,null),$(h,()=>l.name,d),c})()})),U(()=>s.value=t()),i})(),(()=>{const i=Pu.cloneNode(!0);return $(i,()=>{var o;return(o=e.recipe)==null?void 0:o.description}),i})(),(()=>{const i=Ru.cloneNode(!0);return $(i,()=>e.children),i})()]}})},Du=()=>{const e=fi(),[t]=Js(e.id);return S(Yi,{get recipe(){return t()},get children(){return S(qi,{get recipe(){return t()}})}})},$u=M('<div class="mx-auto container"><ul role="list" class="divide-y list-none divide-stone-800"></ul></div>'),Ou=M('<div class="p-3 font-extralight text-lg"></div>'),Bu=M('<li class="font-extralight text-lg grid grid-flow-col justify-between"></li>'),Qi=e=>(()=>{const t=$u.cloneNode(!0),n=t.firstChild;return $(n,S(qt,{get each(){return e.recipes},get fallback(){return(()=>{const r=Ou.cloneNode(!0);return $(r,()=>e.emptyState),r})()},children:r=>(()=>{const i=Bu.cloneNode(!0);return $(i,S(ir,{class:"p-3 no-underline ",get href(){return e.getHref(r)},get children(){return r.title}}),null),$(i,()=>e.action(r),null),i})()})),t})(),Mu=M('<div class="min-h-screen"><div class="p-4 sticky top-0"></div></div>'),Nu=()=>{const[e,{refetch:t}]=Zs(),[n,r]=te(""),i=()=>{var a;const o=n().toLocaleLowerCase();return o.length>3?((a=e())!=null?a:[]).filter(s=>s.title.toLocaleLowerCase().includes(o)):e()};return eo(()=>{e.state==="ready"&&e().length===0&&t()}),(()=>{const o=Mu.cloneNode(!0),a=o.firstChild;return $(a,S(ya,{placeholder:"Was kochen?",get query(){return n()},setQuery:r})),$(o,S(Qi,{getHref:s=>s.title,action:s=>S(qi,{compact:!0,recipe:s}),emptyState:"Leider kein Rezept gefunden",get recipes(){return i()}}),null),o})()},Lu=M('<div class="mx-auto container"></div>'),Fu=()=>{const[e,{refetch:t}]=ru();return S(ln,{get children(){return[(()=>{const n=Lu.cloneNode(!0);return $(n,S(sn,{class:"px-2",children:"Geplante Rezepte"})),n})(),S(Qi,{getHref:n=>n.id.toString(),action:n=>S(Su,{plan:n,onClick:async()=>{await t()}}),emptyState:"Noch nichts geplant",get recipes(){var n;return(n=e())!=null?n:[]}})]}})},ju=()=>{const e=fi(),[t]=ou(Number(e.id)),n=rr();return S(Yi,{get recipe(){return t()},get children(){return S(Cu,{onClick:async()=>{n("/plan")},get plan(){return t()}})}})},zu=M('<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></svg>'),Vu=M('<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"></path><path d="M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99zM13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83zM17.5 14.33c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24z"></path></svg>'),Hu=()=>S(or,{href:"/plan",get icon(){return zu.cloneNode(!0)},label:"Kochplan"}),Uu=()=>S(or,{href:"/recipes",get icon(){return Vu.cloneNode(!0)},label:"Rezepte"}),Wu=()=>[S(he,{path:"/recipes",get children(){return[S(he,{path:"/",component:Nu}),S(he,{path:"/:id",component:Du})]}}),S(he,{path:"/plan",get children(){return[S(he,{path:"/",component:Fu}),S(he,{path:"/:id",component:ju})]}}),S(he,{path:"/",get element(){return S(Zo,{href:"/recipes"})}})],qu=()=>S(na,{get children(){return[S(Uu,{}),S(Hu,{}),S(Eu,{})]}}),Yu=()=>S(Xo,{get source(){return Do()},get children(){return[S(Go,{get children(){return[S(Wu,{}),S(Au,{})]}}),S(qu,{})]}}),Qu=()=>(Qs(),S(Yu,{}));wo(()=>S(Qu,{}),document.getElementById("root"));
