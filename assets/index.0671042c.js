var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,l=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,r=(e,r)=>{for(var c in r||(r={}))t.call(r,c)&&l(e,c,r[c]);if(n)for(var c of n(r))a.call(r,c)&&l(e,c,r[c]);return e};import{r as c,m as s,c as i,F as o,B as m,C as u,a as p,b as E,T as d,d as g,S as h,D as f,A as b,e as k,f as y,g as v,L as C,h as S,i as w,j as L,k as F,l as P,P as x,I as O,n as j,o as I,p as N,q as T,s as R,t as z,u as D,R as $,v as _,w as K,x as U,y as W,z as q,E as B,G as M,M as Y,H as A,J,K as Q,N as Z,O as G,Q as H,U as V}from"./vendor.6d14712e.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,r)=>{const c=new URL(e,a);if(self[t].moduleMap[c])return n(self[t].moduleMap[c]);const s=new Blob([`import * as m from '${c}';`,`${t}.moduleMap['${c}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){r(new Error(`Failed to import: ${e}`)),l(i)},onload(){n(self[t].moduleMap[c]),l(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/kochbuch/assets/");const X=e=>{const t=localStorage.getItem(e);if(t)return JSON.parse(t)},ee=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},te=(e,t)=>{const n=X(e),[a,l]=c.useState(null!=n?n:t);return c.useEffect((()=>{ee(e,a)}),[e,a]),[a,l]},ne=()=>{const e=X("LIST_KEY");return e||{basket:[],list:[]}},ae=e=>{const t=ne();t.list=[...t.list,...e],ee("LIST_KEY",t)};let le={list:[],basket:[]};const re=s((e=>i({fab:{position:"fixed",bottom:e.spacing(8),right:e.spacing(2)}}))),ce=({onClick:e,label:t,children:n,isLoading:a})=>{const l=re();return c.createElement(o,{onClick:e,disabled:a,className:l.fab,color:"primary","aria-label":t},n)},se=({onCompleted:e})=>{const[t,n]=te("shoppingList","");return c.createElement(m,null,c.createElement(u,null,c.createElement(p,{title:"Einkaufsliste erweitern"}),c.createElement(E,null,c.createElement("form",{onSubmit:async a=>{a.preventDefault(),ae(t.split("\n")),n(""),e()}},c.createElement(d,{autoFocus:!0,value:t,onChange:e=>n(e.target.value),multiline:!0,fullWidth:!0,name:"listItems",label:"Einkaufsliste",required:!0}),c.createElement(g,{type:"submit",startIcon:c.createElement(h,null)},"speichern")))))},ie=({onClearList:e})=>{const[t,n]=c.useState(!1),a=()=>n(!1);return c.createElement(c.Fragment,null,c.createElement(g,{onClick:()=>n(!0)},"Liste löschen"),c.createElement(k,{open:t,onClose:a,"aria-labelledby":"clear-list-dialog-title"},c.createElement(y,{id:"clear-list-dialog-title"},"Die Einkaufsliste leeren ?"),c.createElement(v,null,c.createElement(g,{onClick:a,color:"primary"},"nein"),c.createElement(g,{onClick:async()=>{try{(()=>{const e=ne();e.basket=[],ee("LIST_KEY",e)})(),e(),a()}catch(t){console.log(t)}},color:"primary",autoFocus:!0},"ja"))))},oe=({items:e,onSelect:t,isChecked:n,headline:a})=>0===e.length?null:c.createElement(u,null,c.createElement(p,{subheader:a}),c.createElement(E,null,e.map((e=>c.createElement(C,{button:!0,onClick:()=>{t(e)},key:e},c.createElement(S,null,e),c.createElement(w,{checked:n,inputProps:{"aria-label":`${e} ist im Einkaufswagen`}})))))),me=()=>{const{list:e,fetchList:t}=(()=>{const[e,t]=c.useState(le);return{list:e,fetchList:()=>{const e=ne();le=e,t(e)}}})(),[n,a]=c.useState(!1);return c.useEffect((()=>{t()}),[]),c.createElement(c.Fragment,null,0===e.list.length&&0===e.basket.length&&c.createElement(m,{display:"flex",alignContent:"center",justifyContent:"center"},"Du hast noch nichts auf der Einkaufsliste"),c.createElement(oe,{items:e.list,isChecked:!1,headline:"In den Einkaufswagen",onSelect:async e=>{(async e=>{const t=ne();t.list=t.list.filter((t=>t!==e)),t.basket.push(e),ee("LIST_KEY",t)})(e),t()}}),c.createElement(m,{mt:3,mb:3}),c.createElement(oe,{items:e.basket,isChecked:!0,headline:"Schon dabei",onSelect:async e=>{(e=>{const t=ne();t.basket=t.basket.filter((t=>t!==e)),t.list.push(e),ee("LIST_KEY",t)})(e),t()}}),e.basket.length>0&&c.createElement(m,{mt:4},c.createElement(ie,{onClearList:t})),c.createElement(f,{anchor:"top",open:n,onClose:()=>a(!1)},c.createElement(se,{onCompleted:()=>{a(!1),t()}})),c.createElement(ce,{onClick:()=>a(!0),label:"brauche sachen"},c.createElement(b,null)))},ue=({recipe:e,action:t})=>{const[n,a]=c.useState(!1),[l,r]=c.useState(1);return c.createElement(c.Fragment,null,!n&&c.createElement(c.Fragment,null,c.createElement(C,{selected:n,button:!0,onClick:()=>a((e=>!e)),key:e.title},c.createElement(S,{primary:e.title})),c.createElement(L,null)),n&&c.createElement(m,{mt:3},c.createElement(u,null,c.createElement(p,{title:c.createElement(g,{onClick:()=>a(!1)},null==e?void 0:e.title),action:t})),c.createElement(c.Fragment,null,c.createElement(m,{mt:3},c.createElement(u,null,c.createElement(p,{subheader:"Zutaten",action:c.createElement(d,{select:!0,value:l,SelectProps:{native:!0},onChange:e=>r(Number(e.target.value))},[.25,.5,.75,1,1.25,1.5,1.75,2].map((e=>c.createElement("option",{key:e,value:e},e))))}),c.createElement(F,null,null==e?void 0:e.ingredients.map((e=>c.createElement(C,{key:e.name},((e,t=1)=>{var n,a;if(1===t)return e;const[l=0]=null!=(n=e.match(/[0-9.]+/g))?n:[],[r=""]=null!=(a=e.match(/[a-zA-Z]+/g))?a:[];return`${Number(l)*t}${r}`})(e.amount,l)," ",e.name)))))),c.createElement(m,{mb:3,mt:3},c.createElement(u,null,c.createElement(p,{subheader:"Zubereitung"}),c.createElement(E,null,c.createElement(P,{style:{whiteSpace:"pre-wrap"}},null==e?void 0:e.description)))),c.createElement(g,{onClick:async()=>{await navigator.share({title:e.title,text:e.description})}},"teilen"," "))))},pe=()=>{const[e,t]=te("plan",{}),n=Object.values(e).filter((e=>e.isDone)),a=Object.values(e).filter((e=>!e.isDone));return{completedPlans:n,openPlans:a,clearPlans:()=>{t(a.reduce(((e,t)=>r(r({},e),{[t.recipe.title]:t})),{}))},addRecipe:n=>{const a=r(r({},e),{[n.title]:{isDone:!1,recipe:n}});t(a)},togglePlan:n=>{t(r(r({},e),{[n.recipe.title]:r(r({},n),{isDone:!n.isDone})}))}}},Ee=()=>{const{openPlans:e,completedPlans:t,clearPlans:n,togglePlan:a}=pe();return c.createElement(c.Fragment,null,c.createElement(P,{variant:"h5"},"Wir kochen"),c.createElement(m,{p:1}),0===e.length&&c.createElement(P,null,"Noch nichts :/"),e.map((e=>c.createElement(c.Fragment,null,c.createElement(ue,{key:e.recipe.title,recipe:e.recipe,action:c.createElement(g,{onClick:()=>{a(e)}},"Fertig gekocht")})))),c.createElement(m,{p:2}),t.length>0&&c.createElement(c.Fragment,null,c.createElement(P,{variant:"h5"},"Schon gekocht"),c.createElement(m,{p:1})),t.map((e=>c.createElement(c.Fragment,null,c.createElement(ue,{key:e.recipe.title,recipe:e.recipe})))),c.createElement(m,{p:2}),c.createElement(m,{display:"flex",justifyContent:"space-between"},c.createElement(g,{onClick:()=>{const t=e.reduce(((e,t)=>e.concat(t.recipe.ingredients)),[]);ae(t.map((e=>`${e.amount} ${e.name}`)))},color:"primary"},"Plan zur Einkaufsliste"),c.createElement(g,{onClick:n},"Plan löschen")))};const de=()=>async function(e){return fetch(e,{method:"GET"}).then((e=>e.json()))}("https://raw.githubusercontent.com/sanderdrummer/recipes-md/master/parsed-recipes.json"),ge=()=>{const{data:e,status:t,refetch:n}=(()=>{const[e,t]=c.useState("idle"),[n,a]=te("recipes-storage",[]),l=async()=>{t("fetching");try{const e=await de();a(e),t("done")}catch(e){t("error")}};return c.useEffect((()=>{l()}),[]),{status:e,data:n,refetch:l}})(),[a,l]=c.useState(null!=e?e:[]),[r,s]=c.useState(""),[i,o]=c.useState([]),m=(e=>{const t=e.reduce(((e,t)=>e.concat(t.tags)),[]);return Array.from(new Set(t))})(e);return c.useEffect((()=>{l(((e=[],{query:t,tags:n})=>((e,t)=>t.length?e.filter((e=>e.tags.some((e=>t.includes(e))))):e)(((e,t="")=>{if(!t)return e||[];const n=t.toLowerCase();return e.filter((e=>e.title.toLowerCase().includes(n)))})(e,t),n))(e,{query:r,tags:i}))}),[r,e,i]),{recipes:a,refetch:n,status:t,query:r,setQuery:s,tags:m,filterTags:i,setFilterTags:o}},he=s((e=>i({root:{position:"sticky",top:e.spacing(1),zIndex:1},scrollWrapper:{maxHeight:"60vh",overflow:"auto"},inputWrapper:{background:e.palette.background.paper,padding:"2px 4px",display:"flex",alignItems:"center"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}))),fe=({query:e,setQuery:t,tags:n,filterTags:a,setFilterTags:l})=>{const r=he(),[s,i]=c.useState(!1);return c.createElement(x,{className:r.root},c.createElement("div",{className:r.inputWrapper},c.createElement(O,{value:e,onChange:e=>t(e.target.value),className:r.input,placeholder:"was kochen ?"}),c.createElement(j,{type:"button",className:r.iconButton,"aria-label":"Suche löschen",onClick:()=>{t("")}},c.createElement(I,null)),c.createElement(L,{className:r.divider,orientation:"vertical"}),c.createElement(j,{type:"button",color:"primary",className:r.iconButton,onClick:()=>i((e=>!e))},s?c.createElement(N,null):c.createElement(T,null))),c.createElement(R,{in:s,mountOnEnter:!0,unmountOnExit:!0},c.createElement("div",{className:r.scrollWrapper},c.createElement(ke,{tags:n,filterTags:a,setFilterTags:l},c.createElement(j,{type:"button","aria-label":"tags zurücksetzen",onClick:()=>{i(!1),l([])}},c.createElement(I,null))))))},be=s((e=>({grid:{display:"inline-flex",alignContent:"center",alignItems:"center",padding:e.spacing(2),gap:e.spacing(2),flexWrap:"wrap"}}))),ke=({filterTags:e,setFilterTags:t,tags:n,children:a})=>{const l=be();return c.createElement("div",{className:l.grid},n.sort().map((n=>{const a=e.includes(n);return c.createElement(z,{key:n,color:"primary",variant:a?"default":"outlined",onClick:()=>{t(a?e=>e.filter((e=>e!==n)):e=>[n,...e])},label:n})})),a)},ye=()=>{const{addRecipe:e}=pe(),l=ge(),{recipes:s,status:i,refetch:o}=l,u=((e,l)=>{var r={};for(var c in e)t.call(e,c)&&l.indexOf(c)<0&&(r[c]=e[c]);if(null!=e&&n)for(var c of n(e))l.indexOf(c)<0&&a.call(e,c)&&(r[c]=e[c]);return r})(l,["recipes","status","refetch"]);return c.createElement(c.Fragment,null,c.createElement(fe,r({},u)),c.createElement(F,null,s.map((t=>c.createElement(ue,{key:t.title,recipe:t,action:c.createElement(g,{onClick:()=>e(t)},"zum Koch Plan")})))),"fetching"===i&&c.createElement(D,{"aria-label":"loading","data-testid":"loader"}),"error"===i&&c.createElement(m,null,"rezepte konnten nicht geladen werden",c.createElement(g,{onClick:()=>o()},"nochmal versuchen")))},ve=s((e=>i({nav:{marginTop:e.spacing(8),bottom:0,top:"auto"}}))),Ce=()=>{const e=ve(),[t,n]=W();return c.createElement(q,{position:"fixed",color:"primary",className:e.nav},c.createElement(B,{value:t,showLabels:!0},c.createElement(M,{onClick:()=>n("/"),value:"/",label:"Rezepte",icon:c.createElement(Y,null)}),c.createElement(M,{onClick:()=>n("/plan"),value:"/plan",label:"Plan",icon:c.createElement(A,null)}),c.createElement(M,{onClick:()=>n("/einkaufliste"),value:"/einkaufliste",label:"Liste",icon:c.createElement(J,null)})))},Se=()=>c.createElement($,{base:"/kochbuch"},c.createElement(_,null,c.createElement(K,{path:"/",component:ye}),c.createElement(K,{path:"/einkaufliste",component:me}),c.createElement(K,{path:"/plan",component:Ee}),c.createElement(U,{to:"/"})),c.createElement(Ce,null));function we(){const e=Q({palette:{primary:{main:"#00acc1"},secondary:{main:"#00bfa5"},type:"dark"}});return c.createElement(Z,{theme:e},c.createElement(G,null),c.createElement(H,null,c.createElement(m,{mt:2,mb:8},c.createElement(Se,null))))}V.render(c.createElement(we,null),document.getElementById("root"));
