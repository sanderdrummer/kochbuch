var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,l=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,r=(e,r)=>{for(var c in r||(r={}))t.call(r,c)&&l(e,c,r[c]);if(n)for(var c of n(r))a.call(r,c)&&l(e,c,r[c]);return e};import{r as c,m as s,c as i,F as o,B as m,C as u,a as p,b as E,T as d,d as g,S as f,D as h,A as b,e as k,f as y,g as v,L as C,h as S,i as w,j as L,k as F,l as P,P as j,I as x,n as I,o as O,p as T,q as N,s as D,R,t as z,u as $,v as _,w as B,x as K,y as q,z as M,M as U,E as Y,G as A,H as J,J as W,K as Z,N as G,O as Q}from"./vendor.6dcdb479.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,r)=>{const c=new URL(e,a);if(self[t].moduleMap[c])return n(self[t].moduleMap[c]);const s=new Blob([`import * as m from '${c}';`,`${t}.moduleMap['${c}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){r(new Error(`Failed to import: ${e}`)),l(i)},onload(){n(self[t].moduleMap[c]),l(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/kochbuch/assets/");const H=e=>{const t=localStorage.getItem(e);if(t)return JSON.parse(t)},V=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},X=(e,t)=>{const n=H(e),[a,l]=c.useState(null!=n?n:t);return c.useEffect((()=>{V(e,a)}),[e,a]),[a,l]},ee=()=>{const e=H("LIST_KEY");return e||{basket:[],list:[]}},te=e=>{const t=ee();t.list=[...t.list,...e],V("LIST_KEY",t)};let ne={list:[],basket:[]};const ae=s((e=>i({fab:{position:"fixed",bottom:e.spacing(8),right:e.spacing(2)}}))),le=({onClick:e,label:t,children:n,isLoading:a})=>{const l=ae();return c.createElement(o,{onClick:e,disabled:a,className:l.fab,color:"primary","aria-label":t},n)},re=({onCompleted:e})=>{const[t,n]=X("shoppingList","");return c.createElement(m,null,c.createElement(u,null,c.createElement(p,{title:"Einkaufsliste erweitern"}),c.createElement(E,null,c.createElement("form",{onSubmit:async a=>{a.preventDefault(),te(t.split("\n")),n(""),e()}},c.createElement(d,{autoFocus:!0,value:t,onChange:e=>n(e.target.value),multiline:!0,fullWidth:!0,name:"listItems",label:"Einkaufsliste",required:!0}),c.createElement(g,{type:"submit",startIcon:c.createElement(f,null)},"speichern")))))},ce=({onClearList:e})=>{const[t,n]=c.useState(!1),a=()=>n(!1);return c.createElement(c.Fragment,null,c.createElement(g,{onClick:()=>n(!0)},"Liste löschen"),c.createElement(k,{open:t,onClose:a,"aria-labelledby":"clear-list-dialog-title"},c.createElement(y,{id:"clear-list-dialog-title"},"Die Einkaufsliste leeren ?"),c.createElement(v,null,c.createElement(g,{onClick:a,color:"primary"},"nein"),c.createElement(g,{onClick:async()=>{try{(()=>{const e=ee();e.basket=[],V("LIST_KEY",e)})(),e(),a()}catch(t){console.log(t)}},color:"primary",autoFocus:!0},"ja"))))},se=({items:e,onSelect:t,isChecked:n,headline:a})=>0===e.length?null:c.createElement(u,null,c.createElement(p,{subheader:a}),c.createElement(E,null,e.map((e=>c.createElement(C,{button:!0,onClick:()=>{t(e)},key:e},c.createElement(S,null,e),c.createElement(w,{checked:n,inputProps:{"aria-label":`${e} ist im Einkaufswagen`}})))))),ie=()=>{const{list:e,fetchList:t}=(()=>{const[e,t]=c.useState(ne);return{list:e,fetchList:()=>{const e=ee();ne=e,t(e)}}})(),[n,a]=c.useState(!1);return c.useEffect((()=>{t()}),[]),c.createElement(c.Fragment,null,0===e.list.length&&0===e.basket.length&&c.createElement(m,{display:"flex",alignContent:"center",justifyContent:"center"},"Du hast noch nichts auf der Einkaufsliste"),c.createElement(se,{items:e.list,isChecked:!1,headline:"In den Einkaufswagen",onSelect:async e=>{(async e=>{const t=ee();t.list=t.list.filter((t=>t!==e)),t.basket.push(e),V("LIST_KEY",t)})(e),t()}}),c.createElement(m,{mt:3,mb:3}),c.createElement(se,{items:e.basket,isChecked:!0,headline:"Schon dabei",onSelect:async e=>{(e=>{const t=ee();t.basket=t.basket.filter((t=>t!==e)),t.list.push(e),V("LIST_KEY",t)})(e),t()}}),e.basket.length>0&&c.createElement(m,{mt:4},c.createElement(ce,{onClearList:t})),c.createElement(h,{anchor:"top",open:n,onClose:()=>a(!1)},c.createElement(re,{onCompleted:()=>{a(!1),t()}})),c.createElement(le,{onClick:()=>a(!0),label:"brauche sachen"},c.createElement(b,null)))},oe=({recipe:e,action:t})=>{const[n,a]=c.useState(!1),[l,r]=c.useState(1);return c.createElement(c.Fragment,null,!n&&c.createElement(c.Fragment,null,c.createElement(C,{selected:n,button:!0,onClick:()=>a((e=>!e)),key:e.title},c.createElement(S,{primary:e.title})),c.createElement(L,null)),n&&c.createElement(m,{mt:3},c.createElement(u,null,c.createElement(p,{title:c.createElement(g,{onClick:()=>a(!1)},null==e?void 0:e.title),action:t})),c.createElement(c.Fragment,null,c.createElement(m,{mt:3},c.createElement(u,null,c.createElement(p,{subheader:"Zutaten",action:c.createElement(d,{select:!0,value:l,SelectProps:{native:!0},onChange:e=>r(Number(e.target.value))},[.25,.5,.75,1,1.25,1.5,1.75,2].map((e=>c.createElement("option",{key:e,value:e},e))))}),c.createElement(F,null,null==e?void 0:e.ingredients.map((e=>c.createElement(C,{key:e.name},((e,t=1)=>{var n,a;if(1===t)return e;const[l=0]=null!=(n=e.match(/[0-9.]+/g))?n:[],[r=""]=null!=(a=e.match(/[a-zA-Z]+/g))?a:[];return`${Number(l)*t}${r}`})(e.amount,l)," ",e.name)))))),c.createElement(m,{mb:3,mt:3},c.createElement(u,null,c.createElement(p,{subheader:"Zubereitung"}),c.createElement(E,null,c.createElement(P,{style:{whiteSpace:"pre-wrap"}},null==e?void 0:e.description)))),c.createElement(g,{onClick:async()=>{await navigator.share({title:e.title,text:e.description})}},"teilen"," "))))},me=()=>{const[e,t]=X("plan",{}),n=Object.values(e).filter((e=>e.isDone)),a=Object.values(e).filter((e=>!e.isDone));return{completedPlans:n,openPlans:a,clearPlans:()=>{t(a.reduce(((e,t)=>r(r({},e),{[t.recipe.title]:t})),{}))},addRecipe:n=>{const a=r(r({},e),{[n.title]:{isDone:!1,recipe:n}});t(a)},togglePlan:n=>{t(r(r({},e),{[n.recipe.title]:r(r({},n),{isDone:!n.isDone})}))}}},ue=()=>{const{openPlans:e,completedPlans:t,clearPlans:n,togglePlan:a}=me();return c.createElement(c.Fragment,null,c.createElement(P,{variant:"h5"},"Wir kochen"),c.createElement(m,{p:1}),0===e.length&&c.createElement(P,null,"Noch nichts :/"),e.map((e=>c.createElement(c.Fragment,null,c.createElement(oe,{key:e.recipe.title,recipe:e.recipe,action:c.createElement(g,{onClick:()=>{a(e)}},"Fertig gekocht")})))),c.createElement(m,{p:2}),t.length>0&&c.createElement(c.Fragment,null,c.createElement(P,{variant:"h5"},"Schon gekocht"),c.createElement(m,{p:1})),t.map((e=>c.createElement(c.Fragment,null,c.createElement(oe,{key:e.recipe.title,recipe:e.recipe})))),c.createElement(m,{p:2}),c.createElement(m,{display:"flex",justifyContent:"space-between"},c.createElement(g,{onClick:()=>{const t=e.reduce(((e,t)=>e.concat(t.recipe.ingredients)),[]);te(t.map((e=>`${e.amount} ${e.name}`)))},color:"primary"},"Plan zur Einkaufsliste"),c.createElement(g,{onClick:n},"Plan löschen")))};const pe=()=>async function(e){return fetch(e,{method:"GET"}).then((e=>e.json()))}("https://raw.githubusercontent.com/sanderdrummer/recipes-md/master/parsed-recipes.json"),Ee=()=>{const{data:e,status:t,refetch:n}=(()=>{const[e,t]=c.useState("idle"),[n,a]=X("recipes-storage",[]),l=async()=>{t("fetching");try{const e=await pe();a(e),t("done")}catch(e){t("error")}};return c.useEffect((()=>{l()}),[]),{status:e,data:n,refetch:l}})(),[a,l]=c.useState(null!=e?e:[]),[r,s]=c.useState(""),[i,o]=c.useState([]),m=(e=>{const t=e.reduce(((e,t)=>e.concat(t.tags)),[]);return Array.from(new Set(t))})(e);return c.useEffect((()=>{l(((e=[],{query:t,tags:n})=>((e,t)=>t.length?e.filter((e=>e.tags.some((e=>t.includes(e))))):e)(((e,t="")=>{if(!t)return e||[];const n=t.toLowerCase();return e.filter((e=>e.title.toLowerCase().includes(n)))})(e,t),n))(e,{query:r,tags:i}))}),[r,e,i]),{recipes:a,refetch:n,status:t,query:r,setQuery:s,tags:m,filterTags:i,setFilterTags:o}},de=s((e=>i({root:{background:e.palette.background.paper,padding:"2px 4px",display:"flex",alignItems:"center",position:"sticky",top:e.spacing(1),zIndex:1},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}))),ge=({query:e,setQuery:t,tags:n,filterTags:a,setFilterTags:l})=>{const r=de(),[s,i]=c.useState(!1);return c.createElement(c.Fragment,null,c.createElement(j,{onSubmit:e=>{e.preventDefault()},component:"form",className:r.root},c.createElement(x,{value:e,onChange:e=>t(e.target.value),className:r.input,placeholder:"was kochen ?"}),c.createElement(I,{type:"button",className:r.iconButton,"aria-label":"Suche löschen",onClick:()=>{t("")}},c.createElement(O,null)),c.createElement(L,{className:r.divider,orientation:"vertical"}),c.createElement(I,{type:"button",color:"primary",className:r.iconButton,onClick:()=>i(!0)},c.createElement(T,null))),c.createElement(h,{anchor:"bottom",open:s,onClose:()=>i(!1)},c.createElement(he,{tags:n,filterTags:a,setFilterTags:l})))},fe=s((e=>({grid:{display:"inline-flex",alignContent:"center",alignItems:"center",padding:e.spacing(2),marginBottom:e.spacing(4),gap:e.spacing(2),flexWrap:"wrap"}}))),he=({filterTags:e,setFilterTags:t,tags:n})=>{const a=fe();return c.createElement("div",{className:a.grid},n.sort().map((n=>{const a=e.includes(n);return c.createElement(N,{key:n,color:"primary",variant:a?"default":"outlined",onClick:()=>{t(a?e=>e.filter((e=>e!==n)):e=>[n,...e])},label:n})})),c.createElement(I,{type:"button","aria-label":"tags zurücksetzen",onClick:()=>{t([])}},c.createElement(O,null)))},be=()=>{const{addRecipe:e}=me(),l=Ee(),{recipes:s,status:i,refetch:o}=l,u=((e,l)=>{var r={};for(var c in e)t.call(e,c)&&l.indexOf(c)<0&&(r[c]=e[c]);if(null!=e&&n)for(var c of n(e))l.indexOf(c)<0&&a.call(e,c)&&(r[c]=e[c]);return r})(l,["recipes","status","refetch"]);return c.createElement(c.Fragment,null,c.createElement(ge,r({},u)),c.createElement(F,null,s.map((t=>c.createElement(oe,{key:t.title,recipe:t,action:c.createElement(g,{onClick:()=>e(t)},"zum Koch Plan")})))),"fetching"===i&&c.createElement(D,{"aria-label":"loading","data-testid":"loader"}),"error"===i&&c.createElement(m,null,"rezepte konnten nicht geladen werden",c.createElement(g,{onClick:()=>o()},"nochmal versuchen")))},ke=s((e=>i({nav:{marginTop:e.spacing(8),bottom:0,top:"auto"}}))),ye=()=>{const e=ke(),[t,n]=B();return c.createElement(K,{position:"fixed",color:"primary",className:e.nav},c.createElement(q,{value:t,showLabels:!0},c.createElement(M,{onClick:()=>n("/"),value:"/",label:"Rezepte",icon:c.createElement(U,null)}),c.createElement(M,{onClick:()=>n("/plan"),value:"/plan",label:"Plan",icon:c.createElement(Y,null)}),c.createElement(M,{onClick:()=>n("/einkaufliste"),value:"/einkaufliste",label:"Liste",icon:c.createElement(A,null)})))},ve=()=>c.createElement(R,{base:"/kochbuch"},c.createElement(z,null,c.createElement($,{path:"/",component:be}),c.createElement($,{path:"/einkaufliste",component:ie}),c.createElement($,{path:"/plan",component:ue}),c.createElement(_,{to:"/"})),c.createElement(ye,null));function Ce(){const e=J({palette:{primary:{main:"#00acc1"},secondary:{main:"#00bfa5"},type:"dark"}});return c.createElement(W,{theme:e},c.createElement(Z,null),c.createElement(G,null,c.createElement(m,{mt:2,mb:8},c.createElement(ve,null))))}Q.render(c.createElement(Ce,null),document.getElementById("root"));
