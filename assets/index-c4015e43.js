(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const ee={};function Gi(e){ee.context=e}const Ji=(e,t)=>e===t,Vt=Symbol("solid-proxy"),Zi=Symbol("solid-track"),Ht={equals:Ji};let Wr=Jr;const Se=1,Ut=2,qr={owned:null,cleanups:null,context:null,owner:null},gn={};var F=null;let Oe=null,z=null,J=null,we=null,er=0;function st(e,t){const n=z,r=F,i=e.length===0,o=i?qr:{owned:null,cleanups:null,context:null,owner:t||r},a=i?e:()=>e(()=>ce(()=>an(o)));F=o,z=null;try{return xe(a,!0)}finally{z=n,F=r}}function ne(e,t){t=t?Object.assign({},Ht,t):Ht;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Gr(n,i));return[Xr.bind(n),r]}function Ar(e,t,n){const r=on(e,t,!0,Se);Ge(r)}function U(e,t,n){const r=on(e,t,!1,Se);Ge(r)}function eo(e,t,n){Wr=so;const r=on(e,t,!1,Se);r.user=!0,we?we.push(r):Ge(r)}function L(e,t,n){n=n?Object.assign({},Ht,n):Ht;const r=on(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ge(r),Xr.bind(r)}function bt(e,t,n){let r,i,o;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,i=e,o=t||{}):(r=e,i=t,o=n||{});let a=null,s=gn,u=null,l=!1,c="initialValue"in o,f=typeof r=="function"&&L(r);const h=new Set,[y,d]=(o.storage||ne)(o.initialValue),[p,m]=ne(void 0),[_,w]=ne(void 0,{equals:!1}),[b,g]=ne(c?"ready":"unresolved");if(ee.context){u=`${ee.context.id}${ee.context.count++}`;let k;o.ssrLoadFrom==="initial"?s=o.initialValue:ee.load&&(k=ee.load(u))&&(s=k[0])}function v(k,E,C,K){return a===k&&(a=null,c=!0,(k===s||E===s)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(K,{value:E})),s=gn,x(E,C)),E}function x(k,E){xe(()=>{E||d(()=>k),g(E?"errored":"ready"),m(E);for(const C of h.keys())C.decrement();h.clear()},!1)}function R(){const k=io,E=y(),C=p();if(C&&!a)throw C;return z&&!z.user&&k&&Ar(()=>{_(),a&&(k.resolved||h.has(k)||(k.increment(),h.add(k)))}),E}function A(k=!0){if(k!==!1&&l)return;l=!1;const E=f?f():r;if(E==null||E===!1){v(a,ce(y));return}const C=s!==gn?s:ce(()=>i(E,{value:y(),refetching:k}));return typeof C!="object"||!(C&&"then"in C)?(v(a,C,void 0,E),C):(a=C,l=!0,queueMicrotask(()=>l=!1),xe(()=>{g(c?"refreshing":"pending"),w()},!1),C.then(K=>v(C,K,void 0,E),K=>v(C,void 0,ei(K),E)))}return Object.defineProperties(R,{state:{get:()=>b()},error:{get:()=>p()},loading:{get(){const k=b();return k==="pending"||k==="refreshing"}},latest:{get(){if(!c)return R();const k=p();if(k&&!a)throw k;return y()}}}),f?Ar(()=>A(!1)):A(!1),[R,{refetch:A,mutate:d}]}function ce(e){const t=z;z=null;try{return e()}finally{z=t}}function Yr(e,t,n){const r=Array.isArray(e);let i,o=n&&n.defer;return a=>{let s;if(r){s=Array(e.length);for(let l=0;l<e.length;l++)s[l]=e[l]()}else s=e();if(o){o=!1;return}const u=ce(()=>t(s,i,a));return i=s,u}}function tr(e){return F===null||(F.cleanups===null?F.cleanups=[e]:F.cleanups.push(e)),e}function to(){return F}function no(e,t){const n=F;F=e;try{return xe(t,!0)}catch(r){ir(r)}finally{F=n}}function ro(e){const t=z,n=F;return Promise.resolve().then(()=>{z=t,F=n;let r;return xe(e,!1),z=F=null,r?r.done:void 0})}function Qr(e,t){const n=Symbol("context");return{id:n,Provider:uo(n),defaultValue:e}}function nr(e){let t;return(t=ti(F,e.id))!==void 0?t:e.defaultValue}function rr(e){const t=L(e),n=L(()=>Cn(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let io;function Xr(){const e=Oe;if(this.sources&&(this.state||e))if(this.state===Se||e)Ge(this);else{const t=J;J=null,xe(()=>qt(this),!1),J=t}if(z){const t=this.observers?this.observers.length:0;z.sources?(z.sources.push(this),z.sourceSlots.push(t)):(z.sources=[this],z.sourceSlots=[t]),this.observers?(this.observers.push(z),this.observerSlots.push(z.sources.length-1)):(this.observers=[z],this.observerSlots=[z.sources.length-1])}return this.value}function Gr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&xe(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],a=Oe&&Oe.running;a&&Oe.disposed.has(o),(a&&!o.tState||!a&&!o.state)&&(o.pure?J.push(o):we.push(o),o.observers&&Zr(o)),a||(o.state=Se)}if(J.length>1e6)throw J=[],new Error},!1)),t}function Ge(e){if(!e.fn)return;an(e);const t=F,n=z,r=er;z=F=e,oo(e,e.value,r),z=n,F=t}function oo(e,t,n){let r;try{r=e.fn(t)}catch(i){e.pure&&(e.state=Se,e.owned&&e.owned.forEach(an),e.owned=null),ir(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Gr(e,r):e.value=r,e.updatedAt=n)}function on(e,t,n,r=Se,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:F,context:null,pure:n};return F===null||F!==qr&&(F.owned?F.owned.push(o):F.owned=[o]),o}function Wt(e){const t=Oe;if(e.state===0||t)return;if(e.state===Ut||t)return qt(e);if(e.suspense&&ce(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<er);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===Se||t)Ge(e);else if(e.state===Ut||t){const i=J;J=null,xe(()=>qt(e,n[0]),!1),J=i}}function xe(e,t){if(J)return e();let n=!1;t||(J=[]),we?n=!0:we=[],er++;try{const r=e();return ao(n),r}catch(r){J||(we=null),ir(r)}}function ao(e){if(J&&(Jr(J),J=null),e)return;const t=we;we=null,t.length&&xe(()=>Wr(t),!1)}function Jr(e){for(let t=0;t<e.length;t++)Wt(e[t])}function so(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Wt(r)}for(ee.context&&Gi(),t=0;t<n;t++)Wt(e[t])}function qt(e,t){const n=Oe;e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];i.sources&&(i.state===Se||n?i!==t&&Wt(i):(i.state===Ut||n)&&qt(i,t))}}function Zr(e){const t=Oe;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=Ut,r.pure?J.push(r):we.push(r),r.observers&&Zr(r))}}function an(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),a=n.observerSlots.pop();r<i.length&&(o.sourceSlots[a]=r,i[r]=o,n.observerSlots[r]=a)}}if(e.owned){for(t=0;t<e.owned.length;t++)an(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function ei(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function ir(e){throw e=ei(e),e}function ti(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:ti(e.owner,t):void 0}function Cn(e){if(typeof e=="function"&&!e.length)return Cn(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Cn(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function uo(e,t){return function(r){let i;return U(()=>i=ce(()=>(F.context={[e]:r.value},rr(()=>r.children))),void 0),i}}const lo=Symbol("fallback");function Sr(e){for(let t=0;t<e.length;t++)e[t]()}function co(e,t,n={}){let r=[],i=[],o=[],a=0,s=t.length>1?[]:null;return tr(()=>Sr(o)),()=>{let u=e()||[],l,c;return u[Zi],ce(()=>{let h=u.length,y,d,p,m,_,w,b,g,v;if(h===0)a!==0&&(Sr(o),o=[],r=[],i=[],a=0,s&&(s=[])),n.fallback&&(r=[lo],i[0]=st(x=>(o[0]=x,n.fallback())),a=1);else if(a===0){for(i=new Array(h),c=0;c<h;c++)r[c]=u[c],i[c]=st(f);a=h}else{for(p=new Array(h),m=new Array(h),s&&(_=new Array(h)),w=0,b=Math.min(a,h);w<b&&r[w]===u[w];w++);for(b=a-1,g=h-1;b>=w&&g>=w&&r[b]===u[g];b--,g--)p[g]=i[b],m[g]=o[b],s&&(_[g]=s[b]);for(y=new Map,d=new Array(g+1),c=g;c>=w;c--)v=u[c],l=y.get(v),d[c]=l===void 0?-1:l,y.set(v,c);for(l=w;l<=b;l++)v=r[l],c=y.get(v),c!==void 0&&c!==-1?(p[c]=i[l],m[c]=o[l],s&&(_[c]=s[l]),c=d[c],y.set(v,c)):o[l]();for(c=w;c<h;c++)c in p?(i[c]=p[c],o[c]=m[c],s&&(s[c]=_[c],s[c](c))):i[c]=st(f);i=i.slice(0,a=h),r=u.slice(0)}return i});function f(h){if(o[c]=h,s){const[y,d]=ne(c);return s[c]=d,t(u[c],y)}return t(u[c])}}}function S(e,t){return ce(()=>e(t||{}))}function Rt(){return!0}const kn={get(e,t,n){return t===Vt?n:e.get(t)},has(e,t){return t===Vt?!0:e.has(t)},set:Rt,deleteProperty:Rt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Rt,deleteProperty:Rt}},ownKeys(e){return e.keys()}};function mn(e){return(e=typeof e=="function"?e():e)?e:{}}function Pn(...e){let t=!1;for(let r=0;r<e.length;r++){const i=e[r];t=t||!!i&&Vt in i,e[r]=typeof i=="function"?(t=!0,L(i)):i}if(t)return new Proxy({get(r){for(let i=e.length-1;i>=0;i--){const o=mn(e[i])[r];if(o!==void 0)return o}},has(r){for(let i=e.length-1;i>=0;i--)if(r in mn(e[i]))return!0;return!1},keys(){const r=[];for(let i=0;i<e.length;i++)r.push(...Object.keys(mn(e[i])));return[...new Set(r)]}},kn);const n={};for(let r=e.length-1;r>=0;r--)if(e[r]){const i=Object.getOwnPropertyDescriptors(e[r]);for(const o in i)o in n||Object.defineProperty(n,o,{enumerable:!0,get(){for(let a=e.length-1;a>=0;a--){const s=(e[a]||{})[o];if(s!==void 0)return s}}})}return n}function fo(e,...t){const n=new Set(t.flat());if(Vt in e){const i=t.map(o=>new Proxy({get(a){return o.includes(a)?e[a]:void 0},has(a){return o.includes(a)&&a in e},keys(){return o.filter(a=>a in e)}},kn));return i.push(new Proxy({get(o){return n.has(o)?void 0:e[o]},has(o){return n.has(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!n.has(o))}},kn)),i}const r=Object.getOwnPropertyDescriptors(e);return t.push(Object.keys(r).filter(i=>!n.has(i))),t.map(i=>{const o={};for(let a=0;a<i.length;a++){const s=i[a];s in e&&Object.defineProperty(o,s,r[s]?r[s]:{get(){return e[s]},set(){return!0},enumerable:!0})}return o})}function Yt(e){const t="fallback"in e&&{fallback:()=>e.fallback};return L(co(()=>e.each,e.children,t||void 0))}function ni(e){let t=!1;const n=e.keyed,r=L(()=>e.when,void 0,{equals:(i,o)=>t?i===o:!i==!o});return L(()=>{const i=r();if(i){const o=e.children,a=typeof o=="function"&&o.length>0;return t=n||a,a?ce(()=>o(i)):o}return e.fallback},void 0,void 0)}const ho=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],po=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...ho]),vo=new Set(["innerHTML","textContent","innerText","children"]),yo=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Cr=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),go=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),mo={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function bo(e,t,n){let r=n.length,i=t.length,o=r,a=0,s=0,u=t[i-1].nextSibling,l=null;for(;a<i||s<o;){if(t[a]===n[s]){a++,s++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===a){const c=o<r?s?n[s-1].nextSibling:n[o-s]:u;for(;s<o;)e.insertBefore(n[s++],c)}else if(o===s)for(;a<i;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[o-1]&&n[s]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[s++],t[a++].nextSibling),e.insertBefore(n[--o],c),t[i]=n[o]}else{if(!l){l=new Map;let f=s;for(;f<o;)l.set(n[f],f++)}const c=l.get(t[a]);if(c!=null)if(s<c&&c<o){let f=a,h=1,y;for(;++f<i&&f<o&&!((y=l.get(t[f]))==null||y!==c+h);)h++;if(h>c-s){const d=t[a];for(;s<c;)e.insertBefore(n[s++],d)}else e.replaceChild(n[s++],t[a++])}else a++;else t[a++].remove()}}}const kr="_$DX_DELEGATE";function wo(e,t,n,r={}){let i;return st(o=>{i=o,t===document?e():$(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function M(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function wt(e,t=window.document){const n=t[kr]||(t[kr]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,Po))}}function je(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function _o(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function Je(e,t){t==null?e.removeAttribute("class"):e.className=t}function xo(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n)}function Eo(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,a;for(o=0,a=i.length;o<a;o++){const s=i[o];!s||s==="undefined"||t[s]||(Pr(e,s,!1),delete n[s])}for(o=0,a=r.length;o<a;o++){const s=r[o],u=!!t[s];!s||s==="undefined"||n[s]===u||!u||(Pr(e,s,!0),n[s]=u)}return n}function Ao(e,t,n){if(!t)return n?je(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function So(e,t={},n,r){const i={};return r||U(()=>i.children=Qe(e,t.children,i.children)),U(()=>t.ref&&t.ref(e)),U(()=>Co(e,t,n,!0,i,!0)),i}function $(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Qe(e,t,r,n);U(i=>Qe(e,t(),i,n),r)}function Co(e,t,n,r,i={},o=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=Rr(e,a,null,i[a],n,o)}for(const a in t){if(a==="children"){r||Qe(e,t.children);continue}const s=t[a];i[a]=Rr(e,a,s,i[a],n,o)}}function ko(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Pr(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function Rr(e,t,n,r,i,o){let a,s,u;if(t==="style")return Ao(e,n,r);if(t==="classList")return Eo(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const l=t.slice(3);r&&e.removeEventListener(l,r),n&&e.addEventListener(l,n)}else if(t.slice(0,10)==="oncapture:"){const l=t.slice(10);r&&e.removeEventListener(l,r,!0),n&&e.addEventListener(l,n,!0)}else if(t.slice(0,2)==="on"){const l=t.slice(2).toLowerCase(),c=go.has(l);if(!c&&r){const f=Array.isArray(r)?r[0]:r;e.removeEventListener(l,f)}(c||n)&&(xo(e,l,n,c),c&&wt([l]))}else if((u=vo.has(t))||!i&&(Cr[t]||(s=po.has(t)))||(a=e.nodeName.includes("-")))t==="class"||t==="className"?Je(e,n):a&&!s&&!u?e[ko(t)]=n:e[Cr[t]||t]=n;else{const l=i&&t.indexOf(":")>-1&&mo[t.split(":")[0]];l?_o(e,l,t,n):je(e,yo[t]||t,n)}return n}function Po(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),ee.registry&&!ee.done&&(ee.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>{for(;r&&r.nodeType!==8&&r.nodeValue!=="pl-"+e;){let i=r.nextSibling;r.remove(),r=i}r&&r.remove()}));n;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Qe(e,t,n,r,i){for(ee.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(ee.context)return n;if(o==="number"&&(t=t.toString()),a){let s=n[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),n=He(e,n,r,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(ee.context)return n;n=He(e,n,r)}else{if(o==="function")return U(()=>{let s=t();for(;typeof s=="function";)s=s();n=Qe(e,s,n,r)}),()=>n;if(Array.isArray(t)){const s=[],u=n&&Array.isArray(n);if(Rn(s,t,n,i))return U(()=>n=Qe(e,s,n,r,!0)),()=>n;if(ee.context){if(!s.length)return n;for(let l=0;l<s.length;l++)if(s[l].parentNode)return n=s}if(s.length===0){if(n=He(e,n,r),a)return n}else u?n.length===0?Tr(e,s,r):bo(e,n,s):(n&&He(e),Tr(e,s));n=s}else if(t instanceof Node){if(ee.context&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=He(e,n,r,t);He(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Rn(e,t,n,r){let i=!1;for(let o=0,a=t.length;o<a;o++){let s=t[o],u=n&&n[o];if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))i=Rn(e,s,u)||i;else if(typeof s=="function")if(r){for(;typeof s=="function";)s=s();i=Rn(e,Array.isArray(s)?s:[s],Array.isArray(u)?u:[u])||i}else e.push(s),i=!0;else{const l=String(s);u&&u.nodeType===3&&u.data===l?e.push(u):e.push(document.createTextNode(l))}}return i}function Tr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function He(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const s=t[a];if(i!==s){const u=s.parentNode===e;!o&&!a?u?e.replaceChild(i,s):e.insertBefore(i,n):u&&s.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}const Ro=!1;function ri(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function To([e,t],n,r){return[n?()=>n(e()):e,r?i=>t(r(i)):t]}function Ko(e){try{return document.querySelector(e)}catch{return null}}function ii(e,t){const n=Ko(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function oi(e,t,n,r){let i=!1;const o=s=>typeof s=="string"?{value:s}:s,a=To(ne(o(e()),{equals:(s,u)=>s.value===u.value}),void 0,s=>(!i&&t(s),s));return n&&tr(n((s=e())=>{i=!0,a[1](o(s)),i=!1})),{signal:a,utils:r}}function Io(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:ne({value:""})};return e}function Do(){return oi(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"",e):window.history.pushState(r,"",e),ii(window.location.hash.slice(1),n)},e=>ri(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}function $o(){return oi(()=>window.location.hash.slice(1),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"","#"+e):window.location.hash=e;const i=e.indexOf("#"),o=i>=0?e.slice(i+1):"";ii(o,n)},e=>ri(window,"hashchange",()=>e()),{go:e=>window.history.go(e),renderPath:e=>`#${e}`,parsePath:e=>{const t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,n="/"]=window.location.hash.split("#",2);return`${n}#${t}`}return t}})}function Oo(){let e=new Set;function t(i){return e.add(i),()=>e.delete(i)}let n=!1;function r(i,o){if(n)return!(n=!1);const a={to:i,options:o,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const s of e)s.listener({...a,from:s.location,retry:u=>{u&&(n=!0),s.navigate(i,o)}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}const Bo=/^(?:[a-z0-9]+:)?\/\//i,Mo=/^\/+|\/+$/g;function Be(e,t=!1){const n=e.replace(Mo,"");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Ot(e,t,n){if(Bo.test(t))return;const r=Be(e),i=n&&Be(n);let o="";return!i||t.startsWith("/")?o=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+i:o=i,(o||"/")+Be(t,!o)}function No(e,t){if(e==null)throw new Error(t);return e}function ai(e,t){return Be(e).replace(/\/*(\*.*)?$/g,"")+Be(t)}function Lo(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function Bt(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function Fo(e,t){const[n,r]=e.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const s=a.split("/").filter(Boolean),u=s.length-o;if(u<0||u>0&&r===void 0&&!t)return null;const l={path:o?"":"/",params:{}};for(let c=0;c<o;c++){const f=i[c],h=s[c];if(f[0]===":")l.params[f.slice(1)]=h;else if(f.localeCompare(h,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${h}`}return r&&(l.params[r]=u?s.slice(-u).join("/"):""),l}}function jo(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,o)=>i+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function si(e){const t=new Map,n=to();return new Proxy({},{get(r,i){return t.has(i)||no(n,()=>t.set(i,L(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function ui(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return ui(r).reduce((o,a)=>[...o,...i.map(s=>s+a)],[])}const zo=100,li=Qr(),sn=Qr(),_t=()=>No(nr(li),"Make sure your app is wrapped in a <Router />");let ft;const un=()=>ft||nr(sn)||_t().base,Vo=e=>{const t=un();return L(()=>t.resolvePath(e()))},Ho=e=>{const t=_t();return L(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},or=()=>_t().navigatorFactory(),ci=()=>_t().location,fi=()=>un().params;function Uo(e,t="",n){const{component:r,data:i,children:o}=e,a=!o||Array.isArray(o)&&!o.length,s={key:e,element:r?()=>S(r,{}):()=>{const{element:u}=e;return u===void 0&&n?S(n,{}):u},preload:e.component?r.preload:e.preload,data:i};return hi(e.path).reduce((u,l)=>{for(const c of ui(l)){const f=ai(t,c),h=a?f:f.split("/*",1)[0];u.push({...s,originalPath:c,pattern:h,matcher:Fo(h,!a)})}return u},[])}function Wo(e,t=0){return{routes:e,score:jo(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const o=e[i],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function hi(e){return Array.isArray(e)?e:[e]}function di(e,t="",n,r=[],i=[]){const o=hi(e);for(let a=0,s=o.length;a<s;a++){const u=o[a];if(u&&typeof u=="object"&&u.hasOwnProperty("path")){const l=Uo(u,t,n);for(const c of l){r.push(c);const f=Array.isArray(u.children)&&u.children.length===0;if(u.children&&!f)di(u.children,c.pattern,n,r,i);else{const h=Wo([...r],i.length);i.push(h)}r.pop()}}}return r.length?i:i.sort((a,s)=>s.score-a.score)}function qo(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Yo(e,t){const n=new URL("http://sar"),r=L(u=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),u}},n,{equals:(u,l)=>u.href===l.href}),i=L(()=>Bt(r().pathname)),o=L(()=>Bt(r().search,!0)),a=L(()=>Bt(r().hash)),s=L(()=>"");return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return s()},query:si(Yr(o,()=>Lo(r())))}}function Qo(e,t="",n,r){const{signal:[i,o],utils:a={}}=Io(e),s=a.parsePath||(E=>E),u=a.renderPath||(E=>E),l=a.beforeLeave||Oo(),c=Ot("",t),f=void 0;if(c===void 0)throw new Error(`${c} is not a valid base path`);c&&!i().value&&o({value:c,replace:!0,scroll:!1});const[h,y]=ne(!1),d=async E=>{y(!0);try{await ro(E)}finally{y(!1)}},[p,m]=ne(i().value),[_,w]=ne(i().state),b=Yo(p,_),g=[],v={pattern:c,params:{},path:()=>c,outlet:()=>null,resolvePath(E){return Ot(c,E)}};if(n)try{ft=v,v.data=n({data:void 0,params:{},location:b,navigate:R(v)})}finally{ft=void 0}function x(E,C,K){ce(()=>{if(typeof C=="number"){C&&(a.go?l.confirm(C,K)&&a.go(C):console.warn("Router integration does not support relative routing"));return}const{replace:O,resolve:H,scroll:I,state:q}={replace:!1,resolve:!0,scroll:!0,...K},Y=H?E.resolvePath(C):Ot("",C);if(Y===void 0)throw new Error(`Path '${C}' is not a routable path`);if(g.length>=zo)throw new Error("Too many redirects");const ie=p();if((Y!==ie||q!==_())&&!Ro){if(l.confirm(Y,K)){const Z=g.push({value:ie,replace:O,scroll:I,state:_()});d(()=>{m(Y),w(q)}).then(()=>{g.length===Z&&A({value:Y,state:q})})}}})}function R(E){return E=E||nr(sn)||v,(C,K)=>x(E,C,K)}function A(E){const C=g[0];C&&((E.value!==C.value||E.state!==C.state)&&o({...E,replace:C.replace,scroll:C.scroll}),g.length=0)}U(()=>{const{value:E,state:C}=i();ce(()=>{E!==p()&&d(()=>{m(E),w(C)})})});{let E=function(C){if(C.defaultPrevented||C.button!==0||C.metaKey||C.altKey||C.ctrlKey||C.shiftKey)return;const K=C.composedPath().find(Z=>Z instanceof Node&&Z.nodeName.toUpperCase()==="A");if(!K||!K.hasAttribute("link"))return;const O=K.href;if(K.target||!O&&!K.hasAttribute("state"))return;const H=(K.getAttribute("rel")||"").split(/\s+/);if(K.hasAttribute("download")||H&&H.includes("external"))return;const I=new URL(O),q=Bt(I.pathname);if(I.origin!==window.location.origin||c&&q&&!q.toLowerCase().startsWith(c.toLowerCase()))return;const Y=s(I.pathname+I.search+I.hash),ie=K.getAttribute("state");C.preventDefault(),x(v,Y,{resolve:!1,replace:K.hasAttribute("replace"),scroll:!K.hasAttribute("noscroll"),state:ie&&JSON.parse(ie)})};var k=E;wt(["click"]),document.addEventListener("click",E),tr(()=>document.removeEventListener("click",E))}return{base:v,out:f,location:b,isRouting:h,renderPath:u,parsePath:s,navigatorFactory:R,beforeLeave:l}}function Xo(e,t,n,r){const{base:i,location:o,navigatorFactory:a}=e,{pattern:s,element:u,preload:l,data:c}=r().route,f=L(()=>r().path),h=si(()=>r().params);l&&l();const y={parent:t,pattern:s,get child(){return n()},path:f,params:h,data:t.data,outlet:u,resolvePath(d){return Ot(i.path(),d,f())}};if(c)try{ft=y,y.data=c({data:t.data,params:h,location:o,navigate:a(y)})}finally{ft=void 0}return y}const Go=M("<a link></a>"),Jo=e=>{const{source:t,url:n,base:r,data:i,out:o}=e,a=t||Do(),s=Qo(a,r,i);return S(li.Provider,{value:s,get children(){return e.children}})},Zo=e=>{const t=_t(),n=un(),r=rr(()=>e.children),i=L(()=>di(r(),ai(n.pattern,e.base||""),ea)),o=L(()=>qo(i(),t.location.pathname));t.out&&t.out.matches.push(o().map(({route:l,path:c,params:f})=>({originalPath:l.originalPath,pattern:l.pattern,path:c,params:f})));const a=[];let s;const u=L(Yr(o,(l,c,f)=>{let h=c&&l.length===c.length;const y=[];for(let d=0,p=l.length;d<p;d++){const m=c&&c[d],_=l[d];f&&m&&_.route.key===m.route.key?y[d]=f[d]:(h=!1,a[d]&&a[d](),st(w=>{a[d]=w,y[d]=Xo(t,y[d-1]||n,()=>u()[d+1],()=>o()[d])}))}return a.splice(l.length).forEach(d=>d()),f&&h?f:(s=y[0],y)}));return S(ni,{get when(){return u()&&s},children:l=>S(sn.Provider,{value:l,get children(){return l.outlet()}})})},he=e=>{const t=rr(()=>e.children);return Pn(e,{get children(){return t()}})},ea=()=>{const e=un();return S(ni,{get when(){return e.child},children:t=>S(sn.Provider,{value:t,get children(){return t.outlet()}})})};function ar(e){e=Pn({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=fo(e,["href","state","class","activeClass","inactiveClass","end"]),n=Vo(()=>e.href),r=Ho(n),i=ci(),o=L(()=>{const a=n();if(a===void 0)return!1;const s=Be(a.split(/[?#]/,1)[0]).toLowerCase(),u=Be(i.pathname).toLowerCase();return e.end?s===u:u.startsWith(s)});return(()=>{const a=Go.cloneNode(!0);return So(a,Pn(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!o(),[e.activeClass]:o(),...t.classList}},get["aria-current"](){return o()?"page":void 0}}),!1,!1),a})()}function ta(e){const t=or(),n=ci(),{href:r,state:i}=e,o=typeof r=="function"?r({navigate:t,location:n}):r;return t(o,{replace:!0,state:i}),null}const na=M("<h1></h1>"),ln=e=>(()=>{const t=na.cloneNode(!0);return $(t,()=>e.children),U(()=>Je(t,`${e.class??""} font-bold text-3xl mb-10 mt-4`)),t})(),ra=M('<nav class="w-full bg-stone-50 dark:bg-stone-700 sticky bottom-0 left-0 right-0"><div></div></nav>'),ia=e=>(()=>{const t=ra.cloneNode(!0),n=t.firstChild;return $(n,()=>e.children),U(()=>Je(n,`p-2 pb-4 grid justify-center gap-8 grid-flow-col ${e.class??""}`)),t})(),oa=M('<div class="w-8"></div>'),aa=M("<div></div>"),sr=e=>S(ar,{class:"font-extralight grid min-w-min align-items-center justify-items-center fill-stone-500 hover:fill-stone-300 text-stone-500 hover:text-stone-300",activeClass:"text-stone-300 fill-stone-300",get href(){return e.href},get children(){return[(()=>{const t=oa.cloneNode(!0);return $(t,()=>e.icon),t})(),(()=>{const t=aa.cloneNode(!0);return $(t,()=>e.label),t})()]}}),sa=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>'),ua=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>'),la=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg>'),ca=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>'),fa=M('<svg class="animate-spin h-5 w-5 text-stone-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),ha=e=>(()=>{const t=sa.cloneNode(!0);return U(()=>je(t,"class",e.class)),t})(),cn=e=>(()=>{const t=ua.cloneNode(!0);return U(()=>je(t,"class",e.class)),t})(),da=e=>(()=>{const t=la.cloneNode(!0);return U(()=>je(t,"class",e.class)),t})(),pa=e=>(()=>{const t=ca.cloneNode(!0);return U(()=>je(t,"class",e.class)),t})(),va=()=>fa.cloneNode(!0),ya=M('<label class="w-full block relative"><span class="sr-only"></span><span class="absolute inset-y-0 left-0 flex items-center pl-2"></span><input class="font-extralight rounded block px-9 py-2 w-full placeholder-stone-500 border-stone-800 text-stone-400 bg-stone-800 shadow shadow-lg focus:outline-none focus:border-stone-400 focus:ring-stone-400 focus:ring-1" type="text"></label>'),ga=M('<span class="absolute inset-y-0 right-0 flex items-center pr-2"></span>'),ma=e=>(()=>{const t=ya.cloneNode(!0),n=t.firstChild,r=n.nextSibling,i=r.nextSibling;return $(n,()=>e.placeholder??"Suche"),$(r,S(ha,{class:"h-5 w-5 fill-stone-300"})),i.$$input=o=>e.setQuery(o.currentTarget.value),$(t,(()=>{const o=L(()=>e.query.length>0);return()=>o()&&(()=>{const a=ga.cloneNode(!0);return a.$$click=()=>e.setQuery(""),$(a,S(pa,{class:"h-5 w-5 fill-stone-300"})),a})()})(),null),U(()=>je(i,"placeholder",e.placeholder)),U(()=>i.value=e.query),t})();wt(["input","click"]);const pi=M("<div></div>"),fn=e=>(()=>{const t=pi.cloneNode(!0);return $(t,()=>e.children),U(()=>Je(t,`min-h-screen ${(e==null?void 0:e.class)??""}`)),t})(),ba=e=>(()=>{const t=pi.cloneNode(!0);return $(t,()=>e.children),U(n=>{const r=e.open?"block":"none",i=`${e.class??""} transition transition-opacity ${e.open?"opacity-100":"opacity-0"} shadow bg-stone-700 text-stone-400 font-normal fixed top-5 right-5 p-5 rounded`;return r!==n._v$&&t.style.setProperty("display",n._v$=r),i!==n._v$2&&Je(t,n._v$2=i),n},{_v$:void 0,_v$2:void 0}),t})(),wa=M('<button type="button"><span class="fill-stone-400 h-5 w-5"></span></button>'),Ze=e=>{const[t,n]=ne(!1),[r,i]=ne(!1);return[L((()=>{const o=L(()=>!!e.message);return()=>o()&&S(ba,{get open(){return r()},get children(){return e.message}})})()),(()=>{const o=wa.cloneNode(!0),a=o.firstChild;return o.$$click=()=>{i(!1),n(!0),e.onClick().then(()=>{i(!0)}).finally(()=>{n(!1),setTimeout(()=>{i(!1)},2500)})},$(a,(()=>{const s=L(()=>!!t());return()=>s()?S(va,{}):e.icon})()),$(o,()=>e.label,null),U(s=>{const u=`p-3 pl-0 grid font-normal text-stone-400 gap-2 grid-flow-col content-center items-center ${e.class??""}`,l=e.disabled||t();return u!==s._v$&&Je(o,s._v$=u),l!==s._v$2&&(o.disabled=s._v$2=l),s},{_v$:void 0,_v$2:void 0}),o})()]};wt(["click"]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B=function(){return B=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},B.apply(this,arguments)};function Tn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var j=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,W=Object.keys,G=Array.isArray;typeof Promise<"u"&&!j.Promise&&(j.Promise=Promise);function re(e,t){return typeof t!="object"||W(t).forEach(function(n){e[n]=t[n]}),e}var ht=Object.getPrototypeOf,_a={}.hasOwnProperty;function ae(e,t){return _a.call(e,t)}function Xe(e,t){typeof t=="function"&&(t=t(ht(e))),(typeof Reflect>"u"?W:Reflect.ownKeys)(t).forEach(function(n){Ee(e,n,t[n])})}var vi=Object.defineProperty;function Ee(e,t,n,r){vi(e,t,re(n&&ae(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function et(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Ee(e.prototype,"constructor",e),{extend:Xe.bind(null,e.prototype)}}}}var xa=Object.getOwnPropertyDescriptor;function ur(e,t){var n=xa(e,t),r;return n||(r=ht(e))&&ur(r,t)}var Ea=[].slice;function hn(e,t,n){return Ea.call(e,t,n)}function yi(e,t){return t(e)}function ot(e){if(!e)throw new Error("Assertion Failed")}function gi(e){j.setImmediate?setImmediate(e):setTimeout(e,0)}function mi(e,t){return e.reduce(function(n,r,i){var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Aa(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function _e(e,t){if(ae(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=_e(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(a!==-1){var s=e[t.substr(0,a)];return s===void 0?void 0:_e(s,t.substr(a+1))}}function le(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ot(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)le(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),s=t.substr(o+1);if(s==="")n===void 0?G(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];(!u||!ae(e,a))&&(u=e[a]={}),le(u,s,n)}}else n===void 0?G(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Sa(e,t){typeof t=="string"?le(e,t,void 0):"length"in t&&[].map.call(t,function(n){le(e,n,void 0)})}function bi(e){var t={};for(var n in e)ae(e,n)&&(t[n]=e[n]);return t}var Ca=[].concat;function wi(e){return Ca.apply([],e)}var _i="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(wi([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return j[e]}),ka=_i.map(function(e){return j[e]});mi(_i,function(e){return[e,!0]});var Pe=null;function xt(e){Pe=typeof WeakMap<"u"&&new WeakMap;var t=Kn(e);return Pe=null,t}function Kn(e){if(!e||typeof e!="object")return e;var t=Pe&&Pe.get(e);if(t)return t;if(G(e)){t=[],Pe&&Pe.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Kn(e[n]))}else if(ka.indexOf(e.constructor)>=0)t=e;else{var i=ht(e);t=i===Object.prototype?{}:Object.create(i),Pe&&Pe.set(e,t);for(var o in e)ae(e,o)&&(t[o]=Kn(e[o]))}return t}var Pa={}.toString;function In(e){return Pa.call(e).slice(8,-1)}var Dn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ra=typeof Dn=="symbol"?function(e){var t;return e!=null&&(t=e[Dn])&&t.apply(e)}:function(){return null},qe={};function me(e){var t,n,r,i;if(arguments.length===1){if(G(e))return e.slice();if(this===qe&&typeof e=="string")return[e];if(i=Ra(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var lr=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ve=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xi(e,t){ve=e,Ei=t}var Ei=function(){return!0},Ta=!new Error("").stack;function ze(){if(Ta)try{throw ze.arguments,new Error}catch(e){return e}return new Error}function $n(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Ei).map(function(r){return`
`+r}).join("")):""}var Ka=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ai=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],cr=Ka.concat(Ai),Ia={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function tt(e,t){this._e=ze(),this.name=e,this.message=t}et(tt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+$n(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Si(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Qt(e,t,n,r){this._e=ze(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Si(e,t)}et(Qt).from(tt);function ut(e,t){this._e=ze(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Si(e,t)}et(ut).from(tt);var fr=cr.reduce(function(e,t){return e[t]=t+"Error",e},{}),Da=tt,D=cr.reduce(function(e,t){var n=t+"Error";function r(i,o){this._e=ze(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Ia[t]||n,this.inner=null)}return et(r).from(Da),e[t]=r,e},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var Kr=Ai.reduce(function(e,t){return e[t+"Error"]=D[t],e},{});function $a(e,t){if(!e||e instanceof tt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Kr[e.name])return e;var n=new Kr[e.name](t||e.message,e);return"stack"in e&&Ee(n,"stack",{get:function(){return this.inner.stack}}),n}var dn=cr.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=D[t]),e},{});dn.ModifyError=Qt;dn.DexieError=tt;dn.BulkError=ut;function N(){}function Et(e){return e}function Oa(e,t){return e==null||e===Et?t:function(n){return t(e(n))}}function Le(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ba(e,t){return e===N?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Le(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Le(i,this.onerror):i),o!==void 0?o:n}}function Ma(e,t){return e===N?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Le(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Le(r,this.onerror):r)}}function Na(e,t){return e===N?t:function(n){var r=e.apply(this,arguments);re(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Le(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Le(o,this.onerror):o),r===void 0?a===void 0?void 0:a:re(r,a)}}function La(e,t){return e===N?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function hr(e,t){return e===N?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var dt={},Fa=100,ja=20,Ci=100,dr=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,ht(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ht(t),e]}(),On=dr[0],Xt=dr[1],Bn=dr[2],ki=Xt&&Xt.then,Mt=On&&On.constructor,pr=!!Bn,Mn=!1,za=Bn?function(){Bn.then(Tt)}:j.setImmediate?setImmediate.bind(null,Tt):j.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Tt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Tt,0)},pt=function(e,t){at.push([e,t]),Gt&&(za(),Gt=!1)},Nn=!0,Gt=!0,Me=[],Nt=[],Ln=null,Fn=Et,Ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:$r,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{$r(e[0],e[1])}catch{}})}},T=Ye,at=[],Ne=0,Lt=[];function P(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=N,this._lib=!1;var t=this._PSD=T;if(ve&&(this._stackHolder=ze(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==dt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&zn(this,this._value);return}this._state=null,this._value=null,++t.ref,Ri(this,e)}var jn={get:function(){var e=T,t=Jt;function n(r,i){var o=this,a=!e.global&&(e!==T||t!==Jt),s=a&&!Ae(),u=new P(function(l,c){vr(o,new Pi(en(r,e,a,s),en(i,e,a,s),l,c,e))});return ve&&Ii(u,this),u}return n.prototype=dt,n},set:function(e){Ee(this,"then",e&&e.prototype===dt?jn:{get:function(){return e},set:jn.set})}};Xe(P.prototype,{then:jn,_then:function(e,t){vr(this,new Pi(null,null,e,t,T))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Ft(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Ft(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Ft(t)})},stack:{get:function(){if(this._stack)return this._stack;try{Mn=!0;var e=Ki(this,[],ja),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Mn=!1}}},timeout:function(e,t){var n=this;return e<1/0?new P(function(r,i){var o=setTimeout(function(){return i(new D.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&Ee(P.prototype,Symbol.toStringTag,"Dexie.Promise");Ye.env=Di();function Pi(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Xe(P,{all:function(){var e=me.apply(null,arguments).map(Zt);return new P(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,o){return P.resolve(i).then(function(a){e[o]=a,--r||t(e)},n)})})},resolve:function(e){if(e instanceof P)return e;if(e&&typeof e.then=="function")return new P(function(n,r){e.then(n,r)});var t=new P(dt,!0,e);return Ii(t,Ln),t},reject:Ft,race:function(){var e=me.apply(null,arguments).map(Zt);return new P(function(t,n){e.map(function(r){return P.resolve(r).then(t,n)})})},PSD:{get:function(){return T},set:function(e){return T=e}},totalEchoes:{get:function(){return Jt}},newPSD:Te,usePSD:rt,scheduler:{get:function(){return pt},set:function(e){pt=e}},rejectionMapper:{get:function(){return Fn},set:function(e){Fn=e}},follow:function(e,t){return new P(function(n,r){return Te(function(i,o){var a=T;a.unhandleds=[],a.onunhandled=o,a.finalize=Le(function(){var s=this;Ha(function(){s.unhandleds.length===0?i():o(s.unhandleds[0])})},a.finalize),e()},t,n,r)})}});Mt&&(Mt.allSettled&&Ee(P,"allSettled",function(){var e=me.apply(null,arguments).map(Zt);return new P(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,o){return P.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||t(r)})})})}),Mt.any&&typeof AggregateError<"u"&&Ee(P,"any",function(){var e=me.apply(null,arguments).map(Zt);return new P(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(o,a){return P.resolve(o).then(function(s){return t(s)},function(s){i[a]=s,--r||n(new AggregateError(i))})})})}));function Ri(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&At();n&&typeof n.then=="function"?Ri(e,function(i,o){n instanceof P?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,Ti(e)),r&&St()}},zn.bind(null,e))}catch(n){zn(e,n)}}function zn(e,t){if(Nt.push(t),e._state===null){var n=e._lib&&At();t=Fn(t),e._state=!1,e._value=t,ve&&t!==null&&typeof t=="object"&&!t._promise&&Aa(function(){var r=ur(t,"stack");t._promise=e,Ee(t,"stack",{get:function(){return Mn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),Ua(e),Ti(e),n&&St()}}function Ti(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)vr(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ne===0&&(++Ne,pt(function(){--Ne===0&&yr()},[]))}function vr(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ne,pt(Va,[n,e,t])}function Va(e,t,n){try{Ln=t;var r,i=t._value;t._state?r=e(i):(Nt.length&&(Nt=[]),r=e(i),Nt.indexOf(i)===-1&&Wa(t)),n.resolve(r)}catch(o){n.reject(o)}finally{Ln=null,--Ne===0&&yr(),--n.psd.ref||n.psd.finalize()}}function Ki(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=$n(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return ve&&(r=$n(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Ki(e._prev,t,n)),t}function Ii(e,t){var n=t?t._numPrev+1:0;n<Fa&&(e._prev=t,e._numPrev=n)}function Tt(){At()&&St()}function At(){var e=Nn;return Nn=!1,Gt=!1,e}function St(){var e,t,n;do for(;at.length>0;)for(e=at,at=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(at.length>0);Nn=!0,Gt=!0}function yr(){var e=Me;Me=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Lt.slice(0),n=t.length;n;)t[--n]()}function Ha(e){function t(){e(),Lt.splice(Lt.indexOf(t),1)}Lt.push(t),++Ne,pt(function(){--Ne===0&&yr()},[])}function Ua(e){Me.some(function(t){return t._value===e._value})||Me.push(e)}function Wa(e){for(var t=Me.length;t;)if(Me[--t]._value===e._value){Me.splice(t,1);return}}function Ft(e){return new P(dt,!1,e)}function V(e,t){var n=T;return function(){var r=At(),i=T;try{return Ke(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Ke(i,!1),r&&St()}}}var X={awaits:0,echoes:0,id:0},qa=0,jt=[],bn=0,Jt=0,Ya=0;function Te(e,t,n,r){var i=T,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Ya;var a=Ye.env;o.env=pr?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject,nthen:Ir(a.nthen,o),gthen:Ir(a.gthen,o)}:{},t&&re(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=rt(o,e,n,r);return o.ref===0&&o.finalize(),s}function nt(){return X.id||(X.id=++qa),++X.awaits,X.echoes+=Ci,X.id}function Ae(){return X.awaits?(--X.awaits===0&&(X.id=0),X.echoes=X.awaits*Ci,!0):!1}(""+ki).indexOf("[native code]")===-1&&(nt=Ae=N);function Zt(e){return X.echoes&&e&&e.constructor===Mt?(nt(),e.then(function(t){return Ae(),t},function(t){return Ae(),Q(t)})):e}function Qa(e){++Jt,(!X.echoes||--X.echoes===0)&&(X.echoes=X.id=0),jt.push(T),Ke(e,!0)}function Xa(){var e=jt[jt.length-1];jt.pop(),Ke(e,!1)}function Ke(e,t){var n=T;if((t?X.echoes&&(!bn++||e!==T):bn&&(!--bn||e!==T))&&$i(t?Qa.bind(null,e):Xa),e!==T&&(T=e,n===Ye&&(Ye.env=Di()),pr)){var r=Ye.env.Promise,i=e.env;Xt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(j,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Di(){var e=j.Promise;return pr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(j,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Xt.then,gthen:e.prototype.then}:{}}function rt(e,t,n,r,i){var o=T;try{return Ke(e,!0),t(n,r,i)}finally{Ke(o,!1)}}function $i(e){ki.call(On,e)}function en(e,t,n,r){return typeof e!="function"?e:function(){var i=T;n&&nt(),Ke(t,!0);try{return e.apply(this,arguments)}finally{Ke(i,!1),r&&$i(Ae)}}}function Ir(e,t){return function(n,r){return e.call(this,en(n,t),en(r,t))}}var Dr="unhandledrejection";function $r(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(j.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Dr,!0,!0),re(r,i)):j.CustomEvent&&(r=new CustomEvent(Dr,{detail:i}),re(r,i)),r&&j.dispatchEvent&&(dispatchEvent(r),!j.PromiseRejectionEvent&&j.onunhandledrejection))try{j.onunhandledrejection(r)}catch{}ve&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var Q=P.reject;function Vn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!T.letThrough&&!e._vip){if(e._state.openComplete)return Q(new D.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Q(new D.DatabaseClosed);e.open().catch(N)}return e._state.dbReadyPromise.then(function(){return Vn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===fr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Vn(e,t,n,r)})):Q(o)}return i._promise(t,function(o,a){return Te(function(){return T.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var Or="3.2.2",$e=String.fromCharCode(65535),Hn=-1/0,ye="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Oi="String expected.",lt=[],pn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ga=pn,Ja=pn,Bi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},vn="__dbnames",wn="readonly",_n="readwrite";function Fe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Mi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Kt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=xt(t),delete t[e]),t}:function(t){return t}}var Za=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||T.trans,o=this.name;function a(u,l,c){if(!c.schema[o])throw new D.NotFound("Table "+o+" not part of transaction");return n(c.idbtrans,c)}var s=At();try{return i&&i.db===this.db?i===T.trans?i._promise(t,a,r):Te(function(){return i._promise(t,a,r)},{trans:i,transless:T.transless||T}):Vn(this.db,t,[this.name],a)}finally{s&&St()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(G(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=W(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(f){return c.keyPath.indexOf(f)>=0})&&c.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==$e)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&ve&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(c,f){try{return o.cmp(c,f)===0}catch{return!1}}var s=n.reduce(function(c,f){var h=c[0],y=c[1],d=i[f],p=t[f];return[h||d,h||!d?Fe(y,d&&d.multi?function(m){var _=_e(m,f);return G(_)&&_.some(function(w){return a(p,w)})}:function(m){return a(p,_e(m,f))}):y]},[null,null]),u=s[0],l=s[1];return u?this.where(u.name).equals(t[u.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,G(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var o in r)if(ae(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){re(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Kt(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(u){return u.numFailures?P.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{le(t,a,u)}catch{}return u})},e.prototype.update=function(t,n){if(typeof t=="object"&&!G(t)){var r=_e(t,this.schema.primKey.keyPath);if(r===void 0)return Q(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?W(n).forEach(function(i){le(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Kt(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?P.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{le(t,a,u)}catch{}return u})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?P.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Mi})}).then(function(n){return n.numFailures?P.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(Kt(c)):t;return i.core.mutate({trans:s,type:"add",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,m=y.lastResult,_=y.failures,w=a?p:m;if(d===0)return w;throw new ut(i.name+".bulkAdd(): "+d+" of "+f+" operations failed",_)})})},e.prototype.bulkPut=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(Kt(c)):t;return i.core.mutate({trans:s,type:"put",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,m=y.lastResult,_=y.failures,w=a?p:m;if(d===0)return w;throw new ut(i.name+".bulkPut(): "+d+" of "+f+" operations failed",_)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var o=i.numFailures,a=i.lastResult,s=i.failures;if(o===0)return a;throw new ut(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",s)})},e}();function Ct(e){var t={},n=function(s,u){if(u){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[s].subscribe.apply(null,c),e}else if(typeof s=="string")return t[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,u,l){if(typeof s=="object")return a(s);u||(u=La),l||(l=N);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=u(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(h){return h!==f}),c.fire=c.subscribers.reduce(u,l)}};return t[s]=n[s]=c,c}function a(s){W(s).forEach(function(u){var l=s[u];if(G(l))o(u,s[u][0],s[u][1]);else if(l==="asap")var c=o(u,Et,function(){for(var h=arguments.length,y=new Array(h);h--;)y[h]=arguments[h];c.subscribers.forEach(function(d){gi(function(){d.apply(null,y)})})});else throw new D.InvalidArgument("Invalid event config")})}}function kt(e,t){return et(t).from({prototype:e}),t}function es(e){return kt(Za.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Ct(null,{creating:[Ba,N],reading:[Oa,Et],updating:[Na,N],deleting:[Ma,N]})})}function Ue(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function xn(e,t){e.filter=Fe(e.filter,t)}function En(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Fe(r(),t())}:t,e.justLimit=n&&!r}function ts(e,t){e.isMatch=Fe(e.isMatch,t)}function zt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new D.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Br(e,t,n){var r=zt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function It(e,t,n,r){var i=e.replayFilter?Fe(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(s,u,l){if(!i||i(u,l,function(h){return u.stop(h)},function(h){return u.fail(h)})){var c=u.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),ae(o,f)||(o[f]=!0,t(s,u,l))}};return Promise.all([e.or._iterate(a,n),Mr(Br(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return Mr(Br(e,r,n),Fe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Mr(e,t,n,r){var i=r?function(a,s,u){return n(r(a),s,u)}:n,o=V(i);return e.then(function(a){if(a)return a.start(function(){var s=function(){return a.continue()};(!t||t(a,function(u){return s=u},function(u){a.stop(u),s=N},function(u){a.fail(u),s=N}))&&o(a.value,a,function(u){return s=u}),s()})})}function te(e,t){try{var n=Nr(e),r=Nr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return rs(Lr(e),Lr(t));case"Array":return ns(e,t)}}catch{}return NaN}function ns(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=te(e[o],t[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function rs(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function Nr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=In(e);return n==="ArrayBuffer"?"binary":n}function Lr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var is=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,Q.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,Q.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Fe(n.algorithm,t)},e.prototype._iterate=function(t,n){return It(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&re(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return It(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(Ue(i,!0))return o.count({trans:r,query:{index:zt(i,o.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var a=0;return It(i,function(){return++a,!1},r,o).then(function(){return a})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],o=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var s=this._ctx.dir==="next"?1:-1;function u(l,c){var f=a(l,o),h=a(c,o);return f<h?-s:f>h?s:0}return this.toArray(function(l){return l.sort(u)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Ue(i,!0)&&i.limit>0){var o=i.valueMapper,a=zt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(u){var l=u.result;return o?l.map(o):l})}else{var s=[];return It(i,function(u){return s.push(u)},r,i.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Ue(n)?En(n,function(){var r=t;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):En(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),En(this._ctx,function(){var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},e.prototype.until=function(t,n){return xn(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return xn(this._ctx,function(n){return t(n.value)}),ts(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Ue(n,!0)&&n.limit>0)return this._read(function(i){var o=zt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return xn(this._ctx,function(i){var o=i.primaryKey.toString(),a=ae(r,o);return r[o]=!0,!a}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof t=="function")o=t;else{var a=W(t),s=a.length;o=function(_){for(var w=!1,b=0;b<s;++b){var g=a[b],v=t[g];_e(_,g)!==v&&(le(_,g,v),w=!0)}return w}}var u=r.table.core,l=u.schema.primaryKey,c=l.outbound,f=l.extractKey,h=n.db._options.modifyChunkSize||200,y=[],d=0,p=[],m=function(_,w){var b=w.failures,g=w.numFailures;d+=_-g;for(var v=0,x=W(b);v<x.length;v++){var R=x[v];y.push(b[R])}};return n.clone().primaryKeys().then(function(_){var w=function(b){var g=Math.min(h,_.length-b);return u.getMany({trans:i,keys:_.slice(b,b+g),cache:"immutable"}).then(function(v){for(var x=[],R=[],A=c?[]:null,k=[],E=0;E<g;++E){var C=v[E],K={value:xt(C),primKey:_[b+E]};o.call(K,K.value,K)!==!1&&(K.value==null?k.push(_[b+E]):!c&&te(f(C),f(K.value))!==0?(k.push(_[b+E]),x.push(K.value)):(R.push(K.value),c&&A.push(_[b+E])))}var O=Ue(r)&&r.limit===1/0&&(typeof t!="function"||t===An)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&u.mutate({trans:i,type:"add",values:x}).then(function(H){for(var I in H.failures)k.splice(parseInt(I),1);m(x.length,H)})).then(function(){return(R.length>0||O&&typeof t=="object")&&u.mutate({trans:i,type:"put",keys:A,values:R,criteria:O,changeSpec:typeof t!="function"&&t}).then(function(H){return m(R.length,H)})}).then(function(){return(k.length>0||O&&t===An)&&u.mutate({trans:i,type:"delete",keys:k,criteria:O}).then(function(H){return m(k.length,H)})}).then(function(){return _.length>b+g&&w(b+h)})})};return w(0).then(function(){if(y.length>0)throw new Qt("Error modifying one or more objects",y,d,p);return _.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Ue(t)&&(t.isPrimKey&&!Ja||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(s){var u=s.failures;s.lastResult,s.results;var l=s.numFailures;if(l)throw new Qt("Could not delete some values",Object.keys(u).map(function(c){return u[c]}),a-l);return a-l})})}):this.modify(An)},e}(),An=function(e,t){return t.value=null};function os(e){return kt(is.prototype,function(n,r){this.db=e;var i=Mi,o=null;if(r)try{i=r()}catch(l){o=l}var a=n._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:u!==Et?u:null}})}function as(e,t){return e<t?-1:e===t?0:1}function ss(e,t){return e>t?-1:e===t?0:1}function oe(e,t,n){var r=e instanceof Li?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function We(e){return new e.Collection(e,function(){return Ni("")}).limit(0)}function us(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function ls(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function cs(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var l=t[u];if(l!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],l)<0&&(s=u)}return a<r.length&&o==="next"?e+n.substr(e.length):a<e.length&&o==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function Dt(e,t,n,r){var i,o,a,s,u,l,c,f=n.length;if(!n.every(function(p){return typeof p=="string"}))return oe(e,Oi);function h(p){i=us(p),o=ls(p),a=p==="next"?as:ss;var m=n.map(function(_){return{lower:o(_),upper:i(_)}}).sort(function(_,w){return a(_.lower,w.lower)});s=m.map(function(_){return _.upper}),u=m.map(function(_){return _.lower}),l=p,c=p==="next"?"":r}h("next");var y=new e.Collection(e,function(){return ke(s[0],u[f-1]+r)});y._ondirectionchange=function(p){h(p)};var d=0;return y._addAlgorithm(function(p,m,_){var w=p.key;if(typeof w!="string")return!1;var b=o(w);if(t(b,u,d))return!0;for(var g=null,v=d;v<f;++v){var x=cs(w,b,s[v],u[v],a,l);x===null&&g===null?d=v+1:(g===null||a(g,x)>0)&&(g=x)}return m(g!==null?function(){p.continue(g+c)}:_),!1}),y}function ke(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ni(e){return{type:1,lower:e,upper:e}}var Li=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?We(this):new this.Collection(this,function(){return ke(t,n,!r,!i)})}catch{return oe(this,ye)}},e.prototype.equals=function(t){return t==null?oe(this,ye):new this.Collection(this,function(){return Ni(t)})},e.prototype.above=function(t){return t==null?oe(this,ye):new this.Collection(this,function(){return ke(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?oe(this,ye):new this.Collection(this,function(){return ke(t,void 0,!1)})},e.prototype.below=function(t){return t==null?oe(this,ye):new this.Collection(this,function(){return ke(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?oe(this,ye):new this.Collection(this,function(){return ke(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?oe(this,Oi):this.between(t,t+$e,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Dt(this,function(n,r){return n.indexOf(r[0])===0},[t],$e)},e.prototype.equalsIgnoreCase=function(t){return Dt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=me.apply(qe,arguments);return t.length===0?We(this):Dt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=me.apply(qe,arguments);return t.length===0?We(this):Dt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,$e)},e.prototype.anyOf=function(){var t=this,n=me.apply(qe,arguments),r=this._cmp;try{n.sort(r)}catch{return oe(this,ye)}if(n.length===0)return We(this);var i=new this.Collection(this,function(){return ke(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?t._ascending:t._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,s,u){for(var l=a.key;r(l,n[o])>0;)if(++o,o===n.length)return s(u),!1;return r(l,n[o])===0?!0:(s(function(){a.continue(n[o])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Hn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=me.apply(qe,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return oe(this,ye)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Hn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,s=this._min,u=this._max;if(t.length===0)return We(this);if(!t.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&o(v[0],v[1])<=0}))return oe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(v,x){for(var R=0,A=v.length;R<A;++R){var k=v[R];if(i(x[0],k[1])<0&&i(x[1],k[0])>0){k[0]=s(k[0],x[0]),k[1]=u(k[1],x[1]);break}}return R===A&&v.push(x),v}var h=o;function y(v,x){return h(v[0],x[0])}var d;try{d=t.reduce(f,[]),d.sort(y)}catch{return oe(this,ye)}var p=0,m=c?function(v){return o(v,d[p][1])>0}:function(v){return o(v,d[p][1])>=0},_=l?function(v){return a(v,d[p][0])>0}:function(v){return a(v,d[p][0])>=0};function w(v){return!m(v)&&!_(v)}var b=m,g=new this.Collection(this,function(){return ke(d[0][0],d[d.length-1][1],!l,!c)});return g._ondirectionchange=function(v){v==="next"?(b=m,h=o):(b=_,h=a),d.sort(y)},g._addAlgorithm(function(v,x,R){for(var A=v.key;b(A);)if(++p,p===d.length)return x(R),!1;return w(A)?!0:(r._cmp(A,d[p][1])===0||r._cmp(A,d[p][0])===0||x(function(){h===o?v.continue(d[p][0]):v.continue(d[p][1])}),!1)}),g},e.prototype.startsWithAnyOf=function(){var t=me.apply(qe,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?We(this):this.inAnyRange(t.map(function(n){return[n,n+$e]})):oe(this,"startsWithAnyOf() only works with strings")},e}();function fs(e){return kt(Li.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=e._deps.indexedDB;if(!o)throw new D.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,s){return o.cmp(s,a)},this._max=function(a,s){return o.cmp(a,s)>0?a:s},this._min=function(a,s){return o.cmp(a,s)<0?a:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function de(e){return V(function(t){return vt(t),e(t.target.error),!1})}function vt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var yt="storagemutated",Re="x-storagemutated-1",Ie=Ct(null,yt),hs=function(){function e(){}return e.prototype._lock=function(){return ot(!T.global),++this._reculock,this._reculock===1&&!T.global&&(T.lockOwnerFor=this),this},e.prototype._unlock=function(){if(ot(!T.global),--this._reculock===0)for(T.global||(T.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{rt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&T.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(ot(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new D.DatabaseClosed(i);case"MissingAPIError":throw new D.MissingAPI(i.message,i);default:throw new D.OpenFailed(i)}if(!this.active)throw new D.TransactionInactive;return ot(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=V(function(o){vt(o),n._reject(t.error)}),t.onabort=V(function(o){vt(o),n.active&&n._reject(new D.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=V(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Ie.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return Q(new D.ReadOnly("Transaction is readonly"));if(!this.active)return Q(new D.TransactionInactive);if(this._locked())return new P(function(a,s){i._blockedFuncs.push([function(){i._promise(t,n,r).then(a,s)},T])});if(r)return Te(function(){var a=new P(function(s,u){i._lock();var l=n(s,u,i);l&&l.then&&l.then(s,u)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new P(function(a,s){var u=n(a,s,i);u&&u.then&&u.then(a,s)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=P.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new P(function(a,s){r.then(function(u){return n._waitingQueue.push(V(a.bind(null,u)))},function(u){return n._waitingQueue.push(V(s.bind(null,u)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(ae(n,t))return n[t];var r=this.schema[t];if(!r)throw new D.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function ds(e){return kt(hs.prototype,function(n,r,i,o,a){var s=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Ct(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P(function(u,l){s._resolve=u,s._reject=l}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var l=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):l&&s.idbtrans&&s.idbtrans.abort(),Q(u)})})}function Un(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Fi(t)}}function Fi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function ji(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:mi(n,function(r){return[r.name,r]})}}function ps(e){return e.length===1?e[0]:e}var gt=function(e){try{return e.only([[]]),gt=function(){return[[]]},[[]]}catch{return gt=function(){return $e},$e}};function Wn(e){return e==null?function(){}:typeof e=="string"?vs(e):function(t){return _e(t,e)}}function vs(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return _e(n,e)}}function Fr(e){return[].slice.call(e)}var ys=0;function ct(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function gs(e,t,n){function r(f,h){var y=Fr(f.objectStoreNames);return{schema:{name:f.name,tables:y.map(function(d){return h.objectStore(d)}).map(function(d){var p=d.keyPath,m=d.autoIncrement,_=G(p),w=p==null,b={},g={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:_,keyPath:p,autoIncrement:m,unique:!0,extractKey:Wn(p)},indexes:Fr(d.indexNames).map(function(v){return d.index(v)}).map(function(v){var x=v.name,R=v.unique,A=v.multiEntry,k=v.keyPath,E=G(k),C={name:x,compound:E,keyPath:k,unique:R,multiEntry:A,extractKey:Wn(k)};return b[ct(k)]=C,C}),getIndexByKeyPath:function(v){return b[ct(v)]}};return b[":id"]=g.primaryKey,p!=null&&(b[ct(p)]=g.primaryKey),g})},hasGetAll:y.length>0&&"getAll"in h.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=f.lower,y=f.upper,d=f.lowerOpen,p=f.upperOpen,m=h===void 0?y===void 0?null:t.upperBound(y,!!p):y===void 0?t.lowerBound(h,!!d):t.bound(h,y,!!d,!!p);return m}function o(f){var h=f.name;function y(m){var _=m.trans,w=m.type,b=m.keys,g=m.values,v=m.range;return new Promise(function(x,R){x=V(x);var A=_.objectStore(h),k=A.keyPath==null,E=w==="put"||w==="add";if(!E&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var C=(b||g||{length:1}).length;if(b&&g&&b.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(C===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var K,O=[],H=[],I=0,q=function(fe){++I,vt(fe)};if(w==="deleteRange"){if(v.type===4)return x({numFailures:I,failures:H,results:[],lastResult:void 0});v.type===3?O.push(K=A.clear()):O.push(K=A.delete(i(v)))}else{var Y=E?k?[g,b]:[g,null]:[b,null],ie=Y[0],Z=Y[1];if(E)for(var se=0;se<C;++se)O.push(K=Z&&Z[se]!==void 0?A[w](ie[se],Z[se]):A[w](ie[se])),K.onerror=q;else for(var se=0;se<C;++se)O.push(K=A[w](ie[se])),K.onerror=q}var Ce=function(fe){var it=fe.target.result;O.forEach(function(ue,Pt){return ue.error!=null&&(H[Pt]=ue.error)}),x({numFailures:I,failures:H,results:w==="delete"?b:O.map(function(ue){return ue.result}),lastResult:it})};K.onerror=function(fe){q(fe),Ce(fe)},K.onsuccess=Ce})}function d(m){var _=m.trans,w=m.values,b=m.query,g=m.reverse,v=m.unique;return new Promise(function(x,R){x=V(x);var A=b.index,k=b.range,E=_.objectStore(h),C=A.isPrimaryKey?E:E.index(A.name),K=g?v?"prevunique":"prev":v?"nextunique":"next",O=w||!("openKeyCursor"in C)?C.openCursor(i(k),K):C.openKeyCursor(i(k),K);O.onerror=de(R),O.onsuccess=V(function(H){var I=O.result;if(!I){x(null);return}I.___id=++ys,I.done=!1;var q=I.continue.bind(I),Y=I.continuePrimaryKey;Y&&(Y=Y.bind(I));var ie=I.advance.bind(I),Z=function(){throw new Error("Cursor not started")},se=function(){throw new Error("Cursor not stopped")};I.trans=_,I.stop=I.continue=I.continuePrimaryKey=I.advance=Z,I.fail=V(R),I.next=function(){var Ce=this,fe=1;return this.start(function(){return fe--?Ce.continue():Ce.stop()}).then(function(){return Ce})},I.start=function(Ce){var fe=new Promise(function(ue,Pt){ue=V(ue),O.onerror=de(Pt),I.fail=Pt,I.stop=function(Xi){I.stop=I.continue=I.continuePrimaryKey=I.advance=se,ue(Xi)}}),it=function(){if(O.result)try{Ce()}catch(ue){I.fail(ue)}else I.done=!0,I.start=function(){throw new Error("Cursor behind last entry")},I.stop()};return O.onsuccess=V(function(ue){O.onsuccess=it,it()}),I.continue=q,I.continuePrimaryKey=Y,I.advance=ie,it(),fe},x(I)},R)})}function p(m){return function(_){return new Promise(function(w,b){w=V(w);var g=_.trans,v=_.values,x=_.limit,R=_.query,A=x===1/0?void 0:x,k=R.index,E=R.range,C=g.objectStore(h),K=k.isPrimaryKey?C:C.index(k.name),O=i(E);if(x===0)return w({result:[]});if(m){var H=v?K.getAll(O,A):K.getAllKeys(O,A);H.onsuccess=function(ie){return w({result:ie.target.result})},H.onerror=de(b)}else{var I=0,q=v||!("openKeyCursor"in K)?K.openCursor(O):K.openKeyCursor(O),Y=[];q.onsuccess=function(ie){var Z=q.result;if(!Z)return w({result:Y});if(Y.push(v?Z.value:Z.primaryKey),++I===x)return w({result:Y});Z.continue()},q.onerror=de(b)}})}}return{name:h,schema:f,mutate:y,getMany:function(m){var _=m.trans,w=m.keys;return new Promise(function(b,g){b=V(b);for(var v=_.objectStore(h),x=w.length,R=new Array(x),A=0,k=0,E,C=function(I){var q=I.target;(R[q._pos]=q.result)!=null,++k===A&&b(R)},K=de(g),O=0;O<x;++O){var H=w[O];H!=null&&(E=v.get(w[O]),E._pos=O,E.onsuccess=C,E.onerror=K,++A)}A===0&&b(R)})},get:function(m){var _=m.trans,w=m.key;return new Promise(function(b,g){b=V(b);var v=_.objectStore(h),x=v.get(w);x.onsuccess=function(R){return b(R.target.result)},x.onerror=de(g)})},query:p(u),openCursor:d,count:function(m){var _=m.query,w=m.trans,b=_.index,g=_.range;return new Promise(function(v,x){var R=w.objectStore(h),A=b.isPrimaryKey?R:R.index(b.name),k=i(g),E=k?A.count(k):A.count();E.onsuccess=V(function(C){return v(C.target.result)}),E.onerror=de(x)})}}}var a=r(e,n),s=a.schema,u=a.hasGetAll,l=s.tables.map(function(f){return o(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var h=c[f];if(!h)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:gt(t),schema:s}}function ms(e,t){return t.reduce(function(n,r){var i=r.create;return B(B({},n),i(n))},e)}function bs(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=ms(gs(t,i,r),e.dbcore);return{dbcore:o}}function gr(e,t){var n=e._novip,r=t.db,i=bs(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(s){return s.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function tn(e,t,n,r){var i=e._novip;n.forEach(function(o){var a=r[o];t.forEach(function(s){var u=ur(s,o);(!u||"value"in u&&u.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?Ee(s,o,{get:function(){return this.table(o)},set:function(l){vi(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new i.Table(o,a))})})}function qn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function ws(e,t){return e._cfg.version-t._cfg.version}function _s(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=T.transless||T;Te(function(){T.trans=o,T.transless=s,t===0?(W(i).forEach(function(u){mr(n,u,i[u].primKey,i[u].indexes)}),gr(e,n),P.follow(function(){return e.on.populate.fire(o)}).catch(a)):xs(e,t,o,n).catch(a)})}function xs(e,t,n,r){var i=e._novip,o=[],a=i._versions,s=i._dbSchema=br(i,i.idbdb,r),u=!1,l=a.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){o.push(function(){var h=s,y=f._cfg.dbschema;Qn(i,h,r),Qn(i,y,r),s=i._dbSchema=y;var d=zi(h,y);d.add.forEach(function(g){mr(r,g[0],g[1].primKey,g[1].indexes)}),d.change.forEach(function(g){if(g.recreate)throw new D.Upgrade("Not yet support for changing primary key");var v=r.objectStore(g.name);g.add.forEach(function(x){return Yn(v,x)}),g.change.forEach(function(x){v.deleteIndex(x.name),Yn(v,x)}),g.del.forEach(function(x){return v.deleteIndex(x)})});var p=f._cfg.contentUpgrade;if(p&&f._cfg.version>t){gr(i,r),n._memoizedTables={},u=!0;var m=bi(y);d.del.forEach(function(g){m[g]=h[g]}),qn(i,[i.Transaction.prototype]),tn(i,[i.Transaction.prototype],W(m),m),n.schema=m;var _=lr(p);_&&nt();var w,b=P.follow(function(){if(w=p(n),w&&_){var g=Ae.bind(null,null);w.then(g,g)}});return w&&typeof w.then=="function"?P.resolve(w):b.then(function(){return w})}}),o.push(function(h){if(!u||!Ga){var y=f._cfg.dbschema;As(y,h)}qn(i,[i.Transaction.prototype]),tn(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return o.length?P.resolve(o.shift()(n.idbtrans)).then(c):P.resolve()}return c().then(function(){Es(s,r)})}function zi(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!pn)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName,l=void 0;for(l in s)u[l]||a.del.push(l);for(l in u){var c=s[l],f=u[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function mr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return Yn(i,o)}),i}function Es(e,t){W(e).forEach(function(n){t.db.objectStoreNames.contains(n)||mr(t,n,e[n].primKey,e[n].indexes)})}function As(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Yn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function br(e,t,n){var r={},i=hn(t.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),s=a.keyPath,u=Un(Fi(s),s||"",!1,!1,!!a.autoIncrement,s&&typeof s!="string",!0),l=[],c=0;c<a.indexNames.length;++c){var f=a.index(a.indexNames[c]);s=f.keyPath;var h=Un(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);l.push(h)}r[o]=ji(o,u,l)}),r}function Ss(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=br(r,t,n);r._storeNames=hn(t.objectStoreNames,0),tn(r,[r._allTables],W(i),i)}function Cs(e,t){var n=br(e,e.idbdb,t),r=zi(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Qn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var l=s.indexNames[u],c=s.index(l).keyPath,f=typeof c=="string"?c:"["+hn(c).join("+")+"]";if(t[a]){var h=t[a].idxByName[f];h&&(h.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&j.WorkerGlobalScope&&j instanceof j.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function ks(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Un(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),G(i),n===0)})}var Ps=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){W(t).forEach(function(r){if(t[r]!==null){var i=ks(t[r]),o=i.shift();if(o.multi)throw new D.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")}),n[r]=ji(r,o,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?re(this._cfg.storesSource,t):t;var r=n._versions,i={},o={};return r.forEach(function(a){re(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,qn(n,[n._allTables,n,n.Transaction.prototype]),tn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],W(o),o),n._storeNames=W(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=hr(this._cfg.contentUpgrade||N,t),this},e}();function Rs(e){return kt(Ps.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function wr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new yn(vn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function _r(e){return e&&typeof e.databases=="function"}function Ts(e){var t=e.indexedDB,n=e.IDBKeyRange;return _r(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==vn})}):wr(t,n).toCollection().primaryKeys()}function Ks(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!_r(n)&&t!==vn&&wr(n,r).put({name:t}).catch(N)}function Is(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!_r(n)&&t!==vn&&wr(n,r).delete(t).catch(N)}function Xn(e){return Te(function(){return T.letThrough=!0,e()})}function Ds(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function $s(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Q(t.dbOpenError):e});ve&&(t.openCanceller._stackHolder=ze()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new D.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,s=!1;return P.race([r,(typeof navigator>"u"?P.resolve():Ds()).then(function(){return new P(function(u,l){if(i(),!n)throw new D.MissingAPI;var c=e.name,f=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!f)throw new D.MissingAPI;f.onerror=de(l),f.onblocked=V(e._fireOnBlocked),f.onupgradeneeded=V(function(h){if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=vt,a.abort(),f.result.close();var y=n.deleteDatabase(c);y.onsuccess=y.onerror=V(function(){l(new D.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{a.onerror=de(l);var d=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;s=d<1,e._novip.idbdb=f.result,_s(e,d/10,a,l)}},l),f.onsuccess=V(function(){a=null;var h=e._novip.idbdb=f.result,y=hn(h.objectStoreNames);if(y.length>0)try{var d=h.transaction(ps(y),"readonly");t.autoSchema?Ss(e,h,d):(Qn(e,e._dbSchema,d),Cs(e,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),gr(e,d)}catch{}lt.push(e),h.onversionchange=V(function(p){t.vcFired=!0,e.on("versionchange").fire(p)}),h.onclose=V(function(p){e.on("close").fire(p)}),s&&Ks(e._deps,c),u()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],P.resolve(Xn(function(){return e.on.ready.fire(e.vip)})).then(function u(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(hr,N);return t.onReadyBeingFired=[],P.resolve(Xn(function(){return l(e.vip)})).then(u)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(u){t.dbOpenError=u;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),Q(u)}).finally(function(){t.openComplete=!0,o()})}function Gn(e){var t=function(a){return e.next(a)},n=function(a){return e.throw(a)},r=o(t),i=o(n);function o(a){return function(s){var u=a(s),l=u.value;return u.done?l:!l||typeof l.then!="function"?G(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function Os(e,t,n){var r=arguments.length;if(r<2)throw new D.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=wi(i);return[e,o,n]}function Vi(e,t,n,r,i){return P.resolve().then(function(){var o=T.transless||T,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===fr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Vi(e,t,n,null,i)})):Q(f)}var u=lr(i);u&&nt();var l,c=P.follow(function(){if(l=i.call(a,a),l)if(u){var f=Ae.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Gn(l))},s);return(l&&typeof l.then=="function"?P.resolve(l).then(function(f){return a.active?f:Q(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),Q(f)})})}function $t(e,t,n){for(var r=G(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Bs(e){return B(B({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(p,m,_){var w=ct(p),b=i[w]=i[w]||[],g=p==null?0:typeof p=="string"?1:p.length,v=m>0,x=B(B({},_),{isVirtual:v,keyTail:m,keyLength:g,extractKey:Wn(p),unique:!v&&_.unique});if(b.push(x),x.isPrimaryKey||o.push(x),g>1){var R=g===2?p[0]:p.slice(0,g-1);a(R,m+1,_)}return b.sort(function(A,k){return A.keyTail-k.keyTail}),x}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var u=0,l=r.indexes;u<l.length;u++){var c=l[u];a(c.keyPath,0,c)}function f(p){var m=i[ct(p)];return m&&m[0]}function h(p,m){return{type:p.type===1?2:p.type,lower:$t(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:$t(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0}}function y(p){var m=p.query.index;return m.isVirtual?B(B({},p),{query:{index:m,range:h(p.query.range,m.keyTail)}}):p}var d=B(B({},n),{schema:B(B({},r),{primaryKey:s,indexes:o,getIndexByKeyPath:f}),count:function(p){return n.count(y(p))},query:function(p){return n.query(y(p))},openCursor:function(p){var m=p.query.index,_=m.keyTail,w=m.isVirtual,b=m.keyLength;if(!w)return n.openCursor(p);function g(v){function x(A){A!=null?v.continue($t(A,p.reverse?e.MAX_KEY:e.MIN_KEY,_)):p.unique?v.continue(v.key.slice(0,b).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,_)):v.continue()}var R=Object.create(v,{continue:{value:x},continuePrimaryKey:{value:function(A,k){v.continuePrimaryKey($t(A,e.MAX_KEY,_),k)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var A=v.key;return b===1?A[0]:A.slice(0,b)}},value:{get:function(){return v.value}}});return R}return n.openCursor(y(p)).then(function(v){return v&&g(v)})}});return d}})}var Ms={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Bs};function xr(e,t,n,r){return n=n||{},r=r||"",W(e).forEach(function(i){if(!ae(t,i))n[r+i]=void 0;else{var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var s=In(o),u=In(a);s!==u?n[r+i]=t[i]:s==="Object"?xr(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}}),W(t).forEach(function(i){ae(e,i)||(n[r+i]=t[i])}),n}function Ns(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ls={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return B(B({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=B(B({},n),{mutate:function(o){var a=T.trans,s=a.table(t).hook,u=s.deleting,l=s.creating,c=s.updating;switch(o.type){case"add":if(l.fire===N)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(l.fire===N&&c.fire===N)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(u.fire===N)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(u.fire===N)break;return a._promise("readwrite",function(){return h(o)},!0)}return n.mutate(o);function f(d){var p=T.trans,m=d.keys||Ns(r,d);if(!m)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?B(B({},d),{keys:m}):B({},d),d.type!=="delete"&&(d.values=Tn([],d.values,!0)),d.keys&&(d.keys=Tn([],d.keys,!0)),Fs(n,d,m).then(function(_){var w=m.map(function(b,g){var v=_[g],x={onerror:null,onsuccess:null};if(d.type==="delete")u.fire.call(x,b,v,p);else if(d.type==="add"||v===void 0){var R=l.fire.call(x,b,d.values[g],p);b==null&&R!=null&&(b=R,d.keys[g]=b,r.outbound||le(d.values[g],r.keyPath,b))}else{var A=xr(v,d.values[g]),k=c.fire.call(x,A,b,v,p);if(k){var E=d.values[g];Object.keys(k).forEach(function(C){ae(E,C)?E[C]=k[C]:le(E,C,k[C])})}}return x});return n.mutate(d).then(function(b){for(var g=b.failures,v=b.results,x=b.numFailures,R=b.lastResult,A=0;A<m.length;++A){var k=v?v[A]:m[A],E=w[A];k==null?E.onerror&&E.onerror(g[A]):E.onsuccess&&E.onsuccess(d.type==="put"&&_[A]?d.values[A]:k)}return{failures:g,results:v,numFailures:x,lastResult:R}}).catch(function(b){return w.forEach(function(g){return g.onerror&&g.onerror(b)}),Promise.reject(b)})})}function h(d){return y(d.trans,d.range,1e4)}function y(d,p,m){return n.query({trans:d,values:!1,query:{index:r,range:p},limit:m}).then(function(_){var w=_.result;return f({type:"delete",keys:w,trans:d}).then(function(b){return b.numFailures>0?Promise.reject(b.failures[0]):w.length<m?{failures:[],numFailures:0,lastResult:void 0}:y(d,B(B({},p),{lower:w[w.length-1],lowerOpen:!0}),m)})})}}});return i}})}};function Fs(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Hi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)te(t.keys[i],e[o])===0&&(r.push(n?xt(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var js={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return B(B({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Hi(r.keys,r.trans._cache,r.cache==="clone");return i?P.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?xt(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},Sn;function Er(e){return!("from"in e)}var ge=function(e,t){if(this)re(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ge;return e&&"d"in e&&re(n,e),n}};Xe(ge.prototype,(Sn={add:function(e){return nn(this,e),this},addKey:function(e){return mt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return mt(t,n,n)}),this}},Sn[Dn]=function(){return Jn(this)},Sn));function mt(e,t,n){var r=te(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Er(e))return re(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(te(n,e.from)<0)return i?mt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},jr(e);if(te(t,e.to)>0)return o?mt(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},jr(e);te(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),te(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&nn(e,i),o&&a&&nn(e,o)}}function nn(e,t){function n(r,i){var o=i.from,a=i.to,s=i.l,u=i.r;mt(r,o,a),s&&n(r,s),u&&n(r,u)}Er(t)||n(e,t)}function zs(e,t){var n=Jn(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=Jn(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(te(s.from,i.to)<=0&&te(s.to,i.from)>=0)return!0;te(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function Jn(e){var t=Er(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&te(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||te(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function jr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=B({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],a[i]=s[o],e[o]=a,a.d=zr(a)}e.d=zr(e)}function zr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var Vs={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ge(e.MIN_KEY,e.MAX_KEY);return B(B({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,s=a.extractKey,u=a.outbound,l=B(B({},i),{mutate:function(h){var y=h.trans,d=y.mutatedParts||(y.mutatedParts={}),p=function(R){var A="idb://"+t+"/"+r+"/"+R;return d[A]||(d[A]=new ge)},m=p(""),_=p(":dels"),w=h.type,b=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],g=b[0],v=b[1],x=h.trans._cache;return i.mutate(h).then(function(R){if(G(g)){w!=="delete"&&(g=R.results),m.addKeys(g);var A=Hi(g,x);!A&&w!=="add"&&_.addKeys(g),(A||v)&&Hs(p,o,A,v)}else if(g){var k={from:g.lower,to:g.upper};_.add(k),m.add(k)}else m.add(n),_.add(n),o.indexes.forEach(function(E){return p(E.name).add(n)});return R})}}),c=function(h){var y,d,p=h.query,m=p.index,_=p.range;return[m,new ge((y=_.lower)!==null&&y!==void 0?y:e.MIN_KEY,(d=_.upper)!==null&&d!==void 0?d:e.MAX_KEY)]},f={get:function(h){return[a,new ge(h.key)]},getMany:function(h){return[a,new ge().addKeys(h.keys)]},count:c,query:c,openCursor:c};return W(f).forEach(function(h){l[h]=function(y){var d=T.subscr;if(d){var p=function(x){var R="idb://"+t+"/"+r+"/"+x;return d[R]||(d[R]=new ge)},m=p(""),_=p(":dels"),w=f[h](y),b=w[0],g=w[1];if(p(b.name||"").add(g),!b.isPrimaryKey)if(h==="count")_.add(n);else{var v=h==="query"&&u&&y.values&&i.query(B(B({},y),{values:!1}));return i[h].apply(this,arguments).then(function(x){if(h==="query"){if(u&&y.values)return v.then(function(E){var C=E.result;return m.addKeys(C),x});var R=y.values?x.result.map(s):x.result;y.values?m.addKeys(R):_.addKeys(R)}else if(h==="openCursor"){var A=x,k=y.values;return A&&Object.create(A,{key:{get:function(){return _.addKey(A.primaryKey),A.key}},primaryKey:{get:function(){var E=A.primaryKey;return _.addKey(E),E}},value:{get:function(){return k&&m.addKey(A.primaryKey),A.value}}})}return x})}}return i[h].apply(this,arguments)}}),l}})}};function Hs(e,t,n,r){function i(o){var a=e(o.name||"");function s(l){return l!=null?o.extractKey(l):null}var u=function(l){return o.multiEntry&&G(l)?l.forEach(function(c){return a.addKey(c)}):a.addKey(l)};(n||r).forEach(function(l,c){var f=n&&s(n[c]),h=r&&s(r[c]);te(f,h)!==0&&(f!=null&&u(f),h!=null&&u(h))})}t.indexes.forEach(i)}var yn=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=B({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:N,dbReadyPromise:null,cancelOpen:N,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new P(function(s){a.dbReadyResolve=s}),a.openCanceller=new P(function(s,u){a.cancelOpen=u}),this._state=a,this.name=t,this.on=Ct(this,"populate","blocked","versionchange","close",{ready:[hr,N]}),this.on.ready.subscribe=yi(this.on.ready.subscribe,function(s){return function(u,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||P.resolve().then(u),l&&s(u);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(u),l&&s(u);else{s(u);var f=r;l||s(function h(){f.on.ready.unsubscribe(u),f.on.ready.unsubscribe(h)})}})}}),this.Collection=os(this),this.Table=es(this),this.Transaction=ds(this),this.Version=Rs(this),this.WhereClause=fs(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=gt(n.IDBKeyRange),this._createTransaction=function(s,u,l,c){return new r.Transaction(s,u,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),lt.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(s)})},this.use(Ms),this.use(Ls),this.use(Vs),this.use(js),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new D.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(ws),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||T.letThrough||this._vip)?t():new P(function(r,i){if(n._state.openComplete)return i(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new D.DatabaseClosed);return}n.open().catch(N)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:o}),a.sort(function(s,u){return s.level-u.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},e.prototype.open=function(){return $s(this)},e.prototype._close=function(){var t=this._state,n=lt.indexOf(this);if(n>=0&&lt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new P(function(r){t.dbReadyResolve=r}),t.openCanceller=new P(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new D.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new P(function(i,o){var a=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=V(function(){Is(t._deps,t.name),i()}),s.onerror=de(o),s.onblocked=t._fireOnBlocked};if(n)throw new D.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return W(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Os.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,o=T.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,u;try{if(u=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===wn)s=wn;else if(t=="rw"||t==_n)s=_n;else throw new D.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===wn&&s===_n)if(a)o=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&u.forEach(function(c){if(o&&o.storeNames.indexOf(c)===-1)if(a)o=null;else throw new D.SubTransaction("Table "+c+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,function(f,h){h(c)}):Q(c)}var l=Vi.bind(null,this,s,u,o,r);return o?o._promise(s,l,"lock"):T.trans?rt(T.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!ae(this._allTables,t))throw new D.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),Us=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ws=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[Us]=function(){return this},e}();function Ui(e,t){return W(t).forEach(function(n){var r=e[n]||(e[n]=new ge);nn(r,t[n])}),e}function qs(e){return new Ws(function(t){var n=lr(e);function r(y){n&&nt();var d=function(){return Te(e,{subscr:y,trans:null})},p=T.trans?rt(T.transless,d):d();return n&&p.then(Ae,Ae),p}var i=!1,o={},a={},s={get closed(){return i},unsubscribe:function(){i=!0,Ie.storagemutated.unsubscribe(f)}};t.start&&t.start(s);var u=!1,l=!1;function c(){return W(a).some(function(y){return o[y]&&zs(o[y],a[y])})}var f=function(y){Ui(o,y),c()&&h()},h=function(){if(!(u||i)){o={};var y={},d=r(y);l||(Ie(yt,f),l=!0),u=!0,Promise.resolve(d).then(function(p){u=!1,!i&&(c()?h():(o={},a=y,t.next&&t.next(p)))},function(p){u=!1,t.error&&t.error(p),s.unsubscribe()})}};return h(),s})}var Zn;try{Zn={indexedDB:j.indexedDB||j.mozIndexedDB||j.webkitIndexedDB||j.msIndexedDB,IDBKeyRange:j.IDBKeyRange||j.webkitIDBKeyRange}}catch{Zn={indexedDB:null,IDBKeyRange:null}}var De=yn;Xe(De,B(B({},dn),{delete:function(e){var t=new De(e,{addons:[]});return t.delete()},exists:function(e){return new De(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Ts(De.dependencies).then(e)}catch{return Q(new D.MissingAPI)}},defineClass:function(){function e(t){re(this,t)}return e},ignoreTransaction:function(e){return T.trans?rt(T.transless,e):e()},vip:Xn,async:function(e){return function(){try{var t=Gn(e.apply(this,arguments));return!t||typeof t.then!="function"?P.resolve(t):t}catch(n){return Q(n)}}},spawn:function(e,t,n){try{var r=Gn(e.apply(n,t||[]));return!r||typeof r.then!="function"?P.resolve(r):r}catch(i){return Q(i)}},currentTransaction:{get:function(){return T.trans||null}},waitFor:function(e,t){var n=P.resolve(typeof e=="function"?De.ignoreTransaction(e):e).timeout(t||6e4);return T.trans?T.trans.waitFor(n):n},Promise:P,debug:{get:function(){return ve},set:function(e){xi(e,e==="dexie"?function(){return!0}:Bi)}},derive:et,extend:re,props:Xe,override:yi,Events:Ct,on:Ie,liveQuery:qs,extendObservabilitySet:Ui,getByKeyPath:_e,setByKeyPath:le,delByKeyPath:Sa,shallowClone:bi,deepClone:xt,getObjectDiff:xr,cmp:te,asap:gi,minKey:Hn,addons:[],connections:lt,errnames:fr,dependencies:Zn,semVer:Or,version:Or.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));De.maxKey=gt(De.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ie(yt,function(e){if(!be){var t;pn?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Re,!0,!0,e)):t=new CustomEvent(Re,{detail:e}),be=!0,dispatchEvent(t),be=!1}}),addEventListener(Re,function(e){var t=e.detail;be||rn(t)}));function rn(e){var t=be;try{be=!0,Ie.storagemutated.fire(e)}finally{be=t}}var be=!1;if(typeof BroadcastChannel<"u"){var Vr=new BroadcastChannel(Re);Ie(yt,function(e){be||Vr.postMessage(e)}),Vr.onmessage=function(e){e.data&&rn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ie(yt,function(e){try{be||(typeof localStorage<"u"&&localStorage.setItem(Re,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&Tn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Re,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===Re){var t=JSON.parse(e.newValue);t&&rn(t.changedParts)}});var Hr=self.document&&navigator.serviceWorker;Hr&&Hr.addEventListener("message",Ys)}function Ys(e){var t=e.data;t&&t.type===Re&&rn(t.changedParts)}P.rejectionMapper=$a;xi(ve,Bi);const Qs=async()=>await(await fetch("https://raw.githubusercontent.com/sanderdrummer/recipes-md/master/parsed-recipes.json")).json();class Xs extends yn{constructor(){super("RecipeDatabase"),this.version(4).stores({recipes:"&title",plans:"++id"})}}const Ve=new Xs,Gs=async()=>{const e=await Qs();await Ve.recipes.bulkPut(e)},Js=async()=>await Ve.recipes.toArray(),Zs=async e=>await Ve.recipes.get(e),eu=e=>bt(e,Zs),tu=()=>bt(Js),nu=async()=>await Ve.plans.toCollection().sortBy("status"),ru=e=>Ve.plans.add(e),iu=e=>Ve.plans.delete(e.id),ou=()=>bt(nu),au=async e=>await Ve.plans.get(e),su=e=>bt(e,au);class uu extends yn{constructor(){super("ListDatabase"),this.version(2).stores({todo:"&title",done:"&title"})}}const pe=new uu,lu=async()=>{const e=await pe.todo.toArray(),t=await pe.done.toArray();return{todo:e,done:t}},cu=()=>bt(lu),fu=e=>{if(e.match(/^\d+/)){const t=/^(([0-9]*[.])?[0-9]+)/,[n=""]=e.match(t)??[],r=e.replace(n,""),[i="",o=""]=r.split(" ");return{amount:n,scale:i,title:o}}else if(e.trim().length>0)return{amount:"",scale:"",title:e};return null},hu=e=>e.split(`
`).reduce((t,n)=>{const r=fu(n);return r&&t.push(r),t},[]),Wi=async e=>{const t=e.map(async n=>{const r=await pe.todo.get(n.title);r?pe.todo.update(n.title,{amount:Number(r.amount)+Number(n.amount)}):pe.todo.put(n)});await Promise.all(t)},du=async e=>{await pe.todo.delete(e.title),await pe.done.add(e)},pu=async e=>{await pe.done.delete(e.title),await pe.todo.add(e)},vu=async()=>{await pe.done.clear()},yu=M('<textarea class="mb-10 font-extralight w-full min-h-300 rounded block, p-4 placeholder-stone-500 border-stone-800 text-stone-400 bg-stone-800 focus:outline-none focus:border-stone-400 focus:ring-stone-400 focus:ring-1" placeholder="Menge Artikel"></textarea>'),gu=()=>{const[e,t]=ne(""),n=or();return S(fn,{class:"mx-auto container",get children(){return[S(ln,{class:"ml-2",children:"Auf die Einkaufsliste:"}),(()=>{const r=yu.cloneNode(!0);return r.$$input=i=>t(i.currentTarget.value),r.style.setProperty("resize","none"),r.style.setProperty("height","50vh"),U(()=>r.value=e()),r})(),S(Ze,{class:"ml-2",get icon(){return S(cn,{})},message:"Zur Einkaufsliste hinzugefgt",label:"auf die Liste!",onClick:async()=>{const r=hu(e());await Wi(r),n("/list")}})]}})};wt(["input"]);const mu=M('<div class="grid grid-flow-col items-start mx-2"></div>'),bu=M('<div class="mt-5 p-3"><h2 class="text-2xl font-normal"></h2><ul role="list" class="divide-y list-none divide-stone-800"></ul></div>'),wu=M('<div class="p-3 font-extralight text-lg"></div>'),_u=M('<li class="font-extralight text-lg grid grid-flow-col justify-between"></li>'),xu=M("<span> </span>"),Eu=()=>{const[e,{refetch:t}]=cu();return S(fn,{class:"mx-auto container",get children(){return[(()=>{const n=mu.cloneNode(!0);return $(n,S(ln,{children:"Einkaufsliste"}),null),$(n,S(ar,{class:"p-4 pt-4 text-lg grid grid-flow-col gap-2 text-stone-300 justify-end items-center",href:"add",get children(){return[S(cn,{class:"fill-stone-300 h-7 w-7"}),"Mehr einkaufen"]}}),null),n})(),S(Ur,{heading:"Noch in den Korb",action:n=>{du(n).then(t)},emptyState:"Nichts mehr einzukaufen!",get items(){var n;return((n=e())==null?void 0:n.todo)??[]}}),S(Ur,{heading:"Schon dabei",action:n=>{pu(n).then(t)},emptyState:"Noch nichts eingekauft!",get items(){var n;return((n=e())==null?void 0:n.done)??[]}}),L(()=>L(()=>{var n,r;return(((r=(n=e())==null?void 0:n.done)==null?void 0:r.length)??0)>0})()&&S(Ze,{class:"text-red-400 mt-10 mb-8",label:"Neue Liste",onClick:async()=>{await vu(),t()}}))]}})},Ur=e=>(()=>{const t=bu.cloneNode(!0),n=t.firstChild,r=n.nextSibling;return $(n,()=>e.heading),$(r,S(Yt,{get each(){return e.items},get fallback(){return(()=>{const i=wu.cloneNode(!0);return $(i,()=>e.emptyState),i})()},children:i=>(()=>{const o=_u.cloneNode(!0);return $(o,S(Ze,{get label(){return(()=>{const a=xu.cloneNode(!0),s=a.firstChild;return $(a,()=>i.amount,s),$(a,()=>i.scale,s),$(a,()=>i.title,null),a})()},onClick:async()=>e.action(i)})),o})()})),t})(),Au=M('<svg aria-hidden="true" viewBox="0 0 24 24"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"></path></svg>'),Su=()=>S(sr,{href:"/list",label:"Einkaufsliste",get icon(){return Au.cloneNode(!0)}}),Cu=()=>S(he,{path:"/list",get children(){return[S(he,{path:"/",component:Eu}),S(he,{path:"/add",component:gu})]}}),ku=e=>S(Ze,{get message(){var t;return`${(t=e.plan)==null?void 0:t.title} zur Einkaufsliste hinzugefgt`},get disabled(){return e.plan===void 0},get icon(){return S(cn,{})},label:"Rezept einkaufen",onClick:async()=>{e.plan&&await Wi(e.plan.ingredients.map(t=>({amount:t.amount,scale:t.scale,title:t.name})))}}),qi=e=>S(Ze,{get class(){return e.compact?"pl-3":""},get message(){var t;return`${(t=e.recipe)==null?void 0:t.title} zum Kochplan hinzugefgt`},get disabled(){return e.recipe===void 0},get icon(){return S(cn,{})},get label(){return e.compact?"":"Rezept kochen"},onClick:async()=>{e.recipe&&await ru(e.recipe)}}),Pu=e=>S(Ze,{get disabled(){return e.plan===void 0},get icon(){return S(da,{})},label:"Fertig",onClick:async()=>{var t;e.plan&&(await iu(e.plan),await((t=e.onClick)==null?void 0:t.call(e)))}}),Ru=M('<div class="mb-8 sm:grid-flow-col grid justify-between"><label class="mb-8 sm:mtb0 sm:order-2"><span class="mr-4 text-stone-400 font-normal">Menge:</span><select class="rounded bg-stone-800 text-stone-400 border-stone-800 focus:outline-none focus:border-stone-400 focus:ring-stone-400 focus:ring-1"></select></label><ul class="sm:order-1"></ul></div>'),Tu=M("<p></p>"),Ku=M('<div class="mt-12 mb-8"></div>'),Iu=M("<option></option>"),Du=M('<li><span class="text-stone-400"></span><span class="font-normal"> <!> </span></li>'),$u=(e,t=1)=>Number(e)===0?"":t===1?e:`${Number(e)*t}`,Yi=e=>{const[t,n]=ne(1),r=[.25,.5,.75,1,1.25,1.5,1.75,2];return S(fn,{class:"mx-auto container whitespace-pre-wrap px-5",get children(){return[S(ln,{get children(){var i;return(i=e.recipe)==null?void 0:i.title}}),(()=>{const i=Ru.cloneNode(!0),o=i.firstChild,a=o.firstChild,s=a.nextSibling,u=o.nextSibling;return s.addEventListener("change",l=>n(Number(l.currentTarget.value))),$(s,S(Yt,{each:r,children:l=>(()=>{const c=Iu.cloneNode(!0);return c.value=l,$(c,l),c})()})),$(u,S(Yt,{get each(){var l;return(l=e.recipe)==null?void 0:l.ingredients},children:l=>(()=>{const c=Du.cloneNode(!0),f=c.firstChild,h=f.nextSibling,y=h.firstChild,d=y.nextSibling;return d.nextSibling,$(f,()=>$u(l.amount,t()),null),$(f,()=>l.scale,null),$(h,()=>l.name,d),c})()})),U(()=>s.value=t()),i})(),(()=>{const i=Tu.cloneNode(!0);return $(i,()=>{var o;return(o=e.recipe)==null?void 0:o.description}),i})(),(()=>{const i=Ku.cloneNode(!0);return $(i,()=>e.children),i})()]}})},Ou=()=>{const e=fi(),[t]=eu(e.id);return S(Yi,{get recipe(){return t()},get children(){return S(qi,{get recipe(){return t()}})}})},Bu=M('<div class="mx-auto container"><ul role="list" class="divide-y list-none divide-stone-800"></ul></div>'),Mu=M('<div class="p-3 font-extralight text-lg"></div>'),Nu=M('<li class="font-extralight text-lg grid grid-flow-col justify-between"></li>'),Qi=e=>(()=>{const t=Bu.cloneNode(!0),n=t.firstChild;return $(n,S(Yt,{get each(){return e.recipes},get fallback(){return(()=>{const r=Mu.cloneNode(!0);return $(r,()=>e.emptyState),r})()},children:r=>(()=>{const i=Nu.cloneNode(!0);return $(i,S(ar,{class:"p-3 no-underline ",get href(){return e.getHref(r)},get children(){return r.title}}),null),$(i,()=>e.action(r),null),i})()})),t})(),Lu=M('<div class="min-h-screen"><div class="p-4 sticky top-0"></div></div>'),Fu=()=>{const[e,{refetch:t}]=tu(),[n,r]=ne(""),i=()=>{const o=n().toLocaleLowerCase();return o.length>1?(e()??[]).filter(a=>a.title.toLocaleLowerCase().includes(o)):e()};return eo(()=>{e.state==="ready"&&e().length===0&&t()}),(()=>{const o=Lu.cloneNode(!0),a=o.firstChild;return $(a,S(ma,{placeholder:"Was kochen?",get query(){return n()},setQuery:r})),$(o,S(Qi,{getHref:s=>s.title,action:s=>S(qi,{compact:!0,recipe:s}),emptyState:"Leider kein Rezept gefunden",get recipes(){return i()}}),null),o})()},ju=M('<div class="mx-auto container"></div>'),zu=()=>{const[e,{refetch:t}]=ou();return S(fn,{get children(){return[(()=>{const n=ju.cloneNode(!0);return $(n,S(ln,{class:"px-2",children:"Geplante Rezepte"})),n})(),S(Qi,{getHref:n=>n.id.toString(),action:n=>S(ku,{plan:n,onClick:async()=>{await t()}}),emptyState:"Noch nichts geplant",get recipes(){return e()??[]}})]}})},Vu=()=>{const e=fi(),[t]=su(Number(e.id)),n=or();return S(Yi,{get recipe(){return t()},get children(){return S(Pu,{onClick:async()=>{n("/plan")},get plan(){return t()}})}})},Hu=M('<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></svg>'),Uu=M('<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"></path><path d="M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99zM13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83zM17.5 14.33c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24z"></path></svg>'),Wu=()=>S(sr,{href:"/plan",get icon(){return Hu.cloneNode(!0)},label:"Kochplan"}),qu=()=>S(sr,{href:"/recipes",get icon(){return Uu.cloneNode(!0)},label:"Rezepte"}),Yu=()=>[S(he,{path:"/recipes",get children(){return[S(he,{path:"/",component:Fu}),S(he,{path:"/:id",component:Ou})]}}),S(he,{path:"/plan",get children(){return[S(he,{path:"/",component:zu}),S(he,{path:"/:id",component:Vu})]}}),S(he,{path:"/",get element(){return S(ta,{href:"/recipes"})}})],Qu=()=>S(ia,{get children(){return[S(qu,{}),S(Wu,{}),S(Su,{})]}}),Xu=()=>S(Jo,{get source(){return $o()},get children(){return[S(Zo,{get children(){return[S(Yu,{}),S(Cu,{})]}}),S(Qu,{})]}}),Gu=()=>(Gs(),S(Xu,{}));wo(()=>S(Gu,{}),document.getElementById("root"));
