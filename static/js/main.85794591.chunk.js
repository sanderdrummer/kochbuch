(this.webpackJsonpkochbuch=this.webpackJsonpkochbuch||[]).push([[0],{106:function(e,t,a){e.exports=a(144)},111:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),i=(a(111),a(207)),u=a(205),o=a(91),s=a(206),m=a(208),p=a(210),f=a(13),h=a(36),E=a(55),d=a(8),b=a.n(d),g=a(17),v=a(189),k=a(191),x=a(194),O=a(181),w=a(182),j=a(183),y=a(209),C=a(179),z=a(28),I=a(190),R=a(184),S=a(187),B=a(192),L=a(193),F=a(188),T=a(45),W=a(174),A=a(214),D=a(177);const N=Object(W.a)(e=>Object(A.a)({fab:{position:"fixed",bottom:e.spacing(8),right:e.spacing(2)}})),J=({onClick:e,label:t,children:a})=>{const n=N();return r.a.createElement(D.a,{onClick:e,className:n.fab,color:"primary","aria-label":t},a)};var U=a(62),q=a(86),M=a(212),P=a(185),Z=a(180),H=Object(q.createWorker)({logger:function(e){return console.log(e)}}),$={status:"",text:"",image:""},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setImage":return Object(U.a)({},e,{image:t.payload});case"updateStatus":return Object(U.a)({},e,{status:t.payload});case"updateText":return Object(U.a)({},e,{text:t.payload,status:""});default:return e}},G=function(e){var t=e.onComplete,a=r.a.useState(!1),n=Object(f.a)(a,2),c=n[0],l=n[1],i=function(){var e=r.a.useReducer(V,$),t=Object(f.a)(e,2),a=t[0],n=t[1],c=r.a.useRef(null);return{state:a,previewImage:function(e){var t=new FileReader;t.onload=function(e){var t,a;"string"===typeof(null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.result)&&n({type:"setImage",payload:null===e||void 0===e?void 0:null===(a=e.target)||void 0===a?void 0:a.result})},t.readAsDataURL(e)},processImage:function(){var e=Object(g.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.current){e.next=14;break}return n({type:"updateStatus",payload:"loading"}),e.next=4,H.load();case 4:return e.next=6,H.loadLanguage("eng");case 6:return e.next=8,H.initialize("eng");case 8:return e.next=10,H.recognize(c.current);case 10:return t=e.sent,a=t.data.text,n({type:"updateText",payload:a}),e.abrupt("return");case 14:throw new Error("no image found");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),imageRef:c}}(),u=i.state,o=i.previewImage,s=i.processImage,m=i.imageRef;return r.a.useEffect((function(){u.text&&(t(u.text),l(!1))}),[u.text]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{onClick:function(){return l(!0)}},r.a.createElement(Z.a,null)),r.a.createElement(M.a,{anchor:"bottom",open:c,onClose:function(){return l(!1)},onOpen:function(){return l(!0)}},r.a.createElement(O.a,null,r.a.createElement(w.a,{title:"Text aus Bild extrahieren"}),r.a.createElement(j.a,null,r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files;t&&o(t[0])}}),u.image&&r.a.createElement("img",{style:{maxWidth:"100%"},ref:m,src:u.image,alt:"preview of your upload"})),r.a.createElement(R.a,null,r.a.createElement(C.a,{disabled:!u.image,onClick:s},"loading"===u.status?r.a.createElement(P.a,null):"Text aus dem Bild kopieren")))))},K=a(59),Q=a(87),X=a(88),Y=a(92),_=a(89),ee=new(function(e){function t(){var e;return Object(K.a)(this,t),(e=Object(Q.a)(this,Object(X.a)(t).call(this,"recipes-db"))).listItems=void 0,e.recipes=void 0,e.version(1).stores({listItems:"title",recipes:"title,tags"}),e.listItems=e.table("listItems"),e.recipes=e.table("recipes"),e}return Object(Y.a)(t,e),t}(_.a)),te=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.recipes.where("title").equals(t).toArray();case 2:return a=e.sent,n=Object(f.a)(a,1),r=n[0],e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return ee.recipes.offset(e).limit(50).toArray()},ne=function(e){return ee.recipes.add(e)},re=function(e){return ee.recipes.put(e)},ce=function(e){return ee.recipes.delete(e)},le=function(e){return ee.recipes.bulkPut(e)},ie=function(e){return ee.listItems.bulkPut(e.split("\n").map((function(e){return{title:e,inBasket:!1}})))},ue=a(19),oe={},se=function(e){var t=r.a.useState(oe[e]||""),a=Object(f.a)(t,2),n=a[0],c=a[1],l=function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!oe[t]){e.next=4;break}return c(oe[t]),e.abrupt("return");case 4:return c("pending"),e.next=7,te(t);case 7:a=e.sent,c(a),oe[t]=a,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c("error");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.useEffect((function(){l(e)}),[e]),{status:n,retry:l,updateCache:function(e){oe[e.title]=e}}},me="/kochbuch/rezepte",pe="/kochbuch/einkaufliste",fe=function(e){return e?void 0:"required"},he=function(){var e=Object(g.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,re(t);case 3:e.next=7;break;case 5:return e.next=7,ne(t);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ee=function(e){var t=e.onComplete,a=e.recipe;return r.a.createElement(O.a,null,r.a.createElement(w.a,{title:"Neues Rezept"}),r.a.createElement(j.a,null,r.a.createElement(T.b,{initialValues:a,onSubmit:function(e){return he(e,Boolean(a))}},(function(e){var n=e.handleSubmit,c=e.submitting,l=e.invalid,i=e.form;return r.a.createElement("form",{autoComplete:"off",onSubmit:function(){var e=Object(g.a)(b.a.mark((function e(a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(a);case 2:(r=e.sent)&&(i.reset(),t(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(T.a,{name:"title",validate:fe},(function(e){return r.a.createElement(y.a,Object.assign({margin:"normal",fullWidth:!0,error:e.meta.touched&&e.meta.error,label:"Rezept Titel"},e.input))})),r.a.createElement(T.a,{name:"tags"},(function(e){return r.a.createElement(y.a,Object.assign({margin:"normal",fullWidth:!0,label:"Tags",name:"tags"},e.input))})),r.a.createElement(T.a,{name:"ingredients",validate:fe},(function(e){return r.a.createElement(p.a,{mt:2},r.a.createElement(y.a,Object.assign({margin:"normal",multiline:!0,fullWidth:!0,error:e.meta.touched&&e.meta.error,label:"Zutaten"},e.input)),r.a.createElement(G,{onComplete:function(t){e.input.onChange(t)}}))})),r.a.createElement(T.a,{name:"description",validate:fe},(function(e){return r.a.createElement(p.a,{mt:2},r.a.createElement(y.a,Object.assign({margin:"normal",multiline:!0,fullWidth:!0,label:"Zubereitung"},e.input)),r.a.createElement(G,{onComplete:function(t){e.input.onChange(t)}}))})),r.a.createElement(p.a,{mt:2},r.a.createElement(C.a,{disabled:l||c,color:"primary",type:"submit"},a?"\xe4nderung an ".concat(a.title," speichern"):"neues Rezept speichern")))}))))},de=function(){var e=Object(h.g)(),t=Object(h.h)().id,a=decodeURIComponent(t||""),n=se(a),c=n.status,l=n.updateCache;return""===c||"pending"===c||"error"===c?r.a.createElement(F.a,{height:"12rem"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{onComplete:function(t){l(t),e.push(ke(t.title))},recipe:c}),r.a.createElement(J,{label:"Rezept l\xf6schen",onClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce(c.title);case 3:e.push(me),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))},r.a.createElement(v.a,null)))},be=function(){var e=Object(h.g)(),t=Object(h.h)().id,a=decodeURIComponent(t||""),n=se(a).status;return""===n||"pending"===n?r.a.createElement(F.a,{height:"12rem"}):"error"===n?r.a.createElement(p.a,null,"rezpete konnten nicht geladen werden"):r.a.createElement(p.a,{mt:3},r.a.createElement(O.a,null,r.a.createElement(w.a,{title:n.title,subheader:n.tags}),r.a.createElement(j.a,null,r.a.createElement(z.a,{gutterBottom:!0,variant:"h6",component:"span"},"Zutaten:"),r.a.createElement(z.a,{style:{whiteSpace:"pre-wrap"}},n.ingredients),r.a.createElement(p.a,{mt:4,mb:4},r.a.createElement(I.a,null)),r.a.createElement(z.a,{style:{whiteSpace:"pre-wrap"}},n.description)),r.a.createElement(R.a,null,r.a.createElement(C.a,{onClick:Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie(n.ingredients);case 2:e.push(pe);case 3:case"end":return t.stop()}}),t)})))},n.title," zur Einkaufsliste hinzuf\xfcgen"))),r.a.createElement(J,{onClick:function(){return e.push(xe(n.title))},label:"Rezept bearbeiten",children:r.a.createElement(k.a,null)}))},ge=function(){var e=function(){var e=r.a.useState([]),t=Object(f.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!1),l=Object(f.a)(c,2),i=l[0],u=l[1],o=r.a.useRef(0);return{status:"",hasMore:i,recipes:a,fetchRecipes:function(){var e=Object(g.a)(b.a.mark((function e(){var t,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae(o.current);case 3:if(!(t=e.sent).length){e.next=14;break}return o.current+=50,r=[].concat(Object(ue.a)(a),Object(ue.a)(t)),n(r),e.next=10,ee.recipes.count();case 10:c=e.sent,u(c!==r.length),e.next=15;break;case 14:u(!1);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}()}}(),t=e.recipes,a=e.status,n=e.fetchRecipes,c=e.hasMore,l=Object(h.g)();return r.a.useEffect((function(){n()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,null,t.map((function(e){return r.a.createElement(B.a,{onClick:function(){return l.push(ke(e.title))},key:e.title},r.a.createElement(L.a,{primary:e.title,secondary:e.tags}))}))),c&&r.a.createElement(C.a,{onClick:n},"Load more"),"error"===a&&r.a.createElement(p.a,null,"rezpete konnten nicht geladen werden"," ",r.a.createElement(C.a,{onClick:n},"nochmal versuchen")),r.a.createElement(J,{onClick:function(){return l.push(ve)},label:"Rezept hinzuf\xfcgen",children:r.a.createElement(x.a,null)}))},ve=me+"/neues-rezept",ke=function(e){return me+"/"+e},xe=function(e){return ke(e)+"/bearbeiten"},Oe=function(){var e=Object(h.g)();return r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:me,component:ge}),r.a.createElement(h.b,{path:ve,render:function(){return r.a.createElement(Ee,{onComplete:function(t){e.push(ke(t.title))}})}}),r.a.createElement(h.b,{exact:!0,path:"/kochbuch/rezepte/:id",component:be}),r.a.createElement(h.b,{path:"/kochbuch/rezepte/:id/bearbeiten",component:de}))};let we=[];const je=()=>{const[e,t]=r.a.useState(we);return{list:e,fetchList:async()=>{try{const e=await ee.listItems.toArray();we=e,t(e)}catch{}}}};var ye=a(196),Ce=a(197),ze=a(198),Ie=a(211),Re=a(195),Se=function(e){var t=e.onCompleted;return r.a.createElement(p.a,null,r.a.createElement(O.a,null,r.a.createElement(w.a,{title:"Einkaufsliste erweitern"}),r.a.createElement(j.a,null,r.a.createElement("form",{onSubmit:function(){var e=Object(g.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.currentTarget,e.prev=2,e.next=5,ie(n.listItems.value);case 5:n.reset(),t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(y.a,{multiline:!0,fullWidth:!0,name:"listItems",label:"Einkaufsliste",required:!0}),r.a.createElement(C.a,{type:"submit",startIcon:r.a.createElement(Re.a,null)},"speichern")))))};const Be=({onClearList:e})=>{const[t,a]=r.a.useState(!1),n=()=>a(!1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{onClick:()=>a(!0)},"Liste l\xf6schen"),r.a.createElement(ye.a,{open:t,onClose:n,"aria-labelledby":"clear-list-dialog-title"},r.a.createElement(Ce.a,{id:"clear-list-dialog-title"},"Die Einkaufsliste leeren ?"),r.a.createElement(ze.a,null,r.a.createElement(C.a,{onClick:n,color:"primary"},"nein"),r.a.createElement(C.a,{onClick:async()=>{try{await ee.listItems.clear(),e(),n()}catch(t){console.log(t)}},color:"primary",autoFocus:!0},"ja"))))},Le=()=>{const{list:e,fetchList:t}=je(),[a,n]=r.a.useState(!1);return r.a.useEffect(()=>{t()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,null,e.map(e=>r.a.createElement(B.a,{button:!0,onClick:async()=>{var a;await(a={...e,inBasket:!e.inBasket},ee.listItems.put(a)),t()},key:e.title},r.a.createElement(L.a,null,e.title),r.a.createElement(Ie.a,{checked:e.inBasket,inputProps:{"aria-label":`${e.title} ist im Einkaufswagen`}})))),r.a.createElement(I.a,null),e.length>0&&r.a.createElement(p.a,{mt:4},r.a.createElement(Be,{onClearList:t})),r.a.createElement(M.a,{anchor:"bottom",open:a,onOpen:()=>n(!0),onClose:()=>n(!1)},r.a.createElement(Se,{onCompleted:()=>{n(!1),t()}})),r.a.createElement(J,{onClick:()=>n(!0),label:"brauche sachen"},r.a.createElement(x.a,null)))};var Fe=a(213),Te=function(){var e=r.a.useState(null),t=Object(f.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),l=Object(f.a)(c,2),i=l[0],u=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"file",onChange:function(e){var t=new FileReader;t.onload=function(e){console.log(e.target.result);var t=JSON.parse(e.target.result);n(t)},t.readAsText(e.target.files[0])}}),r.a.createElement(C.a,{onClick:Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u("pending"),e.prev=1,e.next=4,le(a||[]);case 4:u("success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),u("error");case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),disabled:null===a||"pending"===i},"importieren"),r.a.createElement(Fe.a,{autoHideDuration:4e3,open:"error"===i,onClose:function(){return u(void 0)},message:"Oh nein der import hat leider nicht geklappt"}),r.a.createElement(Fe.a,{autoHideDuration:4e3,anchorOrigin:{vertical:"top",horizontal:"left"},open:"success"===i,onClose:function(){return u(void 0)},message:"Import erfolgreich ".concat((null===a||void 0===a?void 0:a.length)||0," Rezepte hinzugef\xfcgt oder\n        aktualisiert")}))},We=function(){var e=r.a.useState(""),t=Object(f.a)(e,2),a=t[0],n=t[1],c=function(){var e=Object(g.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.recipes.toArray();case 2:t=e.sent,a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),n(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){c()}),[]),a?r.a.createElement(C.a,{download:"recipes.json",href:a},"exportieren"):r.a.createElement(F.a,null)},Ae=function(){return r.a.createElement(p.a,null,r.a.createElement(z.a,null,"Einstellungen"),r.a.createElement(I.a,null),r.a.createElement(O.a,null,r.a.createElement(w.a,{title:"Rezepte"}),r.a.createElement(R.a,null,r.a.createElement(We,null))),r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(Te,null))))},De=a(202),Ne=a(203),Je=a(204),Ue=a(199),qe=a(200),Me=a(201),Pe=Object(W.a)((function(e){return Object(A.a)({nav:{marginTop:e.spacing(8),bottom:0,top:"auto"}})})),Ze=function(){var e=Object(h.g)(),t=Pe(),a=e.location.pathname.split("/"),n=Object(f.a)(a,3),c=(n[0],n[1],n[2]);return r.a.createElement(Ue.a,{position:"fixed",color:"primary",className:t.nav},r.a.createElement(qe.a,{value:c,showLabels:!0},r.a.createElement(Me.a,{onClick:function(){return e.push(me)},value:"rezepte",label:"Rezepte",icon:r.a.createElement(De.a,null)}),r.a.createElement(Me.a,{onClick:function(){return e.push(pe)},value:"einkaufliste",label:"Liste",icon:r.a.createElement(Ne.a,null)}),r.a.createElement(Me.a,{onClick:function(){return e.push("/kochbuch/einstellungen")},value:"einstellungen",label:"Einstellungen",icon:r.a.createElement(Je.a,null)})))},He=function(){return r.a.createElement(E.a,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{path:me,component:Oe}),r.a.createElement(h.b,{path:pe,component:Le}),r.a.createElement(h.b,{path:"/kochbuch/einstellungen",component:Ae}),r.a.createElement(h.a,{from:"/",to:me})),r.a.createElement(Ze,null))};var $e=function(){var e=Object(u.a)("(prefers-color-scheme: dark)"),t=r.a.useMemo((function(){return Object(o.a)({palette:{type:e?"dark":"light"}})}),[e]);return r.a.createElement(s.a,{theme:t},r.a.createElement(i.a,null),r.a.createElement(m.a,null,r.a.createElement(p.a,{mt:2,mb:8},r.a.createElement(He,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement($e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[106,1,2]]]);
//# sourceMappingURL=main.85794591.chunk.js.map