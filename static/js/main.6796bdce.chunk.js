(this.webpackJsonpkochbuch=this.webpackJsonpkochbuch||[]).push([[0],{101:function(e,t,a){e.exports=a(136)},106:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a.n(c),i=(a(106),a(14)),u=a(11),o=a(51),s=a(199),m=a(197),p=a(86),f=a(198),E=a(166),d=a(206),h=a(191),b=a(192),g=a(193),v=a(200),k=a(202),x=a(8),O=a.n(x),w=a(18),j=a(181),y=a(183),C=a(186),I=a(173),R=a(174),S=a(175),z=a(201),B=a(171),L=a(27),F=a(182),T=a(176),W=a(179),A=a(184),D=a(185),N=a(180),J=a(42),U=a(169);const q=Object(E.a)(e=>Object(d.a)({fab:{position:"fixed",bottom:e.spacing(8),right:e.spacing(2)}})),M=({onClick:e,label:t,children:a})=>{const n=q();return r.a.createElement(U.a,{onClick:e,className:n.fab,color:"primary","aria-label":t},a)};var P=a(59),Z=a(82),H=a(204),$=a(177),V=a(172),G=Object(Z.createWorker)({logger:function(e){return console.log(e)}}),K={status:"",text:"",image:""},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setImage":return Object(P.a)({},e,{image:t.payload});case"updateStatus":return Object(P.a)({},e,{status:t.payload});case"updateText":return Object(P.a)({},e,{text:t.payload,status:""});default:return e}},X=function(e){var t=e.onComplete,a=r.a.useState(!1),n=Object(i.a)(a,2),c=n[0],l=n[1],u=function(){var e=r.a.useReducer(Q,K),t=Object(i.a)(e,2),a=t[0],n=t[1],c=r.a.useRef(null);return{state:a,previewImage:function(e){var t=new FileReader;t.onload=function(e){var t,a;"string"===typeof(null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.result)&&n({type:"setImage",payload:null===e||void 0===e?void 0:null===(a=e.target)||void 0===a?void 0:a.result})},t.readAsDataURL(e)},processImage:function(){var e=Object(w.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.current){e.next=14;break}return n({type:"updateStatus",payload:"loading"}),e.next=4,G.load();case 4:return e.next=6,G.loadLanguage("eng");case 6:return e.next=8,G.initialize("eng");case 8:return e.next=10,G.recognize(c.current);case 10:return t=e.sent,a=t.data.text,n({type:"updateText",payload:a}),e.abrupt("return");case 14:throw new Error("no image found");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),imageRef:c}}(),o=u.state,s=u.previewImage,m=u.processImage,p=u.imageRef;return r.a.useEffect((function(){o.text&&(t(o.text),l(!1))}),[o.text]),r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{onClick:function(){return l(!0)}},r.a.createElement(V.a,null)),r.a.createElement(H.a,{anchor:"bottom",open:c,onClose:function(){return l(!1)},onOpen:function(){return l(!0)}},r.a.createElement(I.a,null,r.a.createElement(R.a,{title:"Text aus Bild extrahieren"}),r.a.createElement(S.a,null,r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files;t&&s(t[0])}}),o.image&&r.a.createElement("img",{style:{maxWidth:"100%"},ref:p,src:o.image,alt:"preview of your upload"})),r.a.createElement(T.a,null,r.a.createElement(B.a,{disabled:!o.image,onClick:m},"loading"===o.status?r.a.createElement($.a,null):"Text aus dem Bild kopieren")))))},Y=a(56),_=a(83),ee=a(84),te=a(87),ae=a(85),ne=new(function(e){function t(){var e;return Object(Y.a)(this,t),(e=Object(_.a)(this,Object(ee.a)(t).call(this,"recipes-db"))).listItems=void 0,e.recipes=void 0,e.version(1).stores({listItems:"title",recipes:"title,tags"}),e.listItems=e.table("listItems"),e.recipes=e.table("recipes"),e}return Object(te.a)(t,e),t}(ae.a)),re=function(){var e=Object(w.a)(O.a.mark((function e(t){var a,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.recipes.where("title").equals(t).toArray();case 2:return a=e.sent,n=Object(i.a)(a,1),r=n[0],e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return ne.recipes.offset(e).limit(50).toArray()},le=function(e){return ne.recipes.add(e)},ie=function(e){return ne.recipes.put(e)},ue=function(e){return ne.recipes.delete(e)},oe=function(e){return ne.recipes.bulkPut(e)},se=function(e){return ne.listItems.bulkPut(e.split("\n").map((function(e){return{title:e,inBasket:!1}})))},me=a(20),pe={},fe=function(e){var t=r.a.useState(pe[e]||""),a=Object(i.a)(t,2),n=a[0],c=a[1],l=function(){var e=Object(w.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!pe[t]){e.next=4;break}return c(pe[t]),e.abrupt("return");case 4:return c("pending"),e.next=7,re(t);case 7:a=e.sent,c(a),pe[t]=a,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c("error");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.useEffect((function(){l(e)}),[e]),{status:n,retry:l,updateCache:function(e){pe[e.title]=e}}},Ee=function(e){return e?void 0:"required"},de=function(){var e=Object(w.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,ie(t);case 3:e.next=7;break;case 5:return e.next=7,le(t);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),he=function(e){var t=e.onComplete,a=e.recipe;return r.a.createElement(I.a,null,r.a.createElement(R.a,{title:"Neues Rezept"}),r.a.createElement(S.a,null,r.a.createElement(J.b,{initialValues:a,onSubmit:function(e){return de(e,Boolean(a))}},(function(e){var n=e.handleSubmit,c=e.submitting,l=e.invalid,i=e.form;return r.a.createElement("form",{autoComplete:"off",onSubmit:function(){var e=Object(w.a)(O.a.mark((function e(a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(a);case 2:(r=e.sent)&&(i.reset(),t(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(J.a,{name:"title",validate:Ee},(function(e){return r.a.createElement(z.a,Object.assign({margin:"normal",fullWidth:!0,error:e.meta.touched&&e.meta.error,label:"Rezept Titel"},e.input))})),r.a.createElement(J.a,{name:"tags"},(function(e){return r.a.createElement(z.a,Object.assign({margin:"normal",fullWidth:!0,label:"Tags",name:"tags"},e.input))})),r.a.createElement(J.a,{name:"ingredients",validate:Ee},(function(e){return r.a.createElement(k.a,{mt:2},r.a.createElement(z.a,Object.assign({margin:"normal",multiline:!0,fullWidth:!0,error:e.meta.touched&&e.meta.error,label:"Zutaten"},e.input)),r.a.createElement(X,{onComplete:function(t){e.input.onChange(t)}}))})),r.a.createElement(J.a,{name:"description",validate:Ee},(function(e){return r.a.createElement(k.a,{mt:2},r.a.createElement(z.a,Object.assign({margin:"normal",multiline:!0,fullWidth:!0,label:"Zubereitung"},e.input)),r.a.createElement(X,{onComplete:function(t){e.input.onChange(t)}}))})),r.a.createElement(k.a,{mt:2},r.a.createElement(B.a,{disabled:l||c,color:"primary",type:"submit"},a?"\xe4nderung an ".concat(a.title," speichern"):"neues Rezept speichern")))}))))},be=function(){var e=Object(u.h)(),t=Object(u.i)().id,a=decodeURIComponent(t),n=fe(a),c=n.status,l=n.updateCache;return""===c||"pending"===c||"error"===c?r.a.createElement(N.a,{height:"12rem"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{onComplete:function(t){l(t),e("/kochbuch/recipes/".concat(t.title))},recipe:c}),r.a.createElement(M,{label:"Rezept l\xf6schen",onClick:Object(w.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue(c.title);case 3:e("/kochbuch/recipes"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))},r.a.createElement(j.a,null)))},ge=function(){var e=Object(u.h)(),t=Object(u.i)().id,a=decodeURIComponent(t),n=fe(a).status;return""===n||"pending"===n?r.a.createElement(N.a,{height:"12rem"}):"error"===n?r.a.createElement(k.a,null,"rezpete konnten nicht geladen werden"):r.a.createElement(k.a,{mt:3},r.a.createElement(I.a,null,r.a.createElement(R.a,{title:n.title,subheader:n.tags}),r.a.createElement(S.a,null,r.a.createElement(L.a,{gutterBottom:!0,variant:"h6",component:"span"},"Zutaten:"),r.a.createElement(L.a,{style:{whiteSpace:"pre-wrap"}},n.ingredients),r.a.createElement(k.a,{mt:4,mb:4},r.a.createElement(F.a,null)),r.a.createElement(L.a,{style:{whiteSpace:"pre-wrap"}},n.description)),r.a.createElement(T.a,null,r.a.createElement(B.a,{onClick:Object(w.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(n.ingredients);case 2:e("/kochbuch/list");case 3:case"end":return t.stop()}}),t)})))},n.title," zur Einkaufsliste hinzuf\xfcgen"))),r.a.createElement(M,{onClick:function(){return e("edit")},label:"Rezept bearbeiten",children:r.a.createElement(y.a,null)}))},ve=function(){var e=function(){var e=r.a.useState([]),t=Object(i.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!1),l=Object(i.a)(c,2),u=l[0],o=l[1],s=r.a.useRef(0);return{status:"",hasMore:u,recipes:a,fetchRecipes:function(){var e=Object(w.a)(O.a.mark((function e(){var t,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce(s.current);case 3:if(!(t=e.sent).length){e.next=14;break}return s.current+=50,r=[].concat(Object(me.a)(a),Object(me.a)(t)),n(r),e.next=10,ne.recipes.count();case 10:c=e.sent,o(c!==r.length),e.next=15;break;case 14:o(!1);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}()}}(),t=e.recipes,a=e.status,n=e.fetchRecipes,c=e.hasMore,l=Object(u.h)();return r.a.useEffect((function(){n()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,t.map((function(e){return r.a.createElement(A.a,{onClick:function(){return l("".concat(e.title))},key:e.title},r.a.createElement(D.a,{primary:e.title,secondary:e.tags}))}))),c&&r.a.createElement(B.a,{onClick:n},"Load more"),"error"===a&&r.a.createElement(k.a,null,"rezpete konnten nicht geladen werden"," ",r.a.createElement(B.a,{onClick:n},"nochmal versuchen")),r.a.createElement(M,{onClick:function(){return l("add")},label:"Rezept hinzuf\xfcgen",children:r.a.createElement(C.a,null)}))},ke=function(){var e=Object(u.h)();return r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",element:r.a.createElement(ve,null)}),r.a.createElement(u.a,{path:"/add",element:r.a.createElement(he,{onComplete:function(t){e("/kochbuch/recipes/"+t.title)}})}),r.a.createElement(u.a,{path:"/:id",element:r.a.createElement(ge,null)}),r.a.createElement(u.a,{path:"/:id/edit",element:r.a.createElement(be,null)}))};let xe=[];const Oe=()=>{const[e,t]=r.a.useState(xe);return{list:e,fetchList:async()=>{try{const e=await ne.listItems.toArray();xe=e,t(e)}catch{}}}};var we=a(188),je=a(189),ye=a(190),Ce=a(203),Ie=a(187),Re=function(e){var t=e.onCompleted;return r.a.createElement(k.a,null,r.a.createElement(I.a,null,r.a.createElement(R.a,{title:"Einkaufsliste erweitern"}),r.a.createElement(S.a,null,r.a.createElement("form",{onSubmit:function(){var e=Object(w.a)(O.a.mark((function e(a){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.currentTarget,e.prev=2,e.next=5,se(n.listItems.value);case 5:n.reset(),t(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(z.a,{multiline:!0,fullWidth:!0,name:"listItems",label:"Einkaufsliste",required:!0}),r.a.createElement(B.a,{type:"submit",startIcon:r.a.createElement(Ie.a,null)},"speichern")))))};const Se=({onClearList:e})=>{const[t,a]=r.a.useState(!1),n=()=>a(!1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{onClick:()=>a(!0)},"Liste l\xf6schen"),r.a.createElement(we.a,{open:t,onClose:n,"aria-labelledby":"clear-list-dialog-title"},r.a.createElement(je.a,{id:"clear-list-dialog-title"},"Die Einkaufsliste leeren ?"),r.a.createElement(ye.a,null,r.a.createElement(B.a,{onClick:n,color:"primary"},"nein"),r.a.createElement(B.a,{onClick:async()=>{try{await ne.listItems.clear(),e(),n()}catch(t){console.log(t)}},color:"primary",autoFocus:!0},"ja"))))},ze=()=>{const{list:e,fetchList:t}=Oe(),[a,n]=r.a.useState(!1);return r.a.useEffect(()=>{t()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,e.map(e=>r.a.createElement(A.a,{button:!0,onClick:async()=>{var a;await(a={...e,inBasket:!e.inBasket},ne.listItems.put(a)),t()},key:e.title},r.a.createElement(D.a,null,e.title),r.a.createElement(Ce.a,{checked:e.inBasket,inputProps:{"aria-label":`${e.title} ist im Einkaufswagen`}})))),r.a.createElement(F.a,null),e.length>0&&r.a.createElement(k.a,{mt:4},r.a.createElement(Se,{onClearList:t})),r.a.createElement(H.a,{anchor:"bottom",open:a,onOpen:()=>n(!0),onClose:()=>n(!1)},r.a.createElement(Re,{onCompleted:()=>{n(!1),t()}})),r.a.createElement(M,{onClick:()=>n(!0),label:"brauche sachen"},r.a.createElement(C.a,null)))};var Be=a(205),Le=function(){var e=r.a.useState(null),t=Object(i.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),l=Object(i.a)(c,2),u=l[0],o=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"file",onChange:function(e){var t=new FileReader;t.onload=function(e){console.log(e.target.result);var t=JSON.parse(e.target.result);n(t)},t.readAsText(e.target.files[0])}}),r.a.createElement(B.a,{onClick:Object(w.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o("pending"),e.prev=1,e.next=4,oe(a||[]);case 4:o("success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o("error");case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),disabled:null===a||"pending"===u},"importieren"),r.a.createElement(Be.a,{autoHideDuration:4e3,open:"error"===u,onClose:function(){return o(void 0)},message:"Oh nein der import hat leider nicht geklappt"}),r.a.createElement(Be.a,{autoHideDuration:4e3,anchorOrigin:{vertical:"top",horizontal:"left"},open:"success"===u,onClose:function(){return o(void 0)},message:"Import erfolgreich ".concat((null===a||void 0===a?void 0:a.length)||0," Rezepte hinzugef\xfcgt oder\n        aktualisiert")}))},Fe=function(){var e=r.a.useState(""),t=Object(i.a)(e,2),a=t[0],n=t[1],c=function(){var e=Object(w.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.recipes.toArray();case 2:t=e.sent,a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),n(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){c()}),[]),a?r.a.createElement(B.a,{download:"recipes.json",href:a},"exportieren"):r.a.createElement(N.a,null)},Te=function(){return r.a.createElement(k.a,null,r.a.createElement(L.a,null,"Einstellungen"),r.a.createElement(F.a,null),r.a.createElement(I.a,null,r.a.createElement(R.a,{title:"Rezepte"}),r.a.createElement(T.a,null,r.a.createElement(Fe,null))),r.a.createElement(I.a,null,r.a.createElement(S.a,null,r.a.createElement(Le,null))))},We=a(194),Ae=a(195),De=a(196),Ne=Object(E.a)((function(e){return Object(d.a)({nav:{marginTop:e.spacing(8),bottom:0,top:"auto"}})})),Je=function(){var e=Object(u.h)(),t=Ne(),a=r.a.useState("recipes"),n=Object(i.a)(a,2),c=n[0],l=n[1];return r.a.useEffect((function(){e("/kochbuch/".concat(c))}),[e,c]),r.a.createElement(h.a,{position:"fixed",color:"primary",className:t.nav},r.a.createElement(b.a,{value:c,showLabels:!0},r.a.createElement(g.a,{onClick:function(){return l("recipes")},value:"recipes",label:"Rezepte",icon:r.a.createElement(We.a,null)}),r.a.createElement(g.a,{onClick:function(){return l("list")},value:"list",label:"Liste",icon:r.a.createElement(Ae.a,null)}),r.a.createElement(g.a,{onClick:function(){return l("settings")},value:"settings",label:"Einstellungen",icon:r.a.createElement(De.a,null)})))};var Ue=function(){var e=Object(m.a)("(prefers-color-scheme: dark)"),t=r.a.useMemo((function(){return Object(p.a)({palette:{type:e?"dark":"light"}})}),[e]);return r.a.createElement(f.a,{theme:t},r.a.createElement(s.a,null),r.a.createElement(o.a,null,r.a.createElement(v.a,null,r.a.createElement(k.a,{mt:2,mb:8},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"kochbuch/recipes/*",element:r.a.createElement(ke,null)}),r.a.createElement(u.a,{path:"kochbuch/list/*",element:r.a.createElement(ze,null)}),r.a.createElement(u.a,{path:"kochbuch/settings/*",element:r.a.createElement(Te,null)})))),r.a.createElement(Je,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[101,1,2]]]);
//# sourceMappingURL=main.6796bdce.chunk.js.map