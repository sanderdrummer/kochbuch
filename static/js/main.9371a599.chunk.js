(this["webpackJsonpthe-list"]=this["webpackJsonpthe-list"]||[]).push([[0],{79:function(e,t,a){e.exports=a(91)},84:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(10),c=a.n(r),i=(a(84),a(7)),s=a(44),o=a(151),m=a(149),u=a(68),p=a(150),E=a(122),d=a(157),h=a(143),g=a(144),b=a(145),f=a(152),k=a(154),y=a(134),v=a(137),C=a(127),w=a(128),j=a(129),I=a(153),O=a(131),z=a(21),R=a(133),S=a(130),L=a(135),B=a(136),W=a(132),$=a(125);const q=Object(E.a)(e=>Object(d.a)({fab:{position:"fixed",bottom:e.spacing(8),right:e.spacing(2)}})),N=({onClick:e,label:t,children:a})=>{const n=q();return l.a.createElement($.a,{onClick:e,className:n.fab,color:"primary","aria-label":t},a)};var T=a(65);class x extends T.a{constructor(){super("ListDB6"),this.listItems=void 0,this.recipes=void 0,this.version(1).stores({listItems:"title",recipes:"title,tags"}),this.listItems=this.table("listItems"),this.recipes=this.table("recipes")}}const D=new x,F=e=>D.listItems.bulkPut(e.map(e=>({title:e,inBasket:!1}))),V={};let A=[];const M=e=>{const[t,a]=l.a.useState(V[e]||""),n=async e=>{try{if(V[e])return void a(V[e]);a("pending");const t=await(async e=>{const[t]=await D.recipes.where("title").equals(e).toArray();return t})(e);a(t),V[e]=t}catch{a("error")}};return l.a.useEffect(()=>{n(e)},[e]),{status:t,retry:n,updateCache:e=>{V[e.title]=e}}},J=()=>{const[e,t]=l.a.useState(A),[a,n]=l.a.useState(!1),r=l.a.useRef(A.length);return{status:"",hasMore:a,recipes:e,fetchRecipes:async()=>{try{const a=await((e=0)=>D.recipes.offset(e).limit(1).toArray())(r.current);if(a.length){r.current+=1,A=[...e,...a],t(A);const l=await D.recipes.count();n(l!==A.length)}else n(!1)}catch{}}}},P=({onComplete:e,recipe:t})=>{const[a,n]=l.a.useState("");return l.a.createElement(C.a,null,l.a.createElement(w.a,{title:"Neues Rezept"}),l.a.createElement(j.a,null,l.a.createElement("form",{autoComplete:"off",onSubmit:async a=>{const l=a.currentTarget;a.preventDefault();const r={title:l.titleName.value,tags:l.tags.value||"",ingredients:l.ingredients.value.split("\n"),description:l.description.value};try{n("pending"),t?await(e=>D.recipes.put(e))(r):await(e=>D.recipes.add(e))(r),e(r),l.reset(),n("success")}catch(a){console.log(a),n("error")}}},l.a.createElement(I.a,{margin:"normal",fullWidth:!0,defaultValue:null===t||void 0===t?void 0:t.title,required:!0,label:"Rezept Titel",name:"titleName"}),l.a.createElement(I.a,{margin:"normal",fullWidth:!0,defaultValue:null===t||void 0===t?void 0:t.tags,label:"Tags",name:"tags"}),l.a.createElement(I.a,{margin:"normal",multiline:!0,fullWidth:!0,required:!0,defaultValue:null===t||void 0===t?void 0:t.ingredients,label:"Zutaten",name:"ingredients"}),l.a.createElement(I.a,{margin:"normal",multiline:!0,fullWidth:!0,required:!0,defaultValue:null===t||void 0===t?void 0:t.description,label:"Zubereitung",name:"description"}),l.a.createElement(k.a,{mt:2},l.a.createElement(O.a,{disabled:"pending"===a,color:"primary",type:"submit"},t?`\xe4nderung an ${t.title} speichern`:"neues Rezept speichern")),l.a.createElement(k.a,{bgcolor:"primary",mt:"2"},"pending"===a&&"erstelle Rezept","error"===a&&"oh oh da ist etwas schief gelaufen","success"===a&&"neues Rezept erstellt!"))))},U=()=>{const e=Object(i.h)(),{id:t}=Object(i.i)(),a=decodeURIComponent(t),{status:n,updateCache:r}=M(a);return""===n||"pending"===n||"error"===n?l.a.createElement(W.a,{height:"12rem"}):l.a.createElement(P,{onComplete:t=>{r(t),e(`/recipes/${t.title}`)},recipe:n})},Z=()=>{const e=Object(i.h)(),{id:t}=Object(i.i)(),a=decodeURIComponent(t),{status:n}=M(a);return""===n||"pending"===n?l.a.createElement(W.a,{height:"12rem"}):"error"===n?l.a.createElement(k.a,null,"rezpete konnten nicht geladen werden"):l.a.createElement(k.a,{mt:3},l.a.createElement(C.a,null,l.a.createElement(w.a,{title:n.title,subheader:n.tags}),l.a.createElement(j.a,null,n.ingredients.map(e=>l.a.createElement(z.a,{key:e},e)),l.a.createElement(z.a,{style:{whiteSpace:"pre-wrap"}},n.description)),l.a.createElement(R.a,null,l.a.createElement(O.a,{onClick:async()=>{await F(n.ingredients),e("/list")}},n.title," zur Einkaufsliste hinzuf\xfcgen"))),l.a.createElement(N,{onClick:()=>e("edit"),label:"Rezept bearbeiten",children:l.a.createElement(y.a,null)}))},G=()=>{const{recipes:e,status:t,fetchRecipes:a,hasMore:n}=J(),r=Object(i.h)();return l.a.useEffect(()=>{a()},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,null,e.map(e=>l.a.createElement(L.a,{onClick:()=>r(`${e.title}`),key:e.title},l.a.createElement(B.a,{primary:e.title,secondary:e.tags})))),n&&l.a.createElement(O.a,{onClick:a},"Load more"),"error"===t&&l.a.createElement(k.a,null,"rezpete konnten nicht geladen werden"," ",l.a.createElement(O.a,{onClick:a},"nochmal versuchen")),l.a.createElement(N,{onClick:()=>r("add"),label:"Rezept hinzuf\xfcgen",children:l.a.createElement(v.a,null)}))},H=()=>{const e=Object(i.h)();return l.a.createElement(i.c,null,l.a.createElement(i.a,{path:"/",element:l.a.createElement(G,null)}),l.a.createElement(i.a,{path:"/add",element:l.a.createElement(P,{onComplete:t=>{e("/recipes/"+t.title)}})}),l.a.createElement(i.a,{path:"/:id",element:l.a.createElement(Z,null)}),l.a.createElement(i.a,{path:"/:id/edit",element:l.a.createElement(U,null)}))};let K=[];const Q=()=>{const[e,t]=l.a.useState(K);return{list:e,fetchList:async()=>{try{const e=await D.listItems.toArray();K=e,t(e)}catch{}}}};var X=a(139),Y=a(140),_=a(141),ee=a(155),te=a(142),ae=a(156),ne=a(138);const le=({onCompleted:e})=>l.a.createElement(k.a,null,l.a.createElement(C.a,null,l.a.createElement(w.a,{title:"Einkaufsliste erweitern"}),l.a.createElement(j.a,null,l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const a=t.currentTarget,n=a.listItems.value.split("\n");console.log(n);try{await F(n),a.reset(),e()}catch(t){console.log(t)}}},l.a.createElement(I.a,{multiline:!0,fullWidth:!0,name:"listItems",label:"Einkaufsliste",required:!0}),l.a.createElement(O.a,{type:"submit",startIcon:l.a.createElement(ne.a,null)},"speichern"))))),re=({onClearList:e})=>{const[t,a]=l.a.useState(!1),n=()=>a(!1);return l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{onClick:()=>a(!0)},"Liste l\xf6schen"),l.a.createElement(X.a,{open:t,onClose:n,"aria-labelledby":"clear-list-dialog-title"},l.a.createElement(Y.a,{id:"clear-list-dialog-title"},"Die Einkaufsliste leeren ?"),l.a.createElement(_.a,null,l.a.createElement(O.a,{onClick:n,color:"primary"},"nein"),l.a.createElement(O.a,{onClick:async()=>{try{await D.listItems.clear(),e(),n()}catch(t){console.log(t)}},color:"primary",autoFocus:!0},"ja"))))},ce=()=>{const{list:e,fetchList:t}=Q(),[a,n]=l.a.useState(!1);return l.a.useEffect(()=>{t()},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,null,e.map(e=>l.a.createElement(L.a,{button:!0,onClick:async()=>{var a;await(a={...e,inBasket:!e.inBasket},D.listItems.put(a)),t()},key:e.title},l.a.createElement(B.a,null,e.title),l.a.createElement(ee.a,{checked:e.inBasket,inputProps:{"aria-label":`${e.title} ist im Einkaufswagen`}})))),l.a.createElement(te.a,null),e.length>0&&l.a.createElement(k.a,{mt:4},l.a.createElement(re,{onClearList:t})),l.a.createElement(ae.a,{anchor:"bottom",open:a,onOpen:()=>n(!0),onClose:()=>n(!1)},l.a.createElement(le,{onCompleted:()=>{n(!1),t()}})),l.a.createElement(N,{onClick:()=>n(!0),label:"brauche sachen"},l.a.createElement(v.a,null)))};var ie=a(146),se=a(147),oe=a(148);const me=Object(E.a)(e=>Object(d.a)({nav:{marginTop:e.spacing(8),bottom:0,top:"auto"}})),ue=()=>{const e=Object(i.h)(),t=me(),[a,n]=l.a.useState("recipes");return l.a.useEffect(()=>{e(`/${a}`)},[e,a]),l.a.createElement(h.a,{position:"fixed",color:"primary",className:t.nav},l.a.createElement(g.a,{value:a,showLabels:!0},l.a.createElement(b.a,{onClick:()=>n("recipes"),value:"recipes",label:"Rezepte",icon:l.a.createElement(ie.a,null)}),l.a.createElement(b.a,{onClick:()=>n("list"),value:"list",label:"Liste",icon:l.a.createElement(se.a,null)}),l.a.createElement(b.a,{onClick:()=>n("settings"),value:"settings",label:"Einstellungen",icon:l.a.createElement(oe.a,null)})))};var pe=function(){const e=Object(m.a)("(prefers-color-scheme: dark)"),t=l.a.useMemo(()=>Object(u.a)({palette:{type:e?"dark":"light"}}),[e]);return l.a.createElement(p.a,{theme:t},l.a.createElement(o.a,null),l.a.createElement(s.a,null,l.a.createElement(f.a,null,l.a.createElement(k.a,{mt:2,mb:8},l.a.createElement(i.c,null,l.a.createElement(i.a,{path:"/recipes/*",element:l.a.createElement(H,null)}),l.a.createElement(i.a,{path:"/list/*",element:l.a.createElement(ce,null)})))),l.a.createElement(ue,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[79,1,2]]]);
//# sourceMappingURL=main.9371a599.chunk.js.map