<!--
  Generated template for the RecipesCreateRecipe page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle icon-only>
      <ion-icon name='menu'></ion-icon>
    </button>
    <ion-title>
      {{title}}
    </ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <form [formGroup]="recipeForm" (submit)="createOrUpdateRecipe(recipeForm.value)">

    <ion-card>
      <ion-item>
        <ion-label floating>Rezept Name</ion-label>
        <ion-input type="text" formControlName="title"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label floating>Kategorie</ion-label>
        <ion-select multiple formControlName="categories">
          <ion-option
            value="{{category}}"
            *ngFor="let category of store.categories">{{category}}
          </ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label floating>Rezept Beschreibung</ion-label>
        <ion-textarea formControlName="description"></ion-textarea>
      </ion-item>
    </ion-card>
    <ion-card>
      <div formArrayName="products">
        <div *ngFor="let c of recipeForm.controls.products.controls; let i = index">
          <div [formGroupName]="i">
            <ion-grid>
              <ion-row>
                <ion-col width-60>
                  <ion-item>
                    <ion-label floating>Produkt</ion-label>
                    <ion-input type="text" formControlName="title"></ion-input>
                  </ion-item>

                </ion-col>
                <ion-col width-40>
                  <ion-item>
                    <ion-label floating>Anzahl</ion-label>
                    <ion-input type="text" formControlName="amount"></ion-input>
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-grid>

          </div>
          <ion-item>
            <button (click)="removeItem('products', i)" type="button" ion-button>Produkt entfernen</button>
          </ion-item>
        </div>
      </div>

      <ion-item>
        <button (click)="addProduct()" type="button" ion-button>Produkt hinzuf√ºgen</button>
      </ion-item>

    </ion-card>
    <ion-card>
      <ion-item>
        <button type="submit" ion-button [disabled]="!recipeForm.valid" block>{{submitButtonLabel}}</button>
      </ion-item>
    </ion-card>
  </form>

  <ion-fab *ngIf="store.selectedRecipe" top right>
    <button (click)="deleteRecipe()" ion-fab color="danger">
      <ion-icon name="trash"></ion-icon>
    </button>
  </ion-fab>
</ion-content>
